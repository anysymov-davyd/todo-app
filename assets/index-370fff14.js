(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function fa(e,t){const n=Object.create(null),r=e.split(",");for(let s=0;s<r.length;s++)n[r[s]]=!0;return t?s=>!!n[s.toLowerCase()]:s=>!!n[s]}const at={},Dn=[],le=()=>{},Od=()=>!1,Fd=/^on[^a-z]/,li=e=>Fd.test(e),da=e=>e.startsWith("onUpdate:"),kt=Object.assign,pa=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Ld=Object.prototype.hasOwnProperty,Y=(e,t)=>Ld.call(e,t),U=Array.isArray,xn=e=>ci(e)==="[object Map]",gu=e=>ci(e)==="[object Set]",K=e=>typeof e=="function",vt=e=>typeof e=="string",ga=e=>typeof e=="symbol",ht=e=>e!==null&&typeof e=="object",mu=e=>ht(e)&&K(e.then)&&K(e.catch),_u=Object.prototype.toString,ci=e=>_u.call(e),Ud=e=>ci(e).slice(8,-1),yu=e=>ci(e)==="[object Object]",ma=e=>vt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ks=fa(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ui=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Bd=/-(\w)/g,we=ui(e=>e.replace(Bd,(t,n)=>n?n.toUpperCase():"")),jd=/\B([A-Z])/g,Tn=ui(e=>e.replace(jd,"-$1").toLowerCase()),hi=ui(e=>e.charAt(0).toUpperCase()+e.slice(1)),Xi=ui(e=>e?`on${hi(e)}`:""),Bs=(e,t)=>!Object.is(e,t),Ds=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},js=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},To=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let xl;const vo=()=>xl||(xl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Xt(e){if(U(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=vt(r)?Kd(r):Xt(r);if(s)for(const i in s)t[i]=s[i]}return t}else{if(vt(e))return e;if(ht(e))return e}}const $d=/;(?![^(]*\))/g,qd=/:([^]+)/,Hd=/\/\*[^]*?\*\//g;function Kd(e){const t={};return e.replace(Hd,"").split($d).forEach(n=>{if(n){const r=n.split(qd);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Qt(e){let t="";if(vt(e))t=e;else if(U(e))for(let n=0;n<e.length;n++){const r=Qt(e[n]);r&&(t+=r+" ")}else if(ht(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const zd="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Wd=fa(zd);function Eu(e){return!!e||e===""}const Tu=e=>vt(e)?e:e==null?"":U(e)||ht(e)&&(e.toString===_u||!K(e.toString))?JSON.stringify(e,vu,2):String(e),vu=(e,t)=>t&&t.__v_isRef?vu(e,t.value):xn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s])=>(n[`${r} =>`]=s,n),{})}:gu(t)?{[`Set(${t.size})`]:[...t.values()]}:ht(t)&&!U(t)&&!yu(t)?String(t):t;let re;class Qd{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=re,!t&&re&&(this.index=(re.scopes||(re.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=re;try{return re=this,t()}finally{re=n}}}on(){re=this}off(){re=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Gd(e,t=re){t&&t.active&&t.effects.push(e)}function Xd(){return re}const _a=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Iu=e=>(e.w&ze)>0,wu=e=>(e.n&ze)>0,Yd=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=ze},Jd=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const s=t[r];Iu(s)&&!wu(s)?s.delete(e):t[n++]=s,s.w&=~ze,s.n&=~ze}t.length=n}},Io=new WeakMap;let pr=0,ze=1;const wo=30;let ie;const fn=Symbol(""),Ao=Symbol("");class ya{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Gd(this,r)}run(){if(!this.active)return this.fn();let t=ie,n=Be;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=ie,ie=this,Be=!0,ze=1<<++pr,pr<=wo?Yd(this):Ml(this),this.fn()}finally{pr<=wo&&Jd(this),ze=1<<--pr,ie=this.parent,Be=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ie===this?this.deferStop=!0:this.active&&(Ml(this),this.onStop&&this.onStop(),this.active=!1)}}function Ml(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let Be=!0;const Au=[];function Jn(){Au.push(Be),Be=!1}function Zn(){const e=Au.pop();Be=e===void 0?!0:e}function zt(e,t,n){if(Be&&ie){let r=Io.get(e);r||Io.set(e,r=new Map);let s=r.get(n);s||r.set(n,s=_a()),Ru(s)}}function Ru(e,t){let n=!1;pr<=wo?wu(e)||(e.n|=ze,n=!Iu(e)):n=!e.has(ie),n&&(e.add(ie),ie.deps.push(e))}function Ve(e,t,n,r,s,i){const o=Io.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(n==="length"&&U(e)){const l=Number(r);o.forEach((c,u)=>{(u==="length"||u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),t){case"add":U(e)?ma(n)&&a.push(o.get("length")):(a.push(o.get(fn)),xn(e)&&a.push(o.get(Ao)));break;case"delete":U(e)||(a.push(o.get(fn)),xn(e)&&a.push(o.get(Ao)));break;case"set":xn(e)&&a.push(o.get(fn));break}if(a.length===1)a[0]&&Ro(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);Ro(_a(l))}}function Ro(e,t){const n=U(e)?e:[...e];for(const r of n)r.computed&&Nl(r);for(const r of n)r.computed||Nl(r)}function Nl(e,t){(e!==ie||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Zd=fa("__proto__,__v_isRef,__isVue"),Cu=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ga)),tp=Ea(),ep=Ea(!1,!0),np=Ea(!0),Ol=rp();function rp(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=et(this);for(let i=0,o=this.length;i<o;i++)zt(r,"get",i+"");const s=r[t](...n);return s===-1||s===!1?r[t](...n.map(et)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Jn();const r=et(this)[t].apply(this,n);return Zn(),r}}),e}function sp(e){const t=et(this);return zt(t,"has",e),t.hasOwnProperty(e)}function Ea(e=!1,t=!1){return function(r,s,i){if(s==="__v_isReactive")return!e;if(s==="__v_isReadonly")return e;if(s==="__v_isShallow")return t;if(s==="__v_raw"&&i===(e?t?Tp:ku:t?Vu:bu).get(r))return r;const o=U(r);if(!e){if(o&&Y(Ol,s))return Reflect.get(Ol,s,i);if(s==="hasOwnProperty")return sp}const a=Reflect.get(r,s,i);return(ga(s)?Cu.has(s):Zd(s))||(e||zt(r,"get",s),t)?a:qt(a)?o&&ma(s)?a:a.value:ht(a)?e?Du(a):Ia(a):a}}const ip=Pu(),op=Pu(!0);function Pu(e=!1){return function(n,r,s,i){let o=n[r];if(Sr(o)&&qt(o)&&!qt(s))return!1;if(!e&&(!Co(s)&&!Sr(s)&&(o=et(o),s=et(s)),!U(n)&&qt(o)&&!qt(s)))return o.value=s,!0;const a=U(n)&&ma(r)?Number(r)<n.length:Y(n,r),l=Reflect.set(n,r,s,i);return n===et(i)&&(a?Bs(s,o)&&Ve(n,"set",r,s):Ve(n,"add",r,s)),l}}function ap(e,t){const n=Y(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&Ve(e,"delete",t,void 0),r}function lp(e,t){const n=Reflect.has(e,t);return(!ga(t)||!Cu.has(t))&&zt(e,"has",t),n}function cp(e){return zt(e,"iterate",U(e)?"length":fn),Reflect.ownKeys(e)}const Su={get:tp,set:ip,deleteProperty:ap,has:lp,ownKeys:cp},up={get:np,set(e,t){return!0},deleteProperty(e,t){return!0}},hp=kt({},Su,{get:ep,set:op}),Ta=e=>e,fi=e=>Reflect.getPrototypeOf(e);function gs(e,t,n=!1,r=!1){e=e.__v_raw;const s=et(e),i=et(t);n||(t!==i&&zt(s,"get",t),zt(s,"get",i));const{has:o}=fi(s),a=r?Ta:n?Ra:Aa;if(o.call(s,t))return a(e.get(t));if(o.call(s,i))return a(e.get(i));e!==s&&e.get(t)}function ms(e,t=!1){const n=this.__v_raw,r=et(n),s=et(e);return t||(e!==s&&zt(r,"has",e),zt(r,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function _s(e,t=!1){return e=e.__v_raw,!t&&zt(et(e),"iterate",fn),Reflect.get(e,"size",e)}function Fl(e){e=et(e);const t=et(this);return fi(t).has.call(t,e)||(t.add(e),Ve(t,"add",e,e)),this}function Ll(e,t){t=et(t);const n=et(this),{has:r,get:s}=fi(n);let i=r.call(n,e);i||(e=et(e),i=r.call(n,e));const o=s.call(n,e);return n.set(e,t),i?Bs(t,o)&&Ve(n,"set",e,t):Ve(n,"add",e,t),this}function Ul(e){const t=et(this),{has:n,get:r}=fi(t);let s=n.call(t,e);s||(e=et(e),s=n.call(t,e)),r&&r.call(t,e);const i=t.delete(e);return s&&Ve(t,"delete",e,void 0),i}function Bl(){const e=et(this),t=e.size!==0,n=e.clear();return t&&Ve(e,"clear",void 0,void 0),n}function ys(e,t){return function(r,s){const i=this,o=i.__v_raw,a=et(o),l=t?Ta:e?Ra:Aa;return!e&&zt(a,"iterate",fn),o.forEach((c,u)=>r.call(s,l(c),l(u),i))}}function Es(e,t,n){return function(...r){const s=this.__v_raw,i=et(s),o=xn(i),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=s[e](...r),u=n?Ta:t?Ra:Aa;return!t&&zt(i,"iterate",l?Ao:fn),{next(){const{value:f,done:p}=c.next();return p?{value:f,done:p}:{value:a?[u(f[0]),u(f[1])]:u(f),done:p}},[Symbol.iterator](){return this}}}}function Fe(e){return function(...t){return e==="delete"?!1:this}}function fp(){const e={get(i){return gs(this,i)},get size(){return _s(this)},has:ms,add:Fl,set:Ll,delete:Ul,clear:Bl,forEach:ys(!1,!1)},t={get(i){return gs(this,i,!1,!0)},get size(){return _s(this)},has:ms,add:Fl,set:Ll,delete:Ul,clear:Bl,forEach:ys(!1,!0)},n={get(i){return gs(this,i,!0)},get size(){return _s(this,!0)},has(i){return ms.call(this,i,!0)},add:Fe("add"),set:Fe("set"),delete:Fe("delete"),clear:Fe("clear"),forEach:ys(!0,!1)},r={get(i){return gs(this,i,!0,!0)},get size(){return _s(this,!0)},has(i){return ms.call(this,i,!0)},add:Fe("add"),set:Fe("set"),delete:Fe("delete"),clear:Fe("clear"),forEach:ys(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=Es(i,!1,!1),n[i]=Es(i,!0,!1),t[i]=Es(i,!1,!0),r[i]=Es(i,!0,!0)}),[e,n,t,r]}const[dp,pp,gp,mp]=fp();function va(e,t){const n=t?e?mp:gp:e?pp:dp;return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(Y(n,s)&&s in r?n:r,s,i)}const _p={get:va(!1,!1)},yp={get:va(!1,!0)},Ep={get:va(!0,!1)},bu=new WeakMap,Vu=new WeakMap,ku=new WeakMap,Tp=new WeakMap;function vp(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ip(e){return e.__v_skip||!Object.isExtensible(e)?0:vp(Ud(e))}function Ia(e){return Sr(e)?e:wa(e,!1,Su,_p,bu)}function wp(e){return wa(e,!1,hp,yp,Vu)}function Du(e){return wa(e,!0,up,Ep,ku)}function wa(e,t,n,r,s){if(!ht(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=s.get(e);if(i)return i;const o=Ip(e);if(o===0)return e;const a=new Proxy(e,o===2?r:n);return s.set(e,a),a}function Mn(e){return Sr(e)?Mn(e.__v_raw):!!(e&&e.__v_isReactive)}function Sr(e){return!!(e&&e.__v_isReadonly)}function Co(e){return!!(e&&e.__v_isShallow)}function xu(e){return Mn(e)||Sr(e)}function et(e){const t=e&&e.__v_raw;return t?et(t):e}function Mu(e){return js(e,"__v_skip",!0),e}const Aa=e=>ht(e)?Ia(e):e,Ra=e=>ht(e)?Du(e):e;function Ap(e){Be&&ie&&(e=et(e),Ru(e.dep||(e.dep=_a())))}function Rp(e,t){e=et(e);const n=e.dep;n&&Ro(n)}function qt(e){return!!(e&&e.__v_isRef===!0)}function Cp(e){return qt(e)?e.value:e}const Pp={get:(e,t,n)=>Cp(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return qt(s)&&!qt(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function Nu(e){return Mn(e)?e:new Proxy(e,Pp)}class Sp{constructor(t,n,r,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ya(t,()=>{this._dirty||(this._dirty=!0,Rp(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const t=et(this);return Ap(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function bp(e,t,n=!1){let r,s;const i=K(e);return i?(r=e,s=le):(r=e.get,s=e.set),new Sp(r,s,i||!s,n)}function je(e,t,n,r){let s;try{s=r?e(...r):e()}catch(i){di(i,t,n)}return s}function ce(e,t,n,r){if(K(e)){const i=je(e,t,n,r);return i&&mu(i)&&i.catch(o=>{di(o,t,n)}),i}const s=[];for(let i=0;i<e.length;i++)s.push(ce(e[i],t,n,r));return s}function di(e,t,n,r=!0){const s=t?t.vnode:null;if(t){let i=t.parent;const o=t.proxy,a=n;for(;i;){const c=i.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,o,a)===!1)return}i=i.parent}const l=t.appContext.config.errorHandler;if(l){je(l,null,10,[e,o,a]);return}}Vp(e,n,s,r)}function Vp(e,t,n,r=!0){console.error(e)}let br=!1,Po=!1;const Nt=[];let _e=0;const Nn=[];let Se=null,on=0;const Ou=Promise.resolve();let Ca=null;function kp(e){const t=Ca||Ou;return e?t.then(this?e.bind(this):e):t}function Dp(e){let t=_e+1,n=Nt.length;for(;t<n;){const r=t+n>>>1;Vr(Nt[r])<e?t=r+1:n=r}return t}function Pa(e){(!Nt.length||!Nt.includes(e,br&&e.allowRecurse?_e+1:_e))&&(e.id==null?Nt.push(e):Nt.splice(Dp(e.id),0,e),Fu())}function Fu(){!br&&!Po&&(Po=!0,Ca=Ou.then(Uu))}function xp(e){const t=Nt.indexOf(e);t>_e&&Nt.splice(t,1)}function Mp(e){U(e)?Nn.push(...e):(!Se||!Se.includes(e,e.allowRecurse?on+1:on))&&Nn.push(e),Fu()}function jl(e,t=br?_e+1:0){for(;t<Nt.length;t++){const n=Nt[t];n&&n.pre&&(Nt.splice(t,1),t--,n())}}function Lu(e){if(Nn.length){const t=[...new Set(Nn)];if(Nn.length=0,Se){Se.push(...t);return}for(Se=t,Se.sort((n,r)=>Vr(n)-Vr(r)),on=0;on<Se.length;on++)Se[on]();Se=null,on=0}}const Vr=e=>e.id==null?1/0:e.id,Np=(e,t)=>{const n=Vr(e)-Vr(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function Uu(e){Po=!1,br=!0,Nt.sort(Np);const t=le;try{for(_e=0;_e<Nt.length;_e++){const n=Nt[_e];n&&n.active!==!1&&je(n,null,14)}}finally{_e=0,Nt.length=0,Lu(),br=!1,Ca=null,(Nt.length||Nn.length)&&Uu()}}function Op(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||at;let s=n;const i=t.startsWith("update:"),o=i&&t.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:p}=r[u]||at;p&&(s=n.map(g=>vt(g)?g.trim():g)),f&&(s=n.map(To))}let a,l=r[a=Xi(t)]||r[a=Xi(we(t))];!l&&i&&(l=r[a=Xi(Tn(t))]),l&&ce(l,e,6,s);const c=r[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,ce(c,e,6,s)}}function Bu(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let o={},a=!1;if(!K(e)){const l=c=>{const u=Bu(c,t,!0);u&&(a=!0,kt(o,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!i&&!a?(ht(e)&&r.set(e,null),null):(U(i)?i.forEach(l=>o[l]=null):kt(o,i),ht(e)&&r.set(e,o),o)}function pi(e,t){return!e||!li(t)?!1:(t=t.slice(2).replace(/Once$/,""),Y(e,t[0].toLowerCase()+t.slice(1))||Y(e,Tn(t))||Y(e,t))}let te=null,ju=null;function $s(e){const t=te;return te=e,ju=e&&e.type.__scopeId||null,t}function Fp(e,t=te,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&Zl(-1);const i=$s(t);let o;try{o=e(...s)}finally{$s(i),r._d&&Zl(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Yi(e){const{type:t,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:f,data:p,setupState:g,ctx:b,inheritAttrs:C}=e;let S,q;const z=$s(e);try{if(n.shapeFlag&4){const O=s||r;S=me(u.call(O,O,f,i,g,p,b)),q=l}else{const O=t;S=me(O.length>1?O(i,{attrs:l,slots:a,emit:c}):O(i,null)),q=t.props?l:Lp(l)}}catch(O){Ir.length=0,di(O,e,1),S=At(gn)}let G=S;if(q&&C!==!1){const O=Object.keys(q),{shapeFlag:It}=G;O.length&&It&7&&(o&&O.some(da)&&(q=Up(q,o)),G=jn(G,q))}return n.dirs&&(G=jn(G),G.dirs=G.dirs?G.dirs.concat(n.dirs):n.dirs),n.transition&&(G.transition=n.transition),S=G,$s(z),S}const Lp=e=>{let t;for(const n in e)(n==="class"||n==="style"||li(n))&&((t||(t={}))[n]=e[n]);return t},Up=(e,t)=>{const n={};for(const r in e)(!da(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Bp(e,t,n){const{props:r,children:s,component:i}=e,{props:o,children:a,patchFlag:l}=t,c=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?$l(r,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const p=u[f];if(o[p]!==r[p]&&!pi(c,p))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?$l(r,o,c):!0:!!o;return!1}function $l(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!pi(n,i))return!0}return!1}function jp({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const $p=e=>e.__isSuspense;function qp(e,t){t&&t.pendingBranch?U(e)?t.effects.push(...e):t.effects.push(e):Mp(e)}const Ts={};function Ji(e,t,n){return $u(e,t,n)}function $u(e,t,{immediate:n,deep:r,flush:s,onTrack:i,onTrigger:o}=at){var a;const l=Xd()===((a=bt)==null?void 0:a.scope)?bt:null;let c,u=!1,f=!1;if(qt(e)?(c=()=>e.value,u=Co(e)):Mn(e)?(c=()=>e,r=!0):U(e)?(f=!0,u=e.some(O=>Mn(O)||Co(O)),c=()=>e.map(O=>{if(qt(O))return O.value;if(Mn(O))return ln(O);if(K(O))return je(O,l,2)})):K(e)?t?c=()=>je(e,l,2):c=()=>{if(!(l&&l.isUnmounted))return p&&p(),ce(e,l,3,[g])}:c=le,t&&r){const O=c;c=()=>ln(O())}let p,g=O=>{p=z.onStop=()=>{je(O,l,4)}},b;if(Dr)if(g=le,t?n&&ce(t,l,3,[c(),f?[]:void 0,g]):c(),s==="sync"){const O=Bg();b=O.__watcherHandles||(O.__watcherHandles=[])}else return le;let C=f?new Array(e.length).fill(Ts):Ts;const S=()=>{if(z.active)if(t){const O=z.run();(r||u||(f?O.some((It,yt)=>Bs(It,C[yt])):Bs(O,C)))&&(p&&p(),ce(t,l,3,[O,C===Ts?void 0:f&&C[0]===Ts?[]:C,g]),C=O)}else z.run()};S.allowRecurse=!!t;let q;s==="sync"?q=S:s==="post"?q=()=>Kt(S,l&&l.suspense):(S.pre=!0,l&&(S.id=l.uid),q=()=>Pa(S));const z=new ya(c,q);t?n?S():C=z.run():s==="post"?Kt(z.run.bind(z),l&&l.suspense):z.run();const G=()=>{z.stop(),l&&l.scope&&pa(l.scope.effects,z)};return b&&b.push(G),G}function Hp(e,t,n){const r=this.proxy,s=vt(e)?e.includes(".")?qu(r,e):()=>r[e]:e.bind(r,r);let i;K(t)?i=t:(i=t.handler,n=t);const o=bt;$n(this);const a=$u(s,i.bind(r),n);return o?$n(o):dn(),a}function qu(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function ln(e,t){if(!ht(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),qt(e))ln(e.value,t);else if(U(e))for(let n=0;n<e.length;n++)ln(e[n],t);else if(gu(e)||xn(e))e.forEach(n=>{ln(n,t)});else if(yu(e))for(const n in e)ln(e[n],t);return e}function Hu(e,t){const n=te;if(n===null)return e;const r=yi(n)||n.proxy,s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[o,a,l,c=at]=t[i];o&&(K(o)&&(o={mounted:o,updated:o}),o.deep&&ln(a),s.push({dir:o,instance:r,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function en(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(Jn(),ce(l,n,8,[e.el,a,e,t]),Zn())}}const xs=e=>!!e.type.__asyncLoader,Ku=e=>e.type.__isKeepAlive;function Kp(e,t){zu(e,"a",t)}function zp(e,t){zu(e,"da",t)}function zu(e,t,n=bt){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(gi(t,r,n),n){let s=n.parent;for(;s&&s.parent;)Ku(s.parent.vnode)&&Wp(r,t,n,s),s=s.parent}}function Wp(e,t,n,r){const s=gi(t,e,r,!0);Wu(()=>{pa(r[t],s)},n)}function gi(e,t,n=bt,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;Jn(),$n(n);const a=ce(t,n,e,o);return dn(),Zn(),a});return r?s.unshift(i):s.push(i),i}}const Ne=e=>(t,n=bt)=>(!Dr||e==="sp")&&gi(e,(...r)=>t(...r),n),Qp=Ne("bm"),Gp=Ne("m"),Xp=Ne("bu"),Yp=Ne("u"),Jp=Ne("bum"),Wu=Ne("um"),Zp=Ne("sp"),tg=Ne("rtg"),eg=Ne("rtc");function ng(e,t=bt){gi("ec",e,t)}const Qu="components";function gr(e,t){return sg(Qu,e,!0,t)||e}const rg=Symbol.for("v-ndc");function sg(e,t,n=!0,r=!1){const s=te||bt;if(s){const i=s.type;if(e===Qu){const a=Og(i,!1);if(a&&(a===t||a===we(t)||a===hi(we(t))))return i}const o=ql(s[e]||i[e],t)||ql(s.appContext[e],t);return!o&&r?i:o}}function ql(e,t){return e&&(e[t]||e[we(t)]||e[hi(we(t))])}function Hl(e,t,n,r){let s;const i=n&&n[r];if(U(e)||vt(e)){s=new Array(e.length);for(let o=0,a=e.length;o<a;o++)s[o]=t(e[o],o,void 0,i&&i[o])}else if(typeof e=="number"){s=new Array(e);for(let o=0;o<e;o++)s[o]=t(o+1,o,void 0,i&&i[o])}else if(ht(e))if(e[Symbol.iterator])s=Array.from(e,(o,a)=>t(o,a,void 0,i&&i[a]));else{const o=Object.keys(e);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];s[a]=t(e[c],c,a,i&&i[a])}}else s=[];return n&&(n[r]=s),s}const So=e=>e?ih(e)?yi(e)||e.proxy:So(e.parent):null,vr=kt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>So(e.parent),$root:e=>So(e.root),$emit:e=>e.emit,$options:e=>Sa(e),$forceUpdate:e=>e.f||(e.f=()=>Pa(e.update)),$nextTick:e=>e.n||(e.n=kp.bind(e.proxy)),$watch:e=>Hp.bind(e)}),Zi=(e,t)=>e!==at&&!e.__isScriptSetup&&Y(e,t),ig={get({_:e},t){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const g=o[t];if(g!==void 0)switch(g){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(Zi(r,t))return o[t]=1,r[t];if(s!==at&&Y(s,t))return o[t]=2,s[t];if((c=e.propsOptions[0])&&Y(c,t))return o[t]=3,i[t];if(n!==at&&Y(n,t))return o[t]=4,n[t];bo&&(o[t]=0)}}const u=vr[t];let f,p;if(u)return t==="$attrs"&&zt(e,"get",t),u(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(n!==at&&Y(n,t))return o[t]=4,n[t];if(p=l.config.globalProperties,Y(p,t))return p[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return Zi(s,t)?(s[t]=n,!0):r!==at&&Y(r,t)?(r[t]=n,!0):Y(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||e!==at&&Y(e,o)||Zi(t,o)||(a=i[0])&&Y(a,o)||Y(r,o)||Y(vr,o)||Y(s.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Y(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Kl(e){return U(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let bo=!0;function og(e){const t=Sa(e),n=e.proxy,r=e.ctx;bo=!1,t.beforeCreate&&zl(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:f,mounted:p,beforeUpdate:g,updated:b,activated:C,deactivated:S,beforeDestroy:q,beforeUnmount:z,destroyed:G,unmounted:O,render:It,renderTracked:yt,renderTriggered:Je,errorCaptured:Oe,serverPrefetch:lr,expose:he,inheritAttrs:cr,components:hs,directives:fs,filters:Wi}=t;if(c&&ag(c,r,null),o)for(const dt in o){const st=o[dt];K(st)&&(r[dt]=st.bind(n))}if(s){const dt=s.call(n,n);ht(dt)&&(e.data=Ia(dt))}if(bo=!0,i)for(const dt in i){const st=i[dt],Ze=K(st)?st.bind(n,n):K(st.get)?st.get.bind(n,n):le,ds=!K(st)&&K(st.set)?st.set.bind(n):le,tn=Lg({get:Ze,set:ds});Object.defineProperty(r,dt,{enumerable:!0,configurable:!0,get:()=>tn.value,set:fe=>tn.value=fe})}if(a)for(const dt in a)Gu(a[dt],r,n,dt);if(l){const dt=K(l)?l.call(n):l;Reflect.ownKeys(dt).forEach(st=>{dg(st,dt[st])})}u&&zl(u,e,"c");function jt(dt,st){U(st)?st.forEach(Ze=>dt(Ze.bind(n))):st&&dt(st.bind(n))}if(jt(Qp,f),jt(Gp,p),jt(Xp,g),jt(Yp,b),jt(Kp,C),jt(zp,S),jt(ng,Oe),jt(eg,yt),jt(tg,Je),jt(Jp,z),jt(Wu,O),jt(Zp,lr),U(he))if(he.length){const dt=e.exposed||(e.exposed={});he.forEach(st=>{Object.defineProperty(dt,st,{get:()=>n[st],set:Ze=>n[st]=Ze})})}else e.exposed||(e.exposed={});It&&e.render===le&&(e.render=It),cr!=null&&(e.inheritAttrs=cr),hs&&(e.components=hs),fs&&(e.directives=fs)}function ag(e,t,n=le){U(e)&&(e=Vo(e));for(const r in e){const s=e[r];let i;ht(s)?"default"in s?i=Ms(s.from||r,s.default,!0):i=Ms(s.from||r):i=Ms(s),qt(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[r]=i}}function zl(e,t,n){ce(U(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Gu(e,t,n,r){const s=r.includes(".")?qu(n,r):()=>n[r];if(vt(e)){const i=t[e];K(i)&&Ji(s,i)}else if(K(e))Ji(s,e.bind(n));else if(ht(e))if(U(e))e.forEach(i=>Gu(i,t,n,r));else{const i=K(e.handler)?e.handler.bind(n):t[e.handler];K(i)&&Ji(s,i,e)}}function Sa(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,a=i.get(t);let l;return a?l=a:!s.length&&!n&&!r?l=t:(l={},s.length&&s.forEach(c=>qs(l,c,o,!0)),qs(l,t,o)),ht(t)&&i.set(t,l),l}function qs(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&qs(e,i,n,!0),s&&s.forEach(o=>qs(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const a=lg[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const lg={data:Wl,props:Ql,emits:Ql,methods:mr,computed:mr,beforeCreate:$t,created:$t,beforeMount:$t,mounted:$t,beforeUpdate:$t,updated:$t,beforeDestroy:$t,beforeUnmount:$t,destroyed:$t,unmounted:$t,activated:$t,deactivated:$t,errorCaptured:$t,serverPrefetch:$t,components:mr,directives:mr,watch:ug,provide:Wl,inject:cg};function Wl(e,t){return t?e?function(){return kt(K(e)?e.call(this,this):e,K(t)?t.call(this,this):t)}:t:e}function cg(e,t){return mr(Vo(e),Vo(t))}function Vo(e){if(U(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function $t(e,t){return e?[...new Set([].concat(e,t))]:t}function mr(e,t){return e?kt(Object.create(null),e,t):t}function Ql(e,t){return e?U(e)&&U(t)?[...new Set([...e,...t])]:kt(Object.create(null),Kl(e),Kl(t??{})):t}function ug(e,t){if(!e)return t;if(!t)return e;const n=kt(Object.create(null),e);for(const r in t)n[r]=$t(e[r],t[r]);return n}function Xu(){return{app:null,config:{isNativeTag:Od,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let hg=0;function fg(e,t){return function(r,s=null){K(r)||(r=kt({},r)),s!=null&&!ht(s)&&(s=null);const i=Xu(),o=new Set;let a=!1;const l=i.app={_uid:hg++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:jg,get config(){return i.config},set config(c){},use(c,...u){return o.has(c)||(c&&K(c.install)?(o.add(c),c.install(l,...u)):K(c)&&(o.add(c),c(l,...u))),l},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),l},component(c,u){return u?(i.components[c]=u,l):i.components[c]},directive(c,u){return u?(i.directives[c]=u,l):i.directives[c]},mount(c,u,f){if(!a){const p=At(r,s);return p.appContext=i,u&&t?t(p,c):e(p,c,f),a=!0,l._container=c,c.__vue_app__=l,yi(p.component)||p.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(c,u){return i.provides[c]=u,l},runWithContext(c){Hs=l;try{return c()}finally{Hs=null}}};return l}}let Hs=null;function dg(e,t){if(bt){let n=bt.provides;const r=bt.parent&&bt.parent.provides;r===n&&(n=bt.provides=Object.create(r)),n[e]=t}}function Ms(e,t,n=!1){const r=bt||te;if(r||Hs){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Hs._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&K(t)?t.call(r&&r.proxy):t}}function pg(e,t,n,r=!1){const s={},i={};js(i,_i,1),e.propsDefaults=Object.create(null),Yu(e,t,s,i);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);n?e.props=r?s:wp(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function gg(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=e,a=et(s),[l]=e.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let p=u[f];if(pi(e.emitsOptions,p))continue;const g=t[p];if(l)if(Y(i,p))g!==i[p]&&(i[p]=g,c=!0);else{const b=we(p);s[b]=ko(l,a,b,g,e,!1)}else g!==i[p]&&(i[p]=g,c=!0)}}}else{Yu(e,t,s,i)&&(c=!0);let u;for(const f in a)(!t||!Y(t,f)&&((u=Tn(f))===f||!Y(t,u)))&&(l?n&&(n[f]!==void 0||n[u]!==void 0)&&(s[f]=ko(l,a,f,void 0,e,!0)):delete s[f]);if(i!==a)for(const f in i)(!t||!Y(t,f))&&(delete i[f],c=!0)}c&&Ve(e,"set","$attrs")}function Yu(e,t,n,r){const[s,i]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(ks(l))continue;const c=t[l];let u;s&&Y(s,u=we(l))?!i||!i.includes(u)?n[u]=c:(a||(a={}))[u]=c:pi(e.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=et(n),c=a||at;for(let u=0;u<i.length;u++){const f=i[u];n[f]=ko(s,l,f,c[f],e,!Y(c,f))}}return o}function ko(e,t,n,r,s,i){const o=e[n];if(o!=null){const a=Y(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&K(l)){const{propsDefaults:c}=s;n in c?r=c[n]:($n(s),r=c[n]=l.call(null,t),dn())}else r=l}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Tn(n))&&(r=!0))}return r}function Ju(e,t,n=!1){const r=t.propsCache,s=r.get(e);if(s)return s;const i=e.props,o={},a=[];let l=!1;if(!K(e)){const u=f=>{l=!0;const[p,g]=Ju(f,t,!0);kt(o,p),g&&a.push(...g)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!i&&!l)return ht(e)&&r.set(e,Dn),Dn;if(U(i))for(let u=0;u<i.length;u++){const f=we(i[u]);Gl(f)&&(o[f]=at)}else if(i)for(const u in i){const f=we(u);if(Gl(f)){const p=i[u],g=o[f]=U(p)||K(p)?{type:p}:kt({},p);if(g){const b=Jl(Boolean,g.type),C=Jl(String,g.type);g[0]=b>-1,g[1]=C<0||b<C,(b>-1||Y(g,"default"))&&a.push(f)}}}const c=[o,a];return ht(e)&&r.set(e,c),c}function Gl(e){return e[0]!=="$"}function Xl(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function Yl(e,t){return Xl(e)===Xl(t)}function Jl(e,t){return U(t)?t.findIndex(n=>Yl(n,e)):K(t)&&Yl(t,e)?0:-1}const Zu=e=>e[0]==="_"||e==="$stable",ba=e=>U(e)?e.map(me):[me(e)],mg=(e,t,n)=>{if(t._n)return t;const r=Fp((...s)=>ba(t(...s)),n);return r._c=!1,r},th=(e,t,n)=>{const r=e._ctx;for(const s in e){if(Zu(s))continue;const i=e[s];if(K(i))t[s]=mg(s,i,r);else if(i!=null){const o=ba(i);t[s]=()=>o}}},eh=(e,t)=>{const n=ba(t);e.slots.default=()=>n},_g=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=et(t),js(t,"_",n)):th(t,e.slots={})}else e.slots={},t&&eh(e,t);js(e.slots,_i,1)},yg=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,o=at;if(r.shapeFlag&32){const a=t._;a?n&&a===1?i=!1:(kt(s,t),!n&&a===1&&delete s._):(i=!t.$stable,th(t,s)),o=t}else t&&(eh(e,t),o={default:1});if(i)for(const a in s)!Zu(a)&&!(a in o)&&delete s[a]};function Do(e,t,n,r,s=!1){if(U(e)){e.forEach((p,g)=>Do(p,t&&(U(t)?t[g]:t),n,r,s));return}if(xs(r)&&!s)return;const i=r.shapeFlag&4?yi(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:l}=e,c=t&&t.r,u=a.refs===at?a.refs={}:a.refs,f=a.setupState;if(c!=null&&c!==l&&(vt(c)?(u[c]=null,Y(f,c)&&(f[c]=null)):qt(c)&&(c.value=null)),K(l))je(l,a,12,[o,u]);else{const p=vt(l),g=qt(l);if(p||g){const b=()=>{if(e.f){const C=p?Y(f,l)?f[l]:u[l]:l.value;s?U(C)&&pa(C,i):U(C)?C.includes(i)||C.push(i):p?(u[l]=[i],Y(f,l)&&(f[l]=u[l])):(l.value=[i],e.k&&(u[e.k]=l.value))}else p?(u[l]=o,Y(f,l)&&(f[l]=o)):g&&(l.value=o,e.k&&(u[e.k]=o))};o?(b.id=-1,Kt(b,n)):b()}}}const Kt=qp;function Eg(e){return Tg(e)}function Tg(e,t){const n=vo();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:p,setScopeId:g=le,insertStaticContent:b}=e,C=(h,d,m,y=null,_=null,w=null,P=!1,I=null,A=!!d.dynamicChildren)=>{if(h===d)return;h&&!hr(h,d)&&(y=ps(h),fe(h,_,w,!0),h=null),d.patchFlag===-2&&(A=!1,d.dynamicChildren=null);const{type:T,ref:D,shapeFlag:V}=d;switch(T){case mi:S(h,d,m,y);break;case gn:q(h,d,m,y);break;case to:h==null&&z(d,m,y,P);break;case se:hs(h,d,m,y,_,w,P,I,A);break;default:V&1?It(h,d,m,y,_,w,P,I,A):V&6?fs(h,d,m,y,_,w,P,I,A):(V&64||V&128)&&T.process(h,d,m,y,_,w,P,I,A,An)}D!=null&&_&&Do(D,h&&h.ref,w,d||h,!d)},S=(h,d,m,y)=>{if(h==null)r(d.el=a(d.children),m,y);else{const _=d.el=h.el;d.children!==h.children&&c(_,d.children)}},q=(h,d,m,y)=>{h==null?r(d.el=l(d.children||""),m,y):d.el=h.el},z=(h,d,m,y)=>{[h.el,h.anchor]=b(h.children,d,m,y,h.el,h.anchor)},G=({el:h,anchor:d},m,y)=>{let _;for(;h&&h!==d;)_=p(h),r(h,m,y),h=_;r(d,m,y)},O=({el:h,anchor:d})=>{let m;for(;h&&h!==d;)m=p(h),s(h),h=m;s(d)},It=(h,d,m,y,_,w,P,I,A)=>{P=P||d.type==="svg",h==null?yt(d,m,y,_,w,P,I,A):lr(h,d,_,w,P,I,A)},yt=(h,d,m,y,_,w,P,I)=>{let A,T;const{type:D,props:V,shapeFlag:x,transition:B,dirs:W}=h;if(A=h.el=o(h.type,w,V&&V.is,V),x&8?u(A,h.children):x&16&&Oe(h.children,A,null,y,_,w&&D!=="foreignObject",P,I),W&&en(h,null,y,"created"),Je(A,h,h.scopeId,P,y),V){for(const rt in V)rt!=="value"&&!ks(rt)&&i(A,rt,null,V[rt],w,h.children,y,_,Ce);"value"in V&&i(A,"value",null,V.value),(T=V.onVnodeBeforeMount)&&pe(T,y,h)}W&&en(h,null,y,"beforeMount");const it=(!_||_&&!_.pendingBranch)&&B&&!B.persisted;it&&B.beforeEnter(A),r(A,d,m),((T=V&&V.onVnodeMounted)||it||W)&&Kt(()=>{T&&pe(T,y,h),it&&B.enter(A),W&&en(h,null,y,"mounted")},_)},Je=(h,d,m,y,_)=>{if(m&&g(h,m),y)for(let w=0;w<y.length;w++)g(h,y[w]);if(_){let w=_.subTree;if(d===w){const P=_.vnode;Je(h,P,P.scopeId,P.slotScopeIds,_.parent)}}},Oe=(h,d,m,y,_,w,P,I,A=0)=>{for(let T=A;T<h.length;T++){const D=h[T]=I?Le(h[T]):me(h[T]);C(null,D,d,m,y,_,w,P,I)}},lr=(h,d,m,y,_,w,P)=>{const I=d.el=h.el;let{patchFlag:A,dynamicChildren:T,dirs:D}=d;A|=h.patchFlag&16;const V=h.props||at,x=d.props||at;let B;m&&nn(m,!1),(B=x.onVnodeBeforeUpdate)&&pe(B,m,d,h),D&&en(d,h,m,"beforeUpdate"),m&&nn(m,!0);const W=_&&d.type!=="foreignObject";if(T?he(h.dynamicChildren,T,I,m,y,W,w):P||st(h,d,I,null,m,y,W,w,!1),A>0){if(A&16)cr(I,d,V,x,m,y,_);else if(A&2&&V.class!==x.class&&i(I,"class",null,x.class,_),A&4&&i(I,"style",V.style,x.style,_),A&8){const it=d.dynamicProps;for(let rt=0;rt<it.length;rt++){const gt=it[rt],ne=V[gt],Rn=x[gt];(Rn!==ne||gt==="value")&&i(I,gt,ne,Rn,_,h.children,m,y,Ce)}}A&1&&h.children!==d.children&&u(I,d.children)}else!P&&T==null&&cr(I,d,V,x,m,y,_);((B=x.onVnodeUpdated)||D)&&Kt(()=>{B&&pe(B,m,d,h),D&&en(d,h,m,"updated")},y)},he=(h,d,m,y,_,w,P)=>{for(let I=0;I<d.length;I++){const A=h[I],T=d[I],D=A.el&&(A.type===se||!hr(A,T)||A.shapeFlag&70)?f(A.el):m;C(A,T,D,null,y,_,w,P,!0)}},cr=(h,d,m,y,_,w,P)=>{if(m!==y){if(m!==at)for(const I in m)!ks(I)&&!(I in y)&&i(h,I,m[I],null,P,d.children,_,w,Ce);for(const I in y){if(ks(I))continue;const A=y[I],T=m[I];A!==T&&I!=="value"&&i(h,I,T,A,P,d.children,_,w,Ce)}"value"in y&&i(h,"value",m.value,y.value)}},hs=(h,d,m,y,_,w,P,I,A)=>{const T=d.el=h?h.el:a(""),D=d.anchor=h?h.anchor:a("");let{patchFlag:V,dynamicChildren:x,slotScopeIds:B}=d;B&&(I=I?I.concat(B):B),h==null?(r(T,m,y),r(D,m,y),Oe(d.children,m,D,_,w,P,I,A)):V>0&&V&64&&x&&h.dynamicChildren?(he(h.dynamicChildren,x,m,_,w,P,I),(d.key!=null||_&&d===_.subTree)&&nh(h,d,!0)):st(h,d,m,D,_,w,P,I,A)},fs=(h,d,m,y,_,w,P,I,A)=>{d.slotScopeIds=I,h==null?d.shapeFlag&512?_.ctx.activate(d,m,y,P,A):Wi(d,m,y,_,w,P,A):Pl(h,d,A)},Wi=(h,d,m,y,_,w,P)=>{const I=h.component=kg(h,y,_);if(Ku(h)&&(I.ctx.renderer=An),Dg(I),I.asyncDep){if(_&&_.registerDep(I,jt),!h.el){const A=I.subTree=At(gn);q(null,A,d,m)}return}jt(I,h,d,m,_,w,P)},Pl=(h,d,m)=>{const y=d.component=h.component;if(Bp(h,d,m))if(y.asyncDep&&!y.asyncResolved){dt(y,d,m);return}else y.next=d,xp(y.update),y.update();else d.el=h.el,y.vnode=d},jt=(h,d,m,y,_,w,P)=>{const I=()=>{if(h.isMounted){let{next:D,bu:V,u:x,parent:B,vnode:W}=h,it=D,rt;nn(h,!1),D?(D.el=W.el,dt(h,D,P)):D=W,V&&Ds(V),(rt=D.props&&D.props.onVnodeBeforeUpdate)&&pe(rt,B,D,W),nn(h,!0);const gt=Yi(h),ne=h.subTree;h.subTree=gt,C(ne,gt,f(ne.el),ps(ne),h,_,w),D.el=gt.el,it===null&&jp(h,gt.el),x&&Kt(x,_),(rt=D.props&&D.props.onVnodeUpdated)&&Kt(()=>pe(rt,B,D,W),_)}else{let D;const{el:V,props:x}=d,{bm:B,m:W,parent:it}=h,rt=xs(d);if(nn(h,!1),B&&Ds(B),!rt&&(D=x&&x.onVnodeBeforeMount)&&pe(D,it,d),nn(h,!0),V&&Gi){const gt=()=>{h.subTree=Yi(h),Gi(V,h.subTree,h,_,null)};rt?d.type.__asyncLoader().then(()=>!h.isUnmounted&&gt()):gt()}else{const gt=h.subTree=Yi(h);C(null,gt,m,y,h,_,w),d.el=gt.el}if(W&&Kt(W,_),!rt&&(D=x&&x.onVnodeMounted)){const gt=d;Kt(()=>pe(D,it,gt),_)}(d.shapeFlag&256||it&&xs(it.vnode)&&it.vnode.shapeFlag&256)&&h.a&&Kt(h.a,_),h.isMounted=!0,d=m=y=null}},A=h.effect=new ya(I,()=>Pa(T),h.scope),T=h.update=()=>A.run();T.id=h.uid,nn(h,!0),T()},dt=(h,d,m)=>{d.component=h;const y=h.vnode.props;h.vnode=d,h.next=null,gg(h,d.props,y,m),yg(h,d.children,m),Jn(),jl(),Zn()},st=(h,d,m,y,_,w,P,I,A=!1)=>{const T=h&&h.children,D=h?h.shapeFlag:0,V=d.children,{patchFlag:x,shapeFlag:B}=d;if(x>0){if(x&128){ds(T,V,m,y,_,w,P,I,A);return}else if(x&256){Ze(T,V,m,y,_,w,P,I,A);return}}B&8?(D&16&&Ce(T,_,w),V!==T&&u(m,V)):D&16?B&16?ds(T,V,m,y,_,w,P,I,A):Ce(T,_,w,!0):(D&8&&u(m,""),B&16&&Oe(V,m,y,_,w,P,I,A))},Ze=(h,d,m,y,_,w,P,I,A)=>{h=h||Dn,d=d||Dn;const T=h.length,D=d.length,V=Math.min(T,D);let x;for(x=0;x<V;x++){const B=d[x]=A?Le(d[x]):me(d[x]);C(h[x],B,m,null,_,w,P,I,A)}T>D?Ce(h,_,w,!0,!1,V):Oe(d,m,y,_,w,P,I,A,V)},ds=(h,d,m,y,_,w,P,I,A)=>{let T=0;const D=d.length;let V=h.length-1,x=D-1;for(;T<=V&&T<=x;){const B=h[T],W=d[T]=A?Le(d[T]):me(d[T]);if(hr(B,W))C(B,W,m,null,_,w,P,I,A);else break;T++}for(;T<=V&&T<=x;){const B=h[V],W=d[x]=A?Le(d[x]):me(d[x]);if(hr(B,W))C(B,W,m,null,_,w,P,I,A);else break;V--,x--}if(T>V){if(T<=x){const B=x+1,W=B<D?d[B].el:y;for(;T<=x;)C(null,d[T]=A?Le(d[T]):me(d[T]),m,W,_,w,P,I,A),T++}}else if(T>x)for(;T<=V;)fe(h[T],_,w,!0),T++;else{const B=T,W=T,it=new Map;for(T=W;T<=x;T++){const Wt=d[T]=A?Le(d[T]):me(d[T]);Wt.key!=null&&it.set(Wt.key,T)}let rt,gt=0;const ne=x-W+1;let Rn=!1,Vl=0;const ur=new Array(ne);for(T=0;T<ne;T++)ur[T]=0;for(T=B;T<=V;T++){const Wt=h[T];if(gt>=ne){fe(Wt,_,w,!0);continue}let de;if(Wt.key!=null)de=it.get(Wt.key);else for(rt=W;rt<=x;rt++)if(ur[rt-W]===0&&hr(Wt,d[rt])){de=rt;break}de===void 0?fe(Wt,_,w,!0):(ur[de-W]=T+1,de>=Vl?Vl=de:Rn=!0,C(Wt,d[de],m,null,_,w,P,I,A),gt++)}const kl=Rn?vg(ur):Dn;for(rt=kl.length-1,T=ne-1;T>=0;T--){const Wt=W+T,de=d[Wt],Dl=Wt+1<D?d[Wt+1].el:y;ur[T]===0?C(null,de,m,Dl,_,w,P,I,A):Rn&&(rt<0||T!==kl[rt]?tn(de,m,Dl,2):rt--)}}},tn=(h,d,m,y,_=null)=>{const{el:w,type:P,transition:I,children:A,shapeFlag:T}=h;if(T&6){tn(h.component.subTree,d,m,y);return}if(T&128){h.suspense.move(d,m,y);return}if(T&64){P.move(h,d,m,An);return}if(P===se){r(w,d,m);for(let V=0;V<A.length;V++)tn(A[V],d,m,y);r(h.anchor,d,m);return}if(P===to){G(h,d,m);return}if(y!==2&&T&1&&I)if(y===0)I.beforeEnter(w),r(w,d,m),Kt(()=>I.enter(w),_);else{const{leave:V,delayLeave:x,afterLeave:B}=I,W=()=>r(w,d,m),it=()=>{V(w,()=>{W(),B&&B()})};x?x(w,W,it):it()}else r(w,d,m)},fe=(h,d,m,y=!1,_=!1)=>{const{type:w,props:P,ref:I,children:A,dynamicChildren:T,shapeFlag:D,patchFlag:V,dirs:x}=h;if(I!=null&&Do(I,null,m,h,!0),D&256){d.ctx.deactivate(h);return}const B=D&1&&x,W=!xs(h);let it;if(W&&(it=P&&P.onVnodeBeforeUnmount)&&pe(it,d,h),D&6)Nd(h.component,m,y);else{if(D&128){h.suspense.unmount(m,y);return}B&&en(h,null,d,"beforeUnmount"),D&64?h.type.remove(h,d,m,_,An,y):T&&(w!==se||V>0&&V&64)?Ce(T,d,m,!1,!0):(w===se&&V&384||!_&&D&16)&&Ce(A,d,m),y&&Sl(h)}(W&&(it=P&&P.onVnodeUnmounted)||B)&&Kt(()=>{it&&pe(it,d,h),B&&en(h,null,d,"unmounted")},m)},Sl=h=>{const{type:d,el:m,anchor:y,transition:_}=h;if(d===se){Md(m,y);return}if(d===to){O(h);return}const w=()=>{s(m),_&&!_.persisted&&_.afterLeave&&_.afterLeave()};if(h.shapeFlag&1&&_&&!_.persisted){const{leave:P,delayLeave:I}=_,A=()=>P(m,w);I?I(h.el,w,A):A()}else w()},Md=(h,d)=>{let m;for(;h!==d;)m=p(h),s(h),h=m;s(d)},Nd=(h,d,m)=>{const{bum:y,scope:_,update:w,subTree:P,um:I}=h;y&&Ds(y),_.stop(),w&&(w.active=!1,fe(P,h,d,m)),I&&Kt(I,d),Kt(()=>{h.isUnmounted=!0},d),d&&d.pendingBranch&&!d.isUnmounted&&h.asyncDep&&!h.asyncResolved&&h.suspenseId===d.pendingId&&(d.deps--,d.deps===0&&d.resolve())},Ce=(h,d,m,y=!1,_=!1,w=0)=>{for(let P=w;P<h.length;P++)fe(h[P],d,m,y,_)},ps=h=>h.shapeFlag&6?ps(h.component.subTree):h.shapeFlag&128?h.suspense.next():p(h.anchor||h.el),bl=(h,d,m)=>{h==null?d._vnode&&fe(d._vnode,null,null,!0):C(d._vnode||null,h,d,null,null,null,m),jl(),Lu(),d._vnode=h},An={p:C,um:fe,m:tn,r:Sl,mt:Wi,mc:Oe,pc:st,pbc:he,n:ps,o:e};let Qi,Gi;return t&&([Qi,Gi]=t(An)),{render:bl,hydrate:Qi,createApp:fg(bl,Qi)}}function nn({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function nh(e,t,n=!1){const r=e.children,s=t.children;if(U(r)&&U(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Le(s[i]),a.el=o.el),n||nh(o,a)),a.type===mi&&(a.el=o.el)}}function vg(e){const t=e.slice(),n=[0];let r,s,i,o,a;const l=e.length;for(r=0;r<l;r++){const c=e[r];if(c!==0){if(s=n[n.length-1],e[s]<c){t[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,e[n[a]]<c?i=a+1:o=a;c<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=t[o];return n}const Ig=e=>e.__isTeleport,se=Symbol.for("v-fgt"),mi=Symbol.for("v-txt"),gn=Symbol.for("v-cmt"),to=Symbol.for("v-stc"),Ir=[];let oe=null;function tt(e=!1){Ir.push(oe=e?null:[])}function wg(){Ir.pop(),oe=Ir[Ir.length-1]||null}let kr=1;function Zl(e){kr+=e}function rh(e){return e.dynamicChildren=kr>0?oe||Dn:null,wg(),kr>0&&oe&&oe.push(e),e}function ot(e,t,n,r,s,i){return rh($(e,t,n,r,s,i,!0))}function xo(e,t,n,r,s){return rh(At(e,t,n,r,s,!0))}function Ag(e){return e?e.__v_isVNode===!0:!1}function hr(e,t){return e.type===t.type&&e.key===t.key}const _i="__vInternal",sh=({key:e})=>e??null,Ns=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?vt(e)||qt(e)||K(e)?{i:te,r:e,k:t,f:!!n}:e:null);function $(e,t=null,n=null,r=0,s=null,i=e===se?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&sh(t),ref:t&&Ns(t),scopeId:ju,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:te};return a?(Va(l,n),i&128&&e.normalize(l)):n&&(l.shapeFlag|=vt(n)?8:16),kr>0&&!o&&oe&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&oe.push(l),l}const At=Rg;function Rg(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===rg)&&(e=gn),Ag(e)){const a=jn(e,t,!0);return n&&Va(a,n),kr>0&&!i&&oe&&(a.shapeFlag&6?oe[oe.indexOf(e)]=a:oe.push(a)),a.patchFlag|=-2,a}if(Fg(e)&&(e=e.__vccOpts),t){t=Cg(t);let{class:a,style:l}=t;a&&!vt(a)&&(t.class=Qt(a)),ht(l)&&(xu(l)&&!U(l)&&(l=kt({},l)),t.style=Xt(l))}const o=vt(e)?1:$p(e)?128:Ig(e)?64:ht(e)?4:K(e)?2:0;return $(e,t,n,r,s,o,i,!0)}function Cg(e){return e?xu(e)||_i in e?kt({},e):e:null}function jn(e,t,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=e,a=t?Sg(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&sh(a),ref:t&&t.ref?n&&s?U(s)?s.concat(Ns(t)):[s,Ns(t)]:Ns(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==se?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&jn(e.ssContent),ssFallback:e.ssFallback&&jn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Pg(e=" ",t=0){return At(mi,null,e,t)}function Yt(e="",t=!1){return t?(tt(),xo(gn,null,e)):At(gn,null,e)}function me(e){return e==null||typeof e=="boolean"?At(gn):U(e)?At(se,null,e.slice()):typeof e=="object"?Le(e):At(mi,null,String(e))}function Le(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:jn(e)}function Va(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(U(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),Va(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!(_i in t)?t._ctx=te:s===3&&te&&(te.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else K(t)?(t={default:t,_ctx:te},n=32):(t=String(t),r&64?(n=16,t=[Pg(t)]):n=8);e.children=t,e.shapeFlag|=n}function Sg(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=Qt([t.class,r.class]));else if(s==="style")t.style=Xt([t.style,r.style]);else if(li(s)){const i=t[s],o=r[s];o&&i!==o&&!(U(i)&&i.includes(o))&&(t[s]=i?[].concat(i,o):o)}else s!==""&&(t[s]=r[s])}return t}function pe(e,t,n,r=null){ce(e,t,7,[n,r])}const bg=Xu();let Vg=0;function kg(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||bg,i={uid:Vg++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Qd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ju(r,s),emitsOptions:Bu(r,s),emit:null,emitted:null,propsDefaults:at,inheritAttrs:r.inheritAttrs,ctx:at,data:at,props:at,attrs:at,slots:at,refs:at,setupState:at,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Op.bind(null,i),e.ce&&e.ce(i),i}let bt=null,ka,Cn,tc="__VUE_INSTANCE_SETTERS__";(Cn=vo()[tc])||(Cn=vo()[tc]=[]),Cn.push(e=>bt=e),ka=e=>{Cn.length>1?Cn.forEach(t=>t(e)):Cn[0](e)};const $n=e=>{ka(e),e.scope.on()},dn=()=>{bt&&bt.scope.off(),ka(null)};function ih(e){return e.vnode.shapeFlag&4}let Dr=!1;function Dg(e,t=!1){Dr=t;const{props:n,children:r}=e.vnode,s=ih(e);pg(e,n,s,t),_g(e,r);const i=s?xg(e,t):void 0;return Dr=!1,i}function xg(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Mu(new Proxy(e.ctx,ig));const{setup:r}=n;if(r){const s=e.setupContext=r.length>1?Ng(e):null;$n(e),Jn();const i=je(r,e,0,[e.props,s]);if(Zn(),dn(),mu(i)){if(i.then(dn,dn),t)return i.then(o=>{ec(e,o,t)}).catch(o=>{di(o,e,0)});e.asyncDep=i}else ec(e,i,t)}else oh(e,t)}function ec(e,t,n){K(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ht(t)&&(e.setupState=Nu(t)),oh(e,n)}let nc;function oh(e,t,n){const r=e.type;if(!e.render){if(!t&&nc&&!r.render){const s=r.template||Sa(e).template;if(s){const{isCustomElement:i,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=r,c=kt(kt({isCustomElement:i,delimiters:a},o),l);r.render=nc(s,c)}}e.render=r.render||le}$n(e),Jn(),og(e),Zn(),dn()}function Mg(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return zt(e,"get","$attrs"),t[n]}}))}function Ng(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return Mg(e)},slots:e.slots,emit:e.emit,expose:t}}function yi(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Nu(Mu(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in vr)return vr[n](e)},has(t,n){return n in t||n in vr}}))}function Og(e,t=!0){return K(e)?e.displayName||e.name:e.name||t&&e.__name}function Fg(e){return K(e)&&"__vccOpts"in e}const Lg=(e,t)=>bp(e,t,Dr),Ug=Symbol.for("v-scx"),Bg=()=>Ms(Ug),jg="3.3.4",$g="http://www.w3.org/2000/svg",an=typeof document<"u"?document:null,rc=an&&an.createElement("template"),qg={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t?an.createElementNS($g,e):an.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>an.createTextNode(e),createComment:e=>an.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>an.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const o=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{rc.innerHTML=r?`<svg>${e}</svg>`:e;const a=rc.content;if(r){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function Hg(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function Kg(e,t,n){const r=e.style,s=vt(n);if(n&&!s){if(t&&!vt(t))for(const i in t)n[i]==null&&Mo(r,i,"");for(const i in n)Mo(r,i,n[i])}else{const i=r.display;s?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=i)}}const sc=/\s*!important$/;function Mo(e,t,n){if(U(n))n.forEach(r=>Mo(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=zg(e,t);sc.test(n)?e.setProperty(Tn(r),n.replace(sc,""),"important"):e[r]=n}}const ic=["Webkit","Moz","ms"],eo={};function zg(e,t){const n=eo[t];if(n)return n;let r=we(t);if(r!=="filter"&&r in e)return eo[t]=r;r=hi(r);for(let s=0;s<ic.length;s++){const i=ic[s]+r;if(i in e)return eo[t]=i}return t}const oc="http://www.w3.org/1999/xlink";function Wg(e,t,n,r,s){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(oc,t.slice(6,t.length)):e.setAttributeNS(oc,t,n);else{const i=Wd(t);n==null||i&&!Eu(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function Qg(e,t,n,r,s,i,o){if(t==="innerHTML"||t==="textContent"){r&&o(r,s,i),e[t]=n??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){e._value=n;const c=a==="OPTION"?e.getAttribute("value"):e.value,u=n??"";c!==u&&(e.value=u),n==null&&e.removeAttribute(t);return}let l=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=Eu(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(t)}function Sn(e,t,n,r){e.addEventListener(t,n,r)}function Gg(e,t,n,r){e.removeEventListener(t,n,r)}function Xg(e,t,n,r,s=null){const i=e._vei||(e._vei={}),o=i[t];if(r&&o)o.value=r;else{const[a,l]=Yg(t);if(r){const c=i[t]=tm(r,s);Sn(e,a,c,l)}else o&&(Gg(e,a,o,l),i[t]=void 0)}}const ac=/(?:Once|Passive|Capture)$/;function Yg(e){let t;if(ac.test(e)){t={};let r;for(;r=e.match(ac);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Tn(e.slice(2)),t]}let no=0;const Jg=Promise.resolve(),Zg=()=>no||(Jg.then(()=>no=0),no=Date.now());function tm(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;ce(em(r,n.value),t,5,[r])};return n.value=e,n.attached=Zg(),n}function em(e,t){if(U(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const lc=/^on[a-z]/,nm=(e,t,n,r,s=!1,i,o,a,l)=>{t==="class"?Hg(e,r,s):t==="style"?Kg(e,n,r):li(t)?da(t)||Xg(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):rm(e,t,r,s))?Qg(e,t,r,i,o,a,l):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Wg(e,t,r,s))};function rm(e,t,n,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&lc.test(t)&&K(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||lc.test(t)&&vt(n)?!1:t in e}const cc=e=>{const t=e.props["onUpdate:modelValue"]||!1;return U(t)?n=>Ds(t,n):t};function sm(e){e.target.composing=!0}function uc(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ah={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e._assign=cc(s);const i=r||s.props&&s.props.type==="number";Sn(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),i&&(a=To(a)),e._assign(a)}),n&&Sn(e,"change",()=>{e.value=e.value.trim()}),t||(Sn(e,"compositionstart",sm),Sn(e,"compositionend",uc),Sn(e,"change",uc))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:s}},i){if(e._assign=cc(i),e.composing||document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===t||(s||e.type==="number")&&To(e.value)===t))return;const o=t??"";e.value!==o&&(e.value=o)}},im={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},No=(e,t)=>n=>{if(!("key"in n))return;const r=Tn(n.key);if(t.some(s=>s===r||im[s]===r))return e(n)},om=kt({patchProp:nm},qg);let hc;function am(){return hc||(hc=Eg(om))}const lm=(...e)=>{const t=am().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=cm(r);if(!s)return;const i=t._component;!K(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function cm(e){return vt(e)?document.querySelector(e):e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},um=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],o=e[n++],a=e[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const i=e[n++],o=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return t.join("")},ch={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],o=s+1<e.length,a=o?e[s+1]:0,l=s+2<e.length,c=l?e[s+2]:0,u=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(p=64)),r.push(n[u],n[f],n[p],n[g])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(lh(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):um(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],a=s<e.length?n[e.charAt(s)]:0;++s;const c=s<e.length?n[e.charAt(s)]:64;++s;const f=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new hm;const p=i<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),f!==64){const b=c<<6&192|f;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class hm extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fm=function(e){const t=lh(e);return ch.encodeByteArray(t,!0)},Ks=function(e){return fm(e).replace(/\./g,"")},dm=function(e){try{return ch.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm=()=>pm().__FIREBASE_DEFAULTS__,mm=()=>{if(typeof process>"u"||typeof process.env>"u")return;const e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},_m=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&dm(e[1]);return t&&JSON.parse(t)},uh=()=>{try{return gm()||mm()||_m()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},ym=e=>{var t,n;return(n=(t=uh())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},Em=e=>{const t=ym(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},hh=()=>{var e;return(e=uh())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e),a="";return[Ks(JSON.stringify(n)),Ks(JSON.stringify(o)),a].join(".")}function Im(){try{return typeof indexedDB=="object"}catch{return!1}}function wm(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;t(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="FirebaseError";class tr extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Am,Object.setPrototypeOf(this,tr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fh.prototype.create)}}class fh{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],o=i?Rm(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new tr(s,a,r)}}function Rm(e,t){return e.replace(Cm,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const Cm=/\{\$([^}]+)}/g;function Oo(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],o=t[s];if(fc(i)&&fc(o)){if(!Oo(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function fc(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(e){return e&&e._delegate?e._delegate:e}class Mr{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new Tm;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(bm(t))try{this.getOrInitializeService({instanceIdentifier:sn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=sn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=sn){return this.instances.has(t)}getOptions(t=sn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(t,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(t),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&t(o,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Sm(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=sn){return this.component?this.component.multipleInstances?t:sn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Sm(e){return e===sn?void 0:e}function bm(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Pm(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Z||(Z={}));const km={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},Dm=Z.INFO,xm={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},Mm=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=xm[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class dh{constructor(t){this.name=t,this._logLevel=Dm,this._logHandler=Mm,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Z))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?km[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...t),this._logHandler(this,Z.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...t),this._logHandler(this,Z.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...t),this._logHandler(this,Z.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...t),this._logHandler(this,Z.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...t),this._logHandler(this,Z.ERROR,...t)}}const Nm=(e,t)=>t.some(n=>e instanceof n);let dc,pc;function Om(){return dc||(dc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Fm(){return pc||(pc=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ph=new WeakMap,Fo=new WeakMap,gh=new WeakMap,ro=new WeakMap,Da=new WeakMap;function Lm(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{n($e(e.result)),s()},o=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&ph.set(n,e)}).catch(()=>{}),Da.set(t,e),t}function Um(e){if(Fo.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});Fo.set(e,t)}let Lo={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Fo.get(e);if(t==="objectStoreNames")return e.objectStoreNames||gh.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $e(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Bm(e){Lo=e(Lo)}function jm(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(so(this),t,...n);return gh.set(r,t.sort?t.sort():[t]),$e(r)}:Fm().includes(e)?function(...t){return e.apply(so(this),t),$e(ph.get(this))}:function(...t){return $e(e.apply(so(this),t))}}function $m(e){return typeof e=="function"?jm(e):(e instanceof IDBTransaction&&Um(e),Nm(e,Om())?new Proxy(e,Lo):e)}function $e(e){if(e instanceof IDBRequest)return Lm(e);if(ro.has(e))return ro.get(e);const t=$m(e);return t!==e&&(ro.set(e,t),Da.set(t,e)),t}const so=e=>Da.get(e);function qm(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(e,t),a=$e(o);return r&&o.addEventListener("upgradeneeded",l=>{r($e(o.result),l.oldVersion,l.newVersion,$e(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Hm=["get","getKey","getAll","getAllKeys","count"],Km=["put","add","delete","clear"],io=new Map;function gc(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(io.get(t))return io.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=Km.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Hm.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return io.set(t,i),i}Bm(e=>({...e,get:(t,n,r)=>gc(t,n)||e.get(t,n,r),has:(t,n)=>!!gc(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Wm(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Wm(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Uo="@firebase/app",mc="0.9.14";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn=new dh("@firebase/app"),Qm="@firebase/app-compat",Gm="@firebase/analytics-compat",Xm="@firebase/analytics",Ym="@firebase/app-check-compat",Jm="@firebase/app-check",Zm="@firebase/auth",t_="@firebase/auth-compat",e_="@firebase/database",n_="@firebase/database-compat",r_="@firebase/functions",s_="@firebase/functions-compat",i_="@firebase/installations",o_="@firebase/installations-compat",a_="@firebase/messaging",l_="@firebase/messaging-compat",c_="@firebase/performance",u_="@firebase/performance-compat",h_="@firebase/remote-config",f_="@firebase/remote-config-compat",d_="@firebase/storage",p_="@firebase/storage-compat",g_="@firebase/firestore",m_="@firebase/firestore-compat",__="firebase",y_="10.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo="[DEFAULT]",E_={[Uo]:"fire-core",[Qm]:"fire-core-compat",[Xm]:"fire-analytics",[Gm]:"fire-analytics-compat",[Jm]:"fire-app-check",[Ym]:"fire-app-check-compat",[Zm]:"fire-auth",[t_]:"fire-auth-compat",[e_]:"fire-rtdb",[n_]:"fire-rtdb-compat",[r_]:"fire-fn",[s_]:"fire-fn-compat",[i_]:"fire-iid",[o_]:"fire-iid-compat",[a_]:"fire-fcm",[l_]:"fire-fcm-compat",[c_]:"fire-perf",[u_]:"fire-perf-compat",[h_]:"fire-rc",[f_]:"fire-rc-compat",[d_]:"fire-gcs",[p_]:"fire-gcs-compat",[g_]:"fire-fst",[m_]:"fire-fst-compat","fire-js":"fire-js",[__]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=new Map,jo=new Map;function T_(e,t){try{e.container.addComponent(t)}catch(n){mn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ws(e){const t=e.name;if(jo.has(t))return mn.debug(`There were multiple attempts to register component ${t}.`),!1;jo.set(t,e);for(const n of zs.values())T_(n,e);return!0}function v_(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},qe=new fh("app","Firebase",I_);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw qe.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_=y_;function mh(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Bo,automaticDataCollectionEnabled:!1},t),s=r.name;if(typeof s!="string"||!s)throw qe.create("bad-app-name",{appName:String(s)});if(n||(n=hh()),!n)throw qe.create("no-options");const i=zs.get(s);if(i){if(Oo(n,i.options)&&Oo(r,i.config))return i;throw qe.create("duplicate-app",{appName:s})}const o=new Vm(s);for(const l of jo.values())o.addComponent(l);const a=new w_(n,r,o);return zs.set(s,a),a}function R_(e=Bo){const t=zs.get(e);if(!t&&e===Bo&&hh())return mh();if(!t)throw qe.create("no-app",{appName:e});return t}function On(e,t,n){var r;let s=(r=E_[e])!==null&&r!==void 0?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=t.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${t}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),mn.warn(a.join(" "));return}Ws(new Mr(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="firebase-heartbeat-database",P_=1,Nr="firebase-heartbeat-store";let oo=null;function _h(){return oo||(oo=qm(C_,P_,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Nr)}}}).catch(e=>{throw qe.create("idb-open",{originalErrorMessage:e.message})})),oo}async function S_(e){try{return await(await _h()).transaction(Nr).objectStore(Nr).get(yh(e))}catch(t){if(t instanceof tr)mn.warn(t.message);else{const n=qe.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});mn.warn(n.message)}}}async function _c(e,t){try{const r=(await _h()).transaction(Nr,"readwrite");await r.objectStore(Nr).put(t,yh(e)),await r.done}catch(n){if(n instanceof tr)mn.warn(n.message);else{const r=qe.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});mn.warn(r.message)}}}function yh(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_=1024,V_=30*24*60*60*1e3;class k_{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new x_(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=yc();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=V_}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const t=yc(),{heartbeatsToSend:n,unsentEntries:r}=D_(this._heartbeatsCache.heartbeats),s=Ks(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function yc(){return new Date().toISOString().substring(0,10)}function D_(e,t=b_){const n=[];let r=e.slice();for(const s of e){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Ec(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ec(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class x_{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Im()?wm().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await S_(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return _c(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return _c(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Ec(e){return Ks(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(e){Ws(new Mr("platform-logger",t=>new zm(t),"PRIVATE")),Ws(new Mr("heartbeat",t=>new k_(t),"PRIVATE")),On(Uo,mc,e),On(Uo,mc,"esm2017"),On("fire-js","")}M_("");var N_="firebase",O_="10.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On(N_,O_,"app");var F_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},R,xa=xa||{},L=F_||self;function Ei(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function Xr(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function L_(e){return Object.prototype.hasOwnProperty.call(e,ao)&&e[ao]||(e[ao]=++U_)}var ao="closure_uid_"+(1e9*Math.random()>>>0),U_=0;function B_(e,t,n){return e.call.apply(e.bind,arguments)}function j_(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),e.apply(t,s)}}return function(){return e.apply(t,arguments)}}function Ft(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ft=B_:Ft=j_,Ft.apply(null,arguments)}function vs(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function Ct(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[s].apply(r,o)}}function Xe(){this.s=this.s,this.o=this.o}var $_=0;Xe.prototype.s=!1;Xe.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),$_!=0)&&L_(this)};Xe.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Eh=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ma(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Tc(e,t){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Ei(r)){const s=e.length||0,i=r.length||0;e.length=s+i;for(let o=0;o<i;o++)e[s+o]=r[o]}else e.push(r)}}function Lt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Lt.prototype.h=function(){this.defaultPrevented=!0};var q_=function(){if(!L.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{L.addEventListener("test",()=>{},t),L.removeEventListener("test",()=>{},t)}catch{}return e}();function Or(e){return/^[\s\xa0]*$/.test(e)}function Ti(){var e=L.navigator;return e&&(e=e.userAgent)?e:""}function ye(e){return Ti().indexOf(e)!=-1}function Na(e){return Na[" "](e),e}Na[" "]=function(){};function H_(e,t){var n=Oy;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var K_=ye("Opera"),qn=ye("Trident")||ye("MSIE"),Th=ye("Edge"),$o=Th||qn,vh=ye("Gecko")&&!(Ti().toLowerCase().indexOf("webkit")!=-1&&!ye("Edge"))&&!(ye("Trident")||ye("MSIE"))&&!ye("Edge"),z_=Ti().toLowerCase().indexOf("webkit")!=-1&&!ye("Edge");function Ih(){var e=L.document;return e?e.documentMode:void 0}var qo;t:{var lo="",co=function(){var e=Ti();if(vh)return/rv:([^\);]+)(\)|;)/.exec(e);if(Th)return/Edge\/([\d\.]+)/.exec(e);if(qn)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(z_)return/WebKit\/(\S+)/.exec(e);if(K_)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(co&&(lo=co?co[1]:""),qn){var uo=Ih();if(uo!=null&&uo>parseFloat(lo)){qo=String(uo);break t}}qo=lo}var Ho;if(L.document&&qn){var vc=Ih();Ho=vc||parseInt(qo,10)||void 0}else Ho=void 0;var W_=Ho;function Fr(e,t){if(Lt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(vh){t:{try{Na(t.nodeName);var s=!0;break t}catch{}s=!1}s||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:Q_[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Fr.$.h.call(this)}}Ct(Fr,Lt);var Q_={2:"touch",3:"pen",4:"mouse"};Fr.prototype.h=function(){Fr.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Yr="closure_listenable_"+(1e6*Math.random()|0),G_=0;function X_(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=s,this.key=++G_,this.fa=this.ia=!1}function vi(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Oa(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Y_(e,t){for(const n in e)t.call(void 0,e[n],n,e)}function wh(e){const t={};for(const n in e)t[n]=e[n];return t}const Ic="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ah(e,t){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)e[n]=r[n];for(let i=0;i<Ic.length;i++)n=Ic[i],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ii(e){this.src=e,this.g={},this.h=0}Ii.prototype.add=function(e,t,n,r,s){var i=e.toString();e=this.g[i],e||(e=this.g[i]=[],this.h++);var o=zo(e,t,r,s);return-1<o?(t=e[o],n||(t.ia=!1)):(t=new X_(t,this.src,i,!!r,s),t.ia=n,e.push(t)),t};function Ko(e,t){var n=t.type;if(n in e.g){var r=e.g[n],s=Eh(r,t),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(vi(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function zo(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.fa&&i.listener==t&&i.capture==!!n&&i.la==r)return s}return-1}var Fa="closure_lm_"+(1e6*Math.random()|0),ho={};function Rh(e,t,n,r,s){if(r&&r.once)return Ph(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)Rh(e,t[i],n,r,s);return null}return n=Ba(n),e&&e[Yr]?e.O(t,n,Xr(r)?!!r.capture:!!r,s):Ch(e,t,n,!1,r,s)}function Ch(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=Xr(s)?!!s.capture:!!s,a=Ua(e);if(a||(e[Fa]=a=new Ii(e)),n=a.add(t,n,r,o,i),n.proxy)return n;if(r=J_(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)q_||(s=o),s===void 0&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(bh(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function J_(){function e(n){return t.call(e.src,e.listener,n)}const t=Z_;return e}function Ph(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)Ph(e,t[i],n,r,s);return null}return n=Ba(n),e&&e[Yr]?e.P(t,n,Xr(r)?!!r.capture:!!r,s):Ch(e,t,n,!0,r,s)}function Sh(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)Sh(e,t[i],n,r,s);else r=Xr(r)?!!r.capture:!!r,n=Ba(n),e&&e[Yr]?(e=e.i,t=String(t).toString(),t in e.g&&(i=e.g[t],n=zo(i,n,r,s),-1<n&&(vi(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete e.g[t],e.h--)))):e&&(e=Ua(e))&&(t=e.g[t.toString()],e=-1,t&&(e=zo(t,n,r,s)),(n=-1<e?t[e]:null)&&La(n))}function La(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[Yr])Ko(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(bh(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ua(t))?(Ko(n,e),n.h==0&&(n.src=null,t[Fa]=null)):vi(e)}}}function bh(e){return e in ho?ho[e]:ho[e]="on"+e}function Z_(e,t){if(e.fa)e=!0;else{t=new Fr(t,this);var n=e.listener,r=e.la||e.src;e.ia&&La(e),e=n.call(r,t)}return e}function Ua(e){return e=e[Fa],e instanceof Ii?e:null}var fo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ba(e){return typeof e=="function"?e:(e[fo]||(e[fo]=function(t){return e.handleEvent(t)}),e[fo])}function Rt(){Xe.call(this),this.i=new Ii(this),this.S=this,this.J=null}Ct(Rt,Xe);Rt.prototype[Yr]=!0;Rt.prototype.removeEventListener=function(e,t,n,r){Sh(this,e,t,n,r)};function Vt(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,typeof t=="string")t=new Lt(t,e);else if(t instanceof Lt)t.target=t.target||e;else{var s=t;t=new Lt(r,e),Ah(t,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];s=Is(o,r,!0,t)&&s}if(o=t.g=e,s=Is(o,r,!0,t)&&s,s=Is(o,r,!1,t)&&s,n)for(i=0;i<n.length;i++)o=t.g=n[i],s=Is(o,r,!1,t)&&s}Rt.prototype.N=function(){if(Rt.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)vi(n[r]);delete e.g[t],e.h--}}this.J=null};Rt.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};Rt.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function Is(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Ko(e.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var ja=L.JSON.stringify;class ty{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function ey(){var e=$a;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class ny{constructor(){this.h=this.g=null}add(t,n){const r=Vh.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r}}var Vh=new ty(()=>new ry,e=>e.reset());class ry{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function sy(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function iy(e){L.setTimeout(()=>{throw e},0)}let Lr,Ur=!1,$a=new ny,kh=()=>{const e=L.Promise.resolve(void 0);Lr=()=>{e.then(oy)}};var oy=()=>{for(var e;e=ey();){try{e.h.call(e.g)}catch(n){iy(n)}var t=Vh;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ur=!1};function wi(e,t){Rt.call(this),this.h=e||1,this.g=t||L,this.j=Ft(this.qb,this),this.l=Date.now()}Ct(wi,Rt);R=wi.prototype;R.ga=!1;R.T=null;R.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Vt(this,"tick"),this.ga&&(qa(this),this.start()))}};R.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function qa(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}R.N=function(){wi.$.N.call(this),qa(this),delete this.g};function Ha(e,t,n){if(typeof e=="function")n&&(e=Ft(e,n));else if(e&&typeof e.handleEvent=="function")e=Ft(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:L.setTimeout(e,t||0)}function Dh(e){e.g=Ha(()=>{e.g=null,e.i&&(e.i=!1,Dh(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}class ay extends Xe{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Dh(this)}N(){super.N(),this.g&&(L.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Br(e){Xe.call(this),this.h=e,this.g={}}Ct(Br,Xe);var wc=[];function xh(e,t,n,r){Array.isArray(n)||(n&&(wc[0]=n.toString()),n=wc);for(var s=0;s<n.length;s++){var i=Rh(t,n[s],r||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function Mh(e){Oa(e.g,function(t,n){this.g.hasOwnProperty(n)&&La(t)},e),e.g={}}Br.prototype.N=function(){Br.$.N.call(this),Mh(this)};Br.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Ai(){this.g=!0}Ai.prototype.Ea=function(){this.g=!1};function ly(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var f=u.split("_");o=2<=f.length&&f[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+`
`+n+`
`+o})}function cy(e,t,n,r,s,i,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+`
`+n+`
`+i+" "+o})}function kn(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+hy(e,n)+(r?" "+r:"")})}function uy(e,t){e.info(function(){return"TIMEOUT: "+t})}Ai.prototype.info=function(){};function hy(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return ja(n)}catch{return t}}var vn={},Ac=null;function Ri(){return Ac=Ac||new Rt}vn.Ta="serverreachability";function Nh(e){Lt.call(this,vn.Ta,e)}Ct(Nh,Lt);function jr(e){const t=Ri();Vt(t,new Nh(t))}vn.STAT_EVENT="statevent";function Oh(e,t){Lt.call(this,vn.STAT_EVENT,e),this.stat=t}Ct(Oh,Lt);function Ht(e){const t=Ri();Vt(t,new Oh(t,e))}vn.Ua="timingevent";function Fh(e,t){Lt.call(this,vn.Ua,e),this.size=t}Ct(Fh,Lt);function Jr(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return L.setTimeout(function(){e()},t)}var Ci={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Lh={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ka(){}Ka.prototype.h=null;function Rc(e){return e.h||(e.h=e.i())}function Uh(){}var Zr={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function za(){Lt.call(this,"d")}Ct(za,Lt);function Wa(){Lt.call(this,"c")}Ct(Wa,Lt);var Wo;function Pi(){}Ct(Pi,Ka);Pi.prototype.g=function(){return new XMLHttpRequest};Pi.prototype.i=function(){return{}};Wo=new Pi;function ts(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Br(this),this.P=fy,e=$o?125:void 0,this.V=new wi(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Bh}function Bh(){this.i=null,this.g="",this.h=!1}var fy=45e3,Qo={},Qs={};R=ts.prototype;R.setTimeout=function(e){this.P=e};function Go(e,t,n){e.L=1,e.v=bi(ke(t)),e.s=n,e.S=!0,jh(e,null)}function jh(e,t){e.G=Date.now(),es(e),e.A=ke(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Gh(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Bh,e.g=_f(e.l,n?t:null,!e.s),0<e.O&&(e.M=new ay(Ft(e.Pa,e,e.g),e.O)),xh(e.U,e.g,"readystatechange",e.nb),t=e.I?wh(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),jr(),ly(e.j,e.u,e.A,e.m,e.W,e.s)}R.nb=function(e){e=e.target;const t=this.M;t&&Ee(e)==3?t.l():this.Pa(e)};R.Pa=function(e){try{if(e==this.g)t:{const u=Ee(this.g);var t=this.g.Ia();const f=this.g.da();if(!(3>u)&&(u!=3||$o||this.g&&(this.h.h||this.g.ja()||bc(this.g)))){this.J||u!=4||t==7||(t==8||0>=f?jr(3):jr(2)),Si(this);var n=this.g.da();this.ca=n;e:if($h(this)){var r=bc(this.g);e="";var s=r.length,i=Ee(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cn(this),wr(this);var o="";break e}this.h.i=new L.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:i&&t==s-1});r.splice(0,s),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,cy(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Or(a)){var c=a;break e}}c=null}if(n=c)kn(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xo(this,n);else{this.i=!1,this.o=3,Ht(12),cn(this),wr(this);break t}}this.S?(qh(this,u,o),$o&&this.i&&u==3&&(xh(this.U,this.V,"tick",this.mb),this.V.start())):(kn(this.j,this.m,o,null),Xo(this,o)),u==4&&cn(this),this.i&&!this.J&&(u==4?df(this.l,this):(this.i=!1,es(this)))}else xy(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Ht(12)):(this.o=0,Ht(13)),cn(this),wr(this)}}}catch{}finally{}};function $h(e){return e.g?e.u=="GET"&&e.L!=2&&e.l.Ha:!1}function qh(e,t,n){let r=!0,s;for(;!e.J&&e.C<n.length;)if(s=dy(e,n),s==Qs){t==4&&(e.o=4,Ht(14),r=!1),kn(e.j,e.m,null,"[Incomplete Response]");break}else if(s==Qo){e.o=4,Ht(15),kn(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else kn(e.j,e.m,s,null),Xo(e,s);$h(e)&&s!=Qs&&s!=Qo&&(e.h.g="",e.C=0),t!=4||n.length!=0||e.h.h||(e.o=1,Ht(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Za(t),t.M=!0,Ht(11))):(kn(e.j,e.m,n,"[Invalid Chunked Response]"),cn(e),wr(e))}R.mb=function(){if(this.g){var e=Ee(this.g),t=this.g.ja();this.C<t.length&&(Si(this),qh(this,e,t),this.i&&e!=4&&es(this))}};function dy(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?Qs:(n=Number(t.substring(n,r)),isNaN(n)?Qo:(r+=1,r+n>t.length?Qs:(t=t.slice(r,r+n),e.C=r+n,t)))}R.cancel=function(){this.J=!0,cn(this)};function es(e){e.Y=Date.now()+e.P,Hh(e,e.P)}function Hh(e,t){if(e.B!=null)throw Error("WatchDog timer not null");e.B=Jr(Ft(e.lb,e),t)}function Si(e){e.B&&(L.clearTimeout(e.B),e.B=null)}R.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(uy(this.j,this.A),this.L!=2&&(jr(),Ht(17)),cn(this),this.o=2,wr(this)):Hh(this,this.Y-e)};function wr(e){e.l.H==0||e.J||df(e.l,e)}function cn(e){Si(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,qa(e.V),Mh(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Xo(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||Yo(n.i,e))){if(!e.K&&Yo(n.i,e)&&n.H==3){try{var r=n.Ja.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){t:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)Ys(n),Di(n);else break t;Ja(n),Ht(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=Jr(Ft(n.ib,n),6e3));if(1>=Jh(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else un(n,11)}else if((e.K||n.g==e)&&Ys(n),!Or(t))for(s=n.Ja.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const f=c[4];f!=null&&(n.Ga=f,n.l.info("SVER="+n.Ga));const p=c[5];p!=null&&typeof p=="number"&&0<p&&(r=1.5*p,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const g=e.g;if(g){const b=g.g?g.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(b){var i=r.i;i.g||b.indexOf("spdy")==-1&&b.indexOf("quic")==-1&&b.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Qa(i,i.h),i.h=null))}if(r.F){const C=g.g?g.g.getResponseHeader("X-HTTP-Session-Id"):null;C&&(r.Da=C,lt(r.I,r.F,C))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=e;if(r.wa=mf(r,r.J?r.pa:null,r.Y),o.K){Zh(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(Si(a),es(a)),r.g=o}else hf(r);0<n.j.length&&xi(n)}else c[0]!="stop"&&c[0]!="close"||un(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?un(n,7):Ya(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}jr(4)}catch{}}function py(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(Ei(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function gy(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(Ei(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}function Kh(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(Ei(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=gy(e),r=py(e),s=r.length,i=0;i<s;i++)t.call(void 0,r[i],n&&n[i],e)}var zh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function my(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function pn(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof pn){this.h=e.h,Gs(this,e.j),this.s=e.s,this.g=e.g,Xs(this,e.m),this.l=e.l;var t=e.i,n=new $r;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Cc(this,n),this.o=e.o}else e&&(t=String(e).match(zh))?(this.h=!1,Gs(this,t[1]||"",!0),this.s=_r(t[2]||""),this.g=_r(t[3]||"",!0),Xs(this,t[4]),this.l=_r(t[5]||"",!0),Cc(this,t[6]||"",!0),this.o=_r(t[7]||"")):(this.h=!1,this.i=new $r(null,this.h))}pn.prototype.toString=function(){var e=[],t=this.j;t&&e.push(yr(t,Pc,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(yr(t,Pc,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(yr(n,n.charAt(0)=="/"?Ey:yy,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",yr(n,vy)),e.join("")};function ke(e){return new pn(e)}function Gs(e,t,n){e.j=n?_r(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Xs(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Cc(e,t,n){t instanceof $r?(e.i=t,Iy(e.i,e.h)):(n||(t=yr(t,Ty)),e.i=new $r(t,e.h))}function lt(e,t,n){e.i.set(t,n)}function bi(e){return lt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function _r(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function yr(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,_y),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function _y(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Pc=/[#\/\?@]/g,yy=/[#\?:]/g,Ey=/[#\?]/g,Ty=/[#\?@]/g,vy=/#/g;function $r(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ye(e){e.g||(e.g=new Map,e.h=0,e.i&&my(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}R=$r.prototype;R.add=function(e,t){Ye(this),this.i=null,e=er(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function Wh(e,t){Ye(e),t=er(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Qh(e,t){return Ye(e),t=er(e,t),e.g.has(t)}R.forEach=function(e,t){Ye(this),this.g.forEach(function(n,r){n.forEach(function(s){e.call(t,s,r,this)},this)},this)};R.ta=function(){Ye(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let i=0;i<s.length;i++)n.push(t[r])}return n};R.Z=function(e){Ye(this);let t=[];if(typeof e=="string")Qh(this,e)&&(t=t.concat(this.g.get(er(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};R.set=function(e,t){return Ye(this),this.i=null,e=er(this,e),Qh(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};R.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function Gh(e,t,n){Wh(e,t),0<n.length&&(e.i=null,e.g.set(er(e,t),Ma(n)),e.h+=n.length)}R.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),e.push(s)}}return this.i=e.join("&")};function er(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Iy(e,t){t&&!e.j&&(Ye(e),e.i=null,e.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(Wh(this,r),Gh(this,s,n))},e)),e.j=t}var wy=class{constructor(e,t){this.g=e,this.map=t}};function Xh(e){this.l=e||Ay,L.PerformanceNavigationTiming?(e=L.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(L.g&&L.g.Ka&&L.g.Ka()&&L.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ay=10;function Yh(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function Jh(e){return e.h?1:e.g?e.g.size:0}function Yo(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function Qa(e,t){e.g?e.g.add(t):e.h=t}function Zh(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}Xh.prototype.cancel=function(){if(this.i=tf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const e of this.g.values())e.cancel();this.g.clear()}};function tf(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Ma(e.i)}var Ry=class{stringify(e){return L.JSON.stringify(e,void 0)}parse(e){return L.JSON.parse(e,void 0)}};function Cy(){this.g=new Ry}function Py(e,t,n){const r=n||"";try{Kh(e,function(s,i){let o=s;Xr(s)&&(o=ja(s)),t.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function Sy(e,t){const n=new Ai;if(L.Image){const r=new Image;r.onload=vs(ws,n,r,"TestLoadImage: loaded",!0,t),r.onerror=vs(ws,n,r,"TestLoadImage: error",!1,t),r.onabort=vs(ws,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=vs(ws,n,r,"TestLoadImage: timeout",!1,t),L.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function ws(e,t,n,r,s){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,s(r)}catch{}}function ns(e){this.l=e.fc||null,this.j=e.ob||!1}Ct(ns,Ka);ns.prototype.g=function(){return new Vi(this.l,this.j)};ns.prototype.i=function(e){return function(){return e}}({});function Vi(e,t){Rt.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Ga,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ct(Vi,Rt);var Ga=0;R=Vi.prototype;R.open=function(e,t){if(this.readyState!=Ga)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,qr(this)};R.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||L).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};R.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,rs(this)),this.readyState=Ga};R.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,qr(this)),this.g&&(this.readyState=3,qr(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof L.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ef(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function ef(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}R.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?rs(this):qr(this),this.readyState==3&&ef(this)}};R.Za=function(e){this.g&&(this.response=this.responseText=e,rs(this))};R.Ya=function(e){this.g&&(this.response=e,rs(this))};R.ka=function(){this.g&&rs(this)};function rs(e){e.readyState=4,e.l=null,e.j=null,e.A=null,qr(e)}R.setRequestHeader=function(e,t){this.v.append(e,t)};R.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};R.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function qr(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(Vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var by=L.JSON.parse;function pt(e){Rt.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=nf,this.L=this.M=!1}Ct(pt,Rt);var nf="",Vy=/^https?$/i,ky=["POST","PUT"];R=pt.prototype;R.Oa=function(e){this.M=e};R.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Wo.g(),this.C=this.u?Rc(this.u):Rc(Wo),this.g.onreadystatechange=Ft(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(i){Sc(this,i);return}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=L.FormData&&e instanceof L.FormData,!(0<=Eh(ky,t))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{of(this),0<this.B&&((this.L=Dy(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ft(this.ua,this)):this.A=Ha(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(i){Sc(this,i)}};function Dy(e){return qn&&typeof e.timeout=="number"&&e.ontimeout!==void 0}R.ua=function(){typeof xa<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Vt(this,"timeout"),this.abort(8))};function Sc(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,rf(e),ki(e)}function rf(e){e.F||(e.F=!0,Vt(e,"complete"),Vt(e,"error"))}R.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Vt(this,"complete"),Vt(this,"abort"),ki(this))};R.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ki(this,!0)),pt.$.N.call(this)};R.La=function(){this.s||(this.G||this.v||this.l?sf(this):this.kb())};R.kb=function(){sf(this)};function sf(e){if(e.h&&typeof xa<"u"&&(!e.C[1]||Ee(e)!=4||e.da()!=2)){if(e.v&&Ee(e)==4)Ha(e.La,0,e);else if(Vt(e,"readystatechange"),Ee(e)==4){e.h=!1;try{const o=e.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var n;if(!(n=t)){var r;if(r=o===0){var s=String(e.I).match(zh)[1]||null;!s&&L.self&&L.self.location&&(s=L.self.location.protocol.slice(0,-1)),r=!Vy.test(s?s.toLowerCase():"")}n=r}if(n)Vt(e,"complete"),Vt(e,"success");else{e.m=6;try{var i=2<Ee(e)?e.g.statusText:""}catch{i=""}e.j=i+" ["+e.da()+"]",rf(e)}}finally{ki(e)}}}}function ki(e,t){if(e.g){of(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Vt(e,"ready");try{n.onreadystatechange=r}catch{}}}function of(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(L.clearTimeout(e.A),e.A=null)}R.isActive=function(){return!!this.g};function Ee(e){return e.g?e.g.readyState:0}R.da=function(){try{return 2<Ee(this)?this.g.status:-1}catch{return-1}};R.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};R.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),by(t)}};function bc(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case nf:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function xy(e){const t={};e=(e.g&&2<=Ee(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<e.length;r++){if(Or(e[r]))continue;var n=sy(e[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}Y_(t,function(r){return r.join(", ")})}R.Ia=function(){return this.m};R.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function af(e){let t="";return Oa(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function Xa(e,t,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=af(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):lt(e,t,n))}function fr(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function lf(e){this.Ga=0,this.j=[],this.l=new Ai,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=fr("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=fr("baseRetryDelayMs",5e3,e),this.hb=fr("retryDelaySeedMs",1e4,e),this.eb=fr("forwardChannelMaxRetries",2,e),this.xa=fr("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Xh(e&&e.concurrentRequestLimit),this.Ja=new Cy,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}R=lf.prototype;R.ra=8;R.H=1;function Ya(e){if(cf(e),e.H==3){var t=e.W++,n=ke(e.I);if(lt(n,"SID",e.K),lt(n,"RID",t),lt(n,"TYPE","terminate"),ss(e,n),t=new ts(e,e.l,t),t.L=2,t.v=bi(ke(n)),n=!1,L.navigator&&L.navigator.sendBeacon)try{n=L.navigator.sendBeacon(t.v.toString(),"")}catch{}!n&&L.Image&&(new Image().src=t.v,n=!0),n||(t.g=_f(t.l,null),t.g.ha(t.v)),t.G=Date.now(),es(t)}gf(e)}function Di(e){e.g&&(Za(e),e.g.cancel(),e.g=null)}function cf(e){Di(e),e.u&&(L.clearTimeout(e.u),e.u=null),Ys(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&L.clearTimeout(e.m),e.m=null)}function xi(e){if(!Yh(e.i)&&!e.m){e.m=!0;var t=e.Na;Lr||kh(),Ur||(Lr(),Ur=!0),$a.add(t,e),e.C=0}}function My(e,t){return Jh(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=Jr(Ft(e.Na,e,t),pf(e,e.C)),e.C++,!0)}R.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const s=new ts(this,this.l,e);let i=this.s;if(this.U&&(i?(i=wh(i),Ah(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)t:{for(var t=0,n=0;n<this.j.length;n++){e:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break e}r=void 0}if(r===void 0)break;if(t+=r,4096<t){t=n;break t}if(t===4096||n===this.j.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=uf(this,s,t),n=ke(this.I),lt(n,"RID",e),lt(n,"CVER",22),this.F&&lt(n,"X-HTTP-Session-Id",this.F),ss(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(af(i)))+"&"+t:this.o&&Xa(n,this.o,i)),Qa(this.i,s),this.bb&&lt(n,"TYPE","init"),this.P?(lt(n,"$req",t),lt(n,"SID","null"),s.aa=!0,Go(s,n,null)):Go(s,n,t),this.H=2}}else this.H==3&&(e?Vc(this,e):this.j.length==0||Yh(this.i)||Vc(this))};function Vc(e,t){var n;t?n=t.m:n=e.W++;const r=ke(e.I);lt(r,"SID",e.K),lt(r,"RID",n),lt(r,"AID",e.V),ss(e,r),e.o&&e.s&&Xa(r,e.o,e.s),n=new ts(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=uf(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Qa(e.i,n),Go(n,r,t)}function ss(e,t){e.na&&Oa(e.na,function(n,r){lt(t,r,n)}),e.h&&Kh({},function(n,r){lt(t,r,n)})}function uf(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Ft(e.h.Va,e.h,e):null;t:{var s=e.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const u=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{Py(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break t}}}return e=e.j.splice(0,n),t.F=e,r}function hf(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Lr||kh(),Ur||(Lr(),Ur=!0),$a.add(t,e),e.A=0}}function Ja(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=Jr(Ft(e.Ma,e),pf(e,e.A)),e.A++,!0)}R.Ma=function(){if(this.u=null,ff(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Jr(Ft(this.jb,this),e)}};R.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ht(10),Di(this),ff(this))};function Za(e){e.B!=null&&(L.clearTimeout(e.B),e.B=null)}function ff(e){e.g=new ts(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=ke(e.wa);lt(t,"RID","rpc"),lt(t,"SID",e.K),lt(t,"AID",e.V),lt(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&lt(t,"TO",e.qa),lt(t,"TYPE","xmlhttp"),ss(e,t),e.o&&e.s&&Xa(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=bi(ke(t)),n.s=null,n.S=!0,jh(n,e)}R.ib=function(){this.v!=null&&(this.v=null,Di(this),Ja(this),Ht(19))};function Ys(e){e.v!=null&&(L.clearTimeout(e.v),e.v=null)}function df(e,t){var n=null;if(e.g==t){Ys(e),Za(e),e.g=null;var r=2}else if(Yo(e.i,t))n=t.F,Zh(e.i,t),r=1;else return;if(e.H!=0){if(t.i)if(r==1){n=t.s?t.s.length:0,t=Date.now()-t.G;var s=e.C;r=Ri(),Vt(r,new Fh(r,n)),xi(e)}else hf(e);else if(s=t.o,s==3||s==0&&0<t.ca||!(r==1&&My(e,t)||r==2&&Ja(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),s){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}}function pf(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var r=Ft(e.pb,e);n||(n=new pn("//www.google.com/images/cleardot.gif"),L.location&&L.location.protocol=="http"||Gs(n,"https"),bi(n)),Sy(n.toString(),r)}else Ht(2);e.H=0,e.h&&e.h.za(t),gf(e),cf(e)}R.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Ht(2)):(this.l.info("Failed to ping google.com"),Ht(1))};function gf(e){if(e.H=0,e.ma=[],e.h){const t=tf(e.i);(t.length!=0||e.j.length!=0)&&(Tc(e.ma,t),Tc(e.ma,e.j),e.i.i.length=0,Ma(e.j),e.j.length=0),e.h.ya()}}function mf(e,t,n){var r=n instanceof pn?ke(n):new pn(n);if(r.g!="")t&&(r.g=t+"."+r.g),Xs(r,r.m);else{var s=L.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var i=new pn(null);r&&Gs(i,r),t&&(i.g=t),s&&Xs(i,s),n&&(i.l=n),r=i}return n=e.F,t=e.Da,n&&t&&lt(r,n,t),lt(r,"VER",e.ra),ss(e,r),r}function _f(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=n&&e.Ha&&!e.va?new pt(new ns({ob:!0})):new pt(e.va),t.Oa(e.J),t}R.isActive=function(){return!!this.h&&this.h.isActive(this)};function yf(){}R=yf.prototype;R.Ba=function(){};R.Aa=function(){};R.za=function(){};R.ya=function(){};R.isActive=function(){return!0};R.Va=function(){};function Js(){if(qn&&!(10<=Number(W_)))throw Error("Environmental error: no available transport.")}Js.prototype.g=function(e,t){return new Gt(e,t)};function Gt(e,t){Rt.call(this),this.g=new lf(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Or(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Or(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new nr(this)}Ct(Gt,Rt);Gt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Ht(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=mf(e,null,e.Y),xi(e)};Gt.prototype.close=function(){Ya(this.g)};Gt.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=ja(e),e=n);t.j.push(new wy(t.fb++,e)),t.H==3&&xi(t)};Gt.prototype.N=function(){this.g.h=null,delete this.j,Ya(this.g),delete this.g,Gt.$.N.call(this)};function Ef(e){za.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){t:{for(const n in t){e=n;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}Ct(Ef,za);function Tf(){Wa.call(this),this.status=1}Ct(Tf,Wa);function nr(e){this.g=e}Ct(nr,yf);nr.prototype.Ba=function(){Vt(this.g,"a")};nr.prototype.Aa=function(e){Vt(this.g,new Ef(e))};nr.prototype.za=function(e){Vt(this.g,new Tf)};nr.prototype.ya=function(){Vt(this.g,"b")};function Ny(){this.blockSize=-1}function ue(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Ct(ue,Ny);ue.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function po(e,t,n){n||(n=0);var r=Array(16);if(typeof t=="string")for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],o=t+(i^n&(s^i))+r[0]+3614090360&4294967295;t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[1]+3905402710&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[5]+1200080426&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[9]+2336552879&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[13]+4254626195&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(s^i&(n^s))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[6]+3225465664&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[10]+38016083&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[14]+3275163606&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[2]+4243563512&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(n^s^i)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[8]+2272392833&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[4]+1272893353&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[0]+3936430074&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[12]+3873151461&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(s^(n|~i))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[7]+1126891415&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[3]+2399980690&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[15]+4264355552&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[11]+3174756917&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}ue.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,r=this.m,s=this.h,i=0;i<t;){if(s==0)for(;i<=n;)po(this,e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(r[s++]=e.charCodeAt(i++),s==this.blockSize){po(this,r),s=0;break}}else for(;i<t;)if(r[s++]=e[i++],s==this.blockSize){po(this,r),s=0;break}}this.h=s,this.i+=t};ue.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};function nt(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=e[s]|0;r&&i==t||(n[s]=i,r=!1)}this.g=n}var Oy={};function tl(e){return-128<=e&&128>e?H_(e,function(t){return new nt([t|0],0>t?-1:0)}):new nt([e|0],0>e?-1:0)}function Te(e){if(isNaN(e)||!isFinite(e))return Fn;if(0>e)return St(Te(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Jo;return new nt(t,0)}function vf(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return St(vf(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Te(Math.pow(t,8)),r=Fn,s=0;s<e.length;s+=8){var i=Math.min(8,e.length-s),o=parseInt(e.substring(s,s+i),t);8>i?(i=Te(Math.pow(t,i)),r=r.R(i).add(Te(o))):(r=r.R(n),r=r.add(Te(o)))}return r}var Jo=4294967296,Fn=tl(0),Zo=tl(1),kc=tl(16777216);R=nt.prototype;R.ea=function(){if(Jt(this))return-St(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Jo+r)*t,t*=Jo}return e};R.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(be(this))return"0";if(Jt(this))return"-"+St(this).toString(e);for(var t=Te(Math.pow(e,6)),n=this,r="";;){var s=ti(n,t).g;n=Zs(n,s.R(t));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=s,be(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};R.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function be(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function Jt(e){return e.h==-1}R.X=function(e){return e=Zs(this,e),Jt(e)?-1:be(e)?0:1};function St(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new nt(n,~e.h).add(Zo)}R.abs=function(){return Jt(this)?St(this):this};R.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var i=r+(this.D(s)&65535)+(e.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(e.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new nt(n,n[n.length-1]&-2147483648?-1:0)};function Zs(e,t){return e.add(St(t))}R.R=function(e){if(be(this)||be(e))return Fn;if(Jt(this))return Jt(e)?St(this).R(St(e)):St(St(this).R(e));if(Jt(e))return St(this.R(St(e)));if(0>this.X(kc)&&0>e.X(kc))return Te(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=e.D(s)>>>16,l=e.D(s)&65535;n[2*r+2*s]+=o*l,As(n,2*r+2*s),n[2*r+2*s+1]+=i*l,As(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,As(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,As(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new nt(n,0)};function As(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function dr(e,t){this.g=e,this.h=t}function ti(e,t){if(be(t))throw Error("division by zero");if(be(e))return new dr(Fn,Fn);if(Jt(e))return t=ti(St(e),t),new dr(St(t.g),St(t.h));if(Jt(t))return t=ti(e,St(t)),new dr(St(t.g),t.h);if(30<e.g.length){if(Jt(e)||Jt(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Zo,r=t;0>=r.X(e);)n=Dc(n),r=Dc(r);var s=Pn(n,1),i=Pn(r,1);for(r=Pn(r,2),n=Pn(n,2);!be(r);){var o=i.add(r);0>=o.X(e)&&(s=s.add(n),i=o),r=Pn(r,1),n=Pn(n,1)}return t=Zs(e,s.R(t)),new dr(s,t)}for(s=Fn;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=Te(n),o=i.R(t);Jt(o)||0<o.X(e);)n-=r,i=Te(n),o=i.R(t);be(i)&&(i=Zo),s=s.add(i),e=Zs(e,o)}return new dr(s,e)}R.gb=function(e){return ti(this,e).h};R.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new nt(n,this.h&e.h)};R.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new nt(n,this.h|e.h)};R.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new nt(n,this.h^e.h)};function Dc(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new nt(n,e.h)}function Pn(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],i=0;i<r;i++)s[i]=0<t?e.D(i+n)>>>t|e.D(i+n+1)<<32-t:e.D(i+n);return new nt(s,e.h)}Js.prototype.createWebChannel=Js.prototype.g;Gt.prototype.send=Gt.prototype.u;Gt.prototype.open=Gt.prototype.m;Gt.prototype.close=Gt.prototype.close;Ci.NO_ERROR=0;Ci.TIMEOUT=8;Ci.HTTP_ERROR=6;Lh.COMPLETE="complete";Uh.EventType=Zr;Zr.OPEN="a";Zr.CLOSE="b";Zr.ERROR="c";Zr.MESSAGE="d";Rt.prototype.listen=Rt.prototype.O;pt.prototype.listenOnce=pt.prototype.P;pt.prototype.getLastError=pt.prototype.Sa;pt.prototype.getLastErrorCode=pt.prototype.Ia;pt.prototype.getStatus=pt.prototype.da;pt.prototype.getResponseJson=pt.prototype.Wa;pt.prototype.getResponseText=pt.prototype.ja;pt.prototype.send=pt.prototype.ha;pt.prototype.setWithCredentials=pt.prototype.Oa;ue.prototype.digest=ue.prototype.l;ue.prototype.reset=ue.prototype.reset;ue.prototype.update=ue.prototype.j;nt.prototype.add=nt.prototype.add;nt.prototype.multiply=nt.prototype.R;nt.prototype.modulo=nt.prototype.gb;nt.prototype.compare=nt.prototype.X;nt.prototype.toNumber=nt.prototype.ea;nt.prototype.toString=nt.prototype.toString;nt.prototype.getBits=nt.prototype.D;nt.fromNumber=Te;nt.fromString=vf;var Fy=function(){return new Js},Ly=function(){return Ri()},go=Ci,Uy=Lh,By=vn,xc={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},jy=ns,Rs=Uh,$y=pt,qy=ue,Ln=nt;const Mc="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}xt.UNAUTHENTICATED=new xt(null),xt.GOOGLE_CREDENTIALS=new xt("google-credentials-uid"),xt.FIRST_PARTY=new xt("first-party-uid"),xt.MOCK_USER=new xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rr="10.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n=new dh("@firebase/firestore");function Nc(){return _n.logLevel}function k(e,...t){if(_n.logLevel<=Z.DEBUG){const n=t.map(el);_n.debug(`Firestore (${rr}): ${e}`,...n)}}function De(e,...t){if(_n.logLevel<=Z.ERROR){const n=t.map(el);_n.error(`Firestore (${rr}): ${e}`,...n)}}function Hn(e,...t){if(_n.logLevel<=Z.WARN){const n=t.map(el);_n.warn(`Firestore (${rr}): ${e}`,...n)}}function el(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F(e="Unexpected state"){const t=`FIRESTORE (${rr}) INTERNAL ASSERTION FAILED: `+e;throw De(t),new Error(t)}function ct(e,t){e||F()}function H(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class M extends tr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Hy{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(xt.UNAUTHENTICATED))}shutdown(){}}class Ky{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class zy{constructor(t){this.t=t,this.currentUser=xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new He;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new He,t.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;t.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new He)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct(typeof r.accessToken=="string"),new If(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ct(t===null||typeof t=="string"),new xt(t)}}class Wy{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=xt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Qy{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new Wy(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Gy{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Xy{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=i=>{i.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,k("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>r(i))};const s=i=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ct(typeof n.token=="string"),this.R=n.token,new Gy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{static V(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const s=Yy(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%t.length))}return r}}function J(e,t){return e<t?-1:e>t?1:0}function Kn(e,t,n){return e.length===t.length&&e.every((r,s)=>n(r,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new M(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new M(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new M(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new M(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Tt.fromMillis(Date.now())}static fromDate(t){return Tt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Tt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?J(this.nanoseconds,t.nanoseconds):J(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(t){this.timestamp=t}static fromTimestamp(t){return new j(t)}static min(){return new j(new Tt(0,0))}static max(){return new j(new Tt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(t,n,r){n===void 0?n=0:n>t.length&&F(),r===void 0?r=t.length-n:r>t.length-n&&F(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Hr.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Hr?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=t.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class ut extends Hr{construct(t,n,r){return new ut(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new M(E.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ut(n)}static emptyPath(){return new ut([])}}const Jy=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ot extends Hr{construct(t,n,r){return new Ot(t,n,r)}static isValidIdentifier(t){return Jy.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ot.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ot(["__name__"])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new M(E.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<t.length;){const a=t[s];if(a==="\\"){if(s+1===t.length)throw new M(E.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new M(E.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new M(E.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ot(n)}static emptyPath(){return new Ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N{constructor(t){this.path=t}static fromPath(t){return new N(ut.fromString(t))}static fromName(t){return new N(ut.fromString(t).popFirst(5))}static empty(){return new N(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ut.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ut.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new N(new ut(t.slice()))}}function Zy(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=j.fromTimestamp(r===1e9?new Tt(n+1,0):new Tt(n,r));return new We(s,N.empty(),t)}function tE(e){return new We(e.readTime,e.key,-1)}class We{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new We(j.min(),N.empty(),-1)}static max(){return new We(j.max(),N.empty(),-1)}}function eE(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=N.comparator(e.documentKey,t.documentKey),n!==0?n:J(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function is(e){if(e.code!==E.FAILED_PRECONDITION||e.message!==nE)throw e;k("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&F(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new v((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof v?n:v.resolve(n)}catch(n){return v.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):v.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):v.reject(n)}static resolve(t){return new v((n,r)=>{n(t)})}static reject(t){return new v((n,r)=>{r(t)})}static waitFor(t){return new v((n,r)=>{let s=0,i=0,o=!1;t.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(t){let n=v.resolve(!1);for(const r of t)n=n.next(s=>s?v.resolve(s):r());return n}static forEach(t,n){const r=[];return t.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(t,n){return new v((r,s)=>{const i=t.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(t[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(t,n){return new v((r,s)=>{const i=()=>{t()===!0?n().next(()=>{i()},s):r()};i()})}}function os(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}nl.ae=-1;function Mi(e){return e==null}function ei(e){return e===0&&1/e==-1/0}function sE(e){return typeof e=="number"&&Number.isInteger(e)&&!ei(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function sr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Af(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(t,n){this.comparator=t,this.root=n||Pt.EMPTY}insert(t,n){return new ft(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Pt.BLACK,null,null))}remove(t){return new ft(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Pt.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Cs(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Cs(this.root,t,this.comparator,!1)}getReverseIterator(){return new Cs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Cs(this.root,t,this.comparator,!0)}}class Cs{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Pt{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??Pt.RED,this.left=s??Pt.EMPTY,this.right=i??Pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new Pt(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Pt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return Pt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw F();const t=this.left.check();if(t!==this.right.check())throw F();return t+(this.isRed()?0:1)}}Pt.EMPTY=null,Pt.RED=!0,Pt.BLACK=!1;Pt.EMPTY=new class{constructor(){this.size=0}get key(){throw F()}get value(){throw F()}get color(){throw F()}get left(){throw F()}get right(){throw F()}copy(t,n,r,s,i){return this}insert(t,n,r){return new Pt(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(t){this.comparator=t,this.data=new ft(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Fc(this.data.getIterator())}getIteratorFrom(t){return new Fc(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Ut)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Ut(this.comparator);return n.data=t,n}}class Fc{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(t){this.fields=t,t.sort(Ot.comparator)}static empty(){return new ae([])}unionWith(t){let n=new Ut(Ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new ae(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Kn(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Rf("Invalid base64 string: "+i):i}}(t);return new Bt(n)}static fromUint8Array(t){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(t);return new Bt(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return J(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Bt.EMPTY_BYTE_STRING=new Bt("");const iE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qe(e){if(ct(!!e),typeof e=="string"){let t=0;const n=iE.exec(e);if(ct(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:_t(e.seconds),nanos:_t(e.nanos)}}function _t(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function yn(e){return typeof e=="string"?Bt.fromBase64String(e):Bt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function sl(e){const t=e.mapValue.fields.__previous_value__;return rl(t)?sl(t):t}function Kr(e){const t=Qe(e.mapValue.fields.__local_write_time__.timestampValue);return new Tt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(t,n,r,s,i,o,a,l,c){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class zr{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new zr("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof zr&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function En(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?rl(e)?4:aE(e)?9007199254740991:10:F()}function Ae(e,t){if(e===t)return!0;const n=En(e);if(n!==En(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Kr(e).isEqual(Kr(t));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Qe(s.timestampValue),a=Qe(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,i){return yn(s.bytesValue).isEqual(yn(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,i){return _t(s.geoPointValue.latitude)===_t(i.geoPointValue.latitude)&&_t(s.geoPointValue.longitude)===_t(i.geoPointValue.longitude)}(e,t);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return _t(s.integerValue)===_t(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=_t(s.doubleValue),a=_t(i.doubleValue);return o===a?ei(o)===ei(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return Kn(e.arrayValue.values||[],t.arrayValue.values||[],Ae);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Oc(o)!==Oc(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ae(o[l],a[l])))return!1;return!0}(e,t);default:return F()}}function Wr(e,t){return(e.values||[]).find(n=>Ae(n,t))!==void 0}function zn(e,t){if(e===t)return 0;const n=En(e),r=En(t);if(n!==r)return J(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return J(e.booleanValue,t.booleanValue);case 2:return function(i,o){const a=_t(i.integerValue||i.doubleValue),l=_t(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return Lc(e.timestampValue,t.timestampValue);case 4:return Lc(Kr(e),Kr(t));case 5:return J(e.stringValue,t.stringValue);case 6:return function(i,o){const a=yn(i),l=yn(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=J(a[c],l[c]);if(u!==0)return u}return J(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,o){const a=J(_t(i.latitude),_t(o.latitude));return a!==0?a:J(_t(i.longitude),_t(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=zn(a[c],l[c]);if(u)return u}return J(a.length,l.length)}(e.arrayValue,t.arrayValue);case 10:return function(i,o){if(i===Ps.mapValue&&o===Ps.mapValue)return 0;if(i===Ps.mapValue)return 1;if(o===Ps.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const p=J(l[f],u[f]);if(p!==0)return p;const g=zn(a[l[f]],c[u[f]]);if(g!==0)return g}return J(l.length,u.length)}(e.mapValue,t.mapValue);default:throw F()}}function Lc(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return J(e,t);const n=Qe(e),r=Qe(t),s=J(n.seconds,r.seconds);return s!==0?s:J(n.nanos,r.nanos)}function Wn(e){return ta(e)}function ta(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Qe(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return yn(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return N.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ta(i);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${ta(n.fields[o])}`;return s+"}"}(e.mapValue):F()}function ea(e){return!!e&&"integerValue"in e}function il(e){return!!e&&"arrayValue"in e}function Uc(e){return!!e&&"nullValue"in e}function Bc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Os(e){return!!e&&"mapValue"in e}function Ar(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return sr(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Ar(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ar(e.arrayValue.values[n]);return t}return Object.assign({},e)}function aE(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(t){this.value=t}static empty(){return new Zt({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Os(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ar(n)}setAll(t){let n=Ot.emptyPath(),r={},s=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Ar(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());Os(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ae(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];Os(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){sr(n,(s,i)=>t[s]=i);for(const s of r)delete t[s]}clone(){return new Zt(Ar(this.value))}}function Cf(e){const t=[];return sr(e.fields,(n,r)=>{const s=new Ot([n]);if(Os(r)){const i=Cf(r.mapValue).fields;if(i.length===0)t.push(s);else for(const o of i)t.push(s.child(o))}else t.push(s)}),new ae(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(t,n,r,s,i,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Mt(t,0,j.min(),j.min(),j.min(),Zt.empty(),0)}static newFoundDocument(t,n,r,s){return new Mt(t,1,n,j.min(),r,s,0)}static newNoDocument(t,n){return new Mt(t,2,n,j.min(),j.min(),Zt.empty(),0)}static newUnknownDocument(t,n){return new Mt(t,3,n,j.min(),j.min(),Zt.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(j.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=j.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Mt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(t,n){this.position=t,this.inclusive=n}}function jc(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],o=e.position[s];if(i.field.isKeyField()?r=N.comparator(N.fromName(o.referenceValue),n.key):r=zn(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function $c(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ae(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(t,n="asc"){this.field=t,this.dir=n}}function lE(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{}class Et extends Pf{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new uE(t,n,r):n==="array-contains"?new dE(t,r):n==="in"?new pE(t,r):n==="not-in"?new gE(t,r):n==="array-contains-any"?new mE(t,r):new Et(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new hE(t,r):new fE(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(zn(n,this.value)):n!==null&&En(this.value)===En(n)&&this.matchesComparison(zn(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return F()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Re extends Pf{constructor(t,n){super(),this.filters=t,this.op=n,this.ce=null}static create(t,n){return new Re(t,n)}matches(t){return Sf(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const t=this.le(n=>n.isInequality());return t!==null?t.field:null}le(t){for(const n of this.getFlattenedFilters())if(t(n))return n;return null}}function Sf(e){return e.op==="and"}function bf(e){return cE(e)&&Sf(e)}function cE(e){for(const t of e.filters)if(t instanceof Re)return!1;return!0}function na(e){if(e instanceof Et)return e.field.canonicalString()+e.op.toString()+Wn(e.value);if(bf(e))return e.filters.map(t=>na(t)).join(",");{const t=e.filters.map(n=>na(n)).join(",");return`${e.op}(${t})`}}function Vf(e,t){return e instanceof Et?function(r,s){return s instanceof Et&&r.op===s.op&&r.field.isEqual(s.field)&&Ae(r.value,s.value)}(e,t):e instanceof Re?function(r,s){return s instanceof Re&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&Vf(o,s.filters[a]),!0):!1}(e,t):void F()}function kf(e){return e instanceof Et?function(n){return`${n.field.canonicalString()} ${n.op} ${Wn(n.value)}`}(e):e instanceof Re?function(n){return n.op.toString()+" {"+n.getFilters().map(kf).join(" ,")+"}"}(e):"Filter"}class uE extends Et{constructor(t,n,r){super(t,n,r),this.key=N.fromName(r.referenceValue)}matches(t){const n=N.comparator(t.key,this.key);return this.matchesComparison(n)}}class hE extends Et{constructor(t,n){super(t,"in",n),this.keys=Df("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class fE extends Et{constructor(t,n){super(t,"not-in",n),this.keys=Df("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Df(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>N.fromName(r.referenceValue))}class dE extends Et{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return il(n)&&Wr(n.arrayValue,this.value)}}class pE extends Et{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Wr(this.value.arrayValue,n)}}class gE extends Et{constructor(t,n){super(t,"not-in",n)}matches(t){if(Wr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!Wr(this.value.arrayValue,n)}}class mE extends Et{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!il(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Wr(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(t,n=null,r=[],s=[],i=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.he=null}}function qc(e,t=null,n=[],r=[],s=null,i=null,o=null){return new _E(e,t,n,r,s,i,o)}function ol(e){const t=H(e);if(t.he===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>na(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Mi(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Wn(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Wn(r)).join(",")),t.he=n}return t.he}function al(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!lE(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Vf(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!$c(e.startAt,t.startAt)&&$c(e.endAt,t.endAt)}function ra(e){return N.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(t,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Pe=null,this.Ie=null,this.startAt,this.endAt}}function yE(e,t,n,r,s,i,o,a){return new Ni(e,t,n,r,s,i,o,a)}function xf(e){return new Ni(e)}function Hc(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function EE(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function TE(e){for(const t of e.filters){const n=t.getFirstInequalityField();if(n!==null)return n}return null}function vE(e){return e.collectionGroup!==null}function Un(e){const t=H(e);if(t.Pe===null){t.Pe=[];const n=TE(t),r=EE(t);if(n!==null&&r===null)n.isKeyField()||t.Pe.push(new Rr(n)),t.Pe.push(new Rr(Ot.keyField(),"asc"));else{let s=!1;for(const i of t.explicitOrderBy)t.Pe.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.Pe.push(new Rr(Ot.keyField(),i))}}}return t.Pe}function xe(e){const t=H(e);if(!t.Ie)if(t.limitType==="F")t.Ie=qc(t.path,t.collectionGroup,Un(t),t.filters,t.limit,t.startAt,t.endAt);else{const n=[];for(const i of Un(t)){const o=i.dir==="desc"?"asc":"desc";n.push(new Rr(i.field,o))}const r=t.endAt?new ni(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new ni(t.startAt.position,t.startAt.inclusive):null;t.Ie=qc(t.path,t.collectionGroup,n,t.filters,t.limit,r,s)}return t.Ie}function sa(e,t,n){return new Ni(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Oi(e,t){return al(xe(e),xe(t))&&e.limitType===t.limitType}function Mf(e){return`${ol(xe(e))}|lt:${e.limitType}`}function ia(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>kf(s)).join(", ")}]`),Mi(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Wn(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Wn(s)).join(",")),`Target(${r})`}(xe(e))}; limitType=${e.limitType})`}function Fi(e,t){return t.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):N.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(e,t)&&function(r,s){for(const i of Un(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(e,t)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(e,t)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=jc(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Un(r),s)||r.endAt&&!function(o,a,l){const c=jc(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Un(r),s))}(e,t)}function IE(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Nf(e){return(t,n)=>{let r=!1;for(const s of Un(e)){const i=wE(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function wE(e,t,n){const r=e.field.isKeyField()?N.comparator(t.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?zn(l,c):F()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return F()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){sr(this.inner,(n,r)=>{for(const[s,i]of r)t(s,i)})}isEmpty(){return Af(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=new ft(N.comparator);function Me(){return AE}const Of=new ft(N.comparator);function Er(...e){let t=Of;for(const n of e)t=t.insert(n.key,n);return t}function Ff(e){let t=Of;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function hn(){return Cr()}function Lf(){return Cr()}function Cr(){return new ir(e=>e.toString(),(e,t)=>e.isEqual(t))}const RE=new ft(N.comparator),CE=new Ut(N.comparator);function Q(...e){let t=CE;for(const n of e)t=t.add(n);return t}const PE=new Ut(J);function SE(){return PE}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ei(t)?"-0":t}}function Bf(e){return{integerValue:""+e}}function bE(e,t){return sE(t)?Bf(t):Uf(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(){this._=void 0}}function VE(e,t,n){return e instanceof ri?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&rl(i)&&(i=sl(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,t):e instanceof Qr?$f(e,t):e instanceof Gr?qf(e,t):function(s,i){const o=jf(s,i),a=Kc(o)+Kc(s.Te);return ea(o)&&ea(s.Te)?Bf(a):Uf(s.serializer,a)}(e,t)}function kE(e,t,n){return e instanceof Qr?$f(e,t):e instanceof Gr?qf(e,t):n}function jf(e,t){return e instanceof si?function(r){return ea(r)||function(i){return!!i&&"doubleValue"in i}(r)}(t)?t:{integerValue:0}:null}class ri extends Li{}class Qr extends Li{constructor(t){super(),this.elements=t}}function $f(e,t){const n=Hf(t);for(const r of e.elements)n.some(s=>Ae(s,r))||n.push(r);return{arrayValue:{values:n}}}class Gr extends Li{constructor(t){super(),this.elements=t}}function qf(e,t){let n=Hf(t);for(const r of e.elements)n=n.filter(s=>!Ae(s,r));return{arrayValue:{values:n}}}class si extends Li{constructor(t,n){super(),this.serializer=t,this.Te=n}}function Kc(e){return _t(e.integerValue||e.doubleValue)}function Hf(e){return il(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function DE(e,t){return e.field.isEqual(t.field)&&function(r,s){return r instanceof Qr&&s instanceof Qr||r instanceof Gr&&s instanceof Gr?Kn(r.elements,s.elements,Ae):r instanceof si&&s instanceof si?Ae(r.Te,s.Te):r instanceof ri&&s instanceof ri}(e.transform,t.transform)}class xE{constructor(t,n){this.version=t,this.transformResults=n}}class ve{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new ve}static exists(t){return new ve(void 0,t)}static updateTime(t){return new ve(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Fs(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Ui{}function Kf(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new ll(e.key,ve.none()):new as(e.key,e.data,ve.none());{const n=e.data,r=Zt.empty();let s=new Ut(Ot.comparator);for(let i of t.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new In(e.key,r,new ae(s.toArray()),ve.none())}}function ME(e,t,n){e instanceof as?function(s,i,o){const a=s.value.clone(),l=Wc(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof In?function(s,i,o){if(!Fs(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Wc(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(zf(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function Pr(e,t,n,r){return e instanceof as?function(i,o,a,l){if(!Fs(i.precondition,o))return a;const c=i.value.clone(),u=Qc(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(e,t,n,r):e instanceof In?function(i,o,a,l){if(!Fs(i.precondition,o))return a;const c=Qc(i.fieldTransforms,l,o),u=o.data;return u.setAll(zf(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(i,o,a){return Fs(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function NE(e,t){let n=null;for(const r of e.fieldTransforms){const s=t.data.field(r.field),i=jf(r.transform,s||null);i!=null&&(n===null&&(n=Zt.empty()),n.set(r.field,i))}return n||null}function zc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Kn(r,s,(i,o)=>DE(i,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class as extends Ui{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class In extends Ui{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function zf(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Wc(e,t,n){const r=new Map;ct(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],o=i.transform,a=t.data.field(i.field);r.set(i.field,kE(o,a,n[s]))}return r}function Qc(e,t,n){const r=new Map;for(const s of e){const i=s.transform,o=n.data.field(s.field);r.set(s.field,VE(i,o,t))}return r}class ll extends Ui{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OE extends Ui{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&ME(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Pr(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Pr(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Lf();return this.mutations.forEach(s=>{const i=t.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=Kf(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(j.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Q())}isEqual(t){return this.batchId===t.batchId&&Kn(this.mutations,t.mutations,(n,r)=>zc(n,r))&&Kn(this.baseMutations,t.baseMutations,(n,r)=>zc(n,r))}}class cl{constructor(t,n,r,s){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(t,n,r){ct(t.mutations.length===r.length);let s=function(){return RE}();const i=t.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new cl(t,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,X;function BE(e){switch(e){default:return F();case E.CANCELLED:case E.UNKNOWN:case E.DEADLINE_EXCEEDED:case E.RESOURCE_EXHAUSTED:case E.INTERNAL:case E.UNAVAILABLE:case E.UNAUTHENTICATED:return!1;case E.INVALID_ARGUMENT:case E.NOT_FOUND:case E.ALREADY_EXISTS:case E.PERMISSION_DENIED:case E.FAILED_PRECONDITION:case E.ABORTED:case E.OUT_OF_RANGE:case E.UNIMPLEMENTED:case E.DATA_LOSS:return!0}}function Wf(e){if(e===void 0)return De("GRPC error has no .code"),E.UNKNOWN;switch(e){case mt.OK:return E.OK;case mt.CANCELLED:return E.CANCELLED;case mt.UNKNOWN:return E.UNKNOWN;case mt.DEADLINE_EXCEEDED:return E.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return E.RESOURCE_EXHAUSTED;case mt.INTERNAL:return E.INTERNAL;case mt.UNAVAILABLE:return E.UNAVAILABLE;case mt.UNAUTHENTICATED:return E.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return E.INVALID_ARGUMENT;case mt.NOT_FOUND:return E.NOT_FOUND;case mt.ALREADY_EXISTS:return E.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return E.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return E.FAILED_PRECONDITION;case mt.ABORTED:return E.ABORTED;case mt.OUT_OF_RANGE:return E.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return E.UNIMPLEMENTED;case mt.DATA_LOSS:return E.DATA_LOSS;default:return F()}}(X=mt||(mt={}))[X.OK=0]="OK",X[X.CANCELLED=1]="CANCELLED",X[X.UNKNOWN=2]="UNKNOWN",X[X.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",X[X.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",X[X.NOT_FOUND=5]="NOT_FOUND",X[X.ALREADY_EXISTS=6]="ALREADY_EXISTS",X[X.PERMISSION_DENIED=7]="PERMISSION_DENIED",X[X.UNAUTHENTICATED=16]="UNAUTHENTICATED",X[X.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",X[X.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",X[X.ABORTED=10]="ABORTED",X[X.OUT_OF_RANGE=11]="OUT_OF_RANGE",X[X.UNIMPLEMENTED=12]="UNIMPLEMENTED",X[X.INTERNAL=13]="INTERNAL",X[X.UNAVAILABLE=14]="UNAVAILABLE",X[X.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Ss}static getOrCreateInstance(){return Ss===null&&(Ss=new ul),Ss}onExistenceFilterMismatch(t){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,t),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(t){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(t))}}let Ss=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E=new Ln([4294967295,4294967295],0);function Gc(e){const t=jE().encode(e),n=new qy;return n.update(t),new Uint8Array(n.digest())}function Xc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Ln([n,r],0),new Ln([s,i],0)]}class hl{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Tr(`Invalid padding: ${n}`);if(r<0)throw new Tr(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Tr(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Tr(`Invalid padding when bitmap length is 0: ${n}`);this.de=8*t.length-n,this.Ae=Ln.fromNumber(this.de)}Re(t,n,r){let s=t.add(n.multiply(Ln.fromNumber(r)));return s.compare($E)===1&&(s=new Ln([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ae).toNumber()}Ve(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.de===0)return!1;const n=Gc(t),[r,s]=Xc(n);for(let i=0;i<this.hashCount;i++){const o=this.Re(r,s,i);if(!this.Ve(o))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),o=new hl(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.de===0)return;const n=Gc(t),[r,s]=Xc(n);for(let i=0;i<this.hashCount;i++){const o=this.Re(r,s,i);this.me(o)}}me(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Tr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,ls.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Bi(j.min(),s,new ft(J),Me(),Q())}}class ls{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new ls(r,n,Q(),Q(),Q())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(t,n,r,s){this.fe=t,this.removedTargetIds=n,this.key=r,this.ge=s}}class Qf{constructor(t,n){this.targetId=t,this.pe=n}}class Gf{constructor(t,n,r=Bt.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Yc{constructor(){this.ye=0,this.we=Zc(),this.Se=Bt.EMPTY_BYTE_STRING,this.be=!1,this.De=!0}get current(){return this.be}get resumeToken(){return this.Se}get ve(){return this.ye!==0}get Ce(){return this.De}Fe(t){t.approximateByteSize()>0&&(this.De=!0,this.Se=t)}Me(){let t=Q(),n=Q(),r=Q();return this.we.forEach((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:F()}}),new ls(this.Se,this.be,t,n,r)}xe(){this.De=!1,this.we=Zc()}Oe(t,n){this.De=!0,this.we=this.we.insert(t,n)}Ne(t){this.De=!0,this.we=this.we.remove(t)}Be(){this.ye+=1}Le(){this.ye-=1}ke(){this.De=!0,this.be=!0}}class qE{constructor(t){this.qe=t,this.Qe=new Map,this.Ke=Me(),this.$e=Jc(),this.Ue=new ft(J)}We(t){for(const n of t.fe)t.ge&&t.ge.isFoundDocument()?this.Ge(n,t.ge):this.ze(n,t.key,t.ge);for(const n of t.removedTargetIds)this.ze(n,t.key,t.ge)}je(t){this.forEachTarget(t,n=>{const r=this.He(n);switch(t.state){case 0:this.Je(n)&&r.Fe(t.resumeToken);break;case 1:r.Le(),r.ve||r.xe(),r.Fe(t.resumeToken);break;case 2:r.Le(),r.ve||this.removeTarget(n);break;case 3:this.Je(n)&&(r.ke(),r.Fe(t.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),r.Fe(t.resumeToken));break;default:F()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Qe.forEach((r,s)=>{this.Je(s)&&n(s)})}Ze(t){var n,r;const s=t.targetId,i=t.pe.count,o=this.Xe(s);if(o){const a=o.target;if(ra(a))if(i===0){const l=new N(a.path);this.ze(s,l,Mt.newNoDocument(l,j.min()))}else ct(i===1);else{const l=this.et(s);if(l!==i){const c=this.tt(t,l);if(c.status!==0){this.Ye(s);const u=c.status===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(s,u)}(n=ul.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(f,p,g,b){var C,S,q,z,G,O;const It={localCacheCount:g,existenceFilterCount:b.count},yt=b.unchangedNames;return yt&&(It.bloomFilter={applied:f===0,hashCount:(C=yt==null?void 0:yt.hashCount)!==null&&C!==void 0?C:0,bitmapLength:(z=(q=(S=yt==null?void 0:yt.bits)===null||S===void 0?void 0:S.bitmap)===null||q===void 0?void 0:q.length)!==null&&z!==void 0?z:0,padding:(O=(G=yt==null?void 0:yt.bits)===null||G===void 0?void 0:G.padding)!==null&&O!==void 0?O:0},p&&(It.bloomFilter.mightContain=p)),It}(c.status,(r=c.nt)!==null&&r!==void 0?r:null,l,t.pe))}}}}tt(t,n){const{unchangedNames:r,count:s}=t.pe;if(!r||!r.bits)return{status:1};const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=r;let l,c;try{l=yn(i).toUint8Array()}catch(f){if(f instanceof Rf)return Hn("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),{status:1};throw f}try{c=new hl(l,o,a)}catch(f){return Hn(f instanceof Tr?"BloomFilter error: ":"Applying bloom filter failed: ",f),{status:1}}const u=f=>{const p=this.qe.rt();return c.mightContain(`projects/${p.projectId}/databases/${p.database}/documents/${f}`)};return c.de===0?{status:1}:{status:s===n-this.it(t.targetId,u)?0:2,nt:u}}it(t,n){const r=this.qe.getRemoteKeysForTarget(t);let s=0;return r.forEach(i=>{n(i.path.canonicalString())||(this.ze(t,i,null),s++)}),s}st(t){const n=new Map;this.Qe.forEach((i,o)=>{const a=this.Xe(o);if(a){if(i.current&&ra(a.target)){const l=new N(a.target.path);this.Ke.get(l)!==null||this.ot(o,l)||this.ze(o,l,Mt.newNoDocument(l,t))}i.Ce&&(n.set(o,i.Me()),i.xe())}});let r=Q();this.$e.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Xe(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.Ke.forEach((i,o)=>o.setReadTime(t));const s=new Bi(t,n,this.Ue,this.Ke,r);return this.Ke=Me(),this.$e=Jc(),this.Ue=new ft(J),s}Ge(t,n){if(!this.Je(t))return;const r=this.ot(t,n.key)?2:0;this.He(t).Oe(n.key,r),this.Ke=this.Ke.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(t))}ze(t,n,r){if(!this.Je(t))return;const s=this.He(t);this.ot(t,n)?s.Oe(n,1):s.Ne(n),this.$e=this.$e.insert(n,this._t(n).delete(t)),r&&(this.Ke=this.Ke.insert(n,r))}removeTarget(t){this.Qe.delete(t)}et(t){const n=this.He(t).Me();return this.qe.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Be(t){this.He(t).Be()}He(t){let n=this.Qe.get(t);return n||(n=new Yc,this.Qe.set(t,n)),n}_t(t){let n=this.$e.get(t);return n||(n=new Ut(J),this.$e=this.$e.insert(t,n)),n}Je(t){const n=this.Xe(t)!==null;return n||k("WatchChangeAggregator","Detected inactive target",t),n}Xe(t){const n=this.Qe.get(t);return n&&n.ve?null:this.qe.ut(t)}Ye(t){this.Qe.set(t,new Yc),this.qe.getRemoteKeysForTarget(t).forEach(n=>{this.ze(t,n,null)})}ot(t,n){return this.qe.getRemoteKeysForTarget(t).has(n)}}function Jc(){return new ft(N.comparator)}function Zc(){return new ft(N.comparator)}const HE=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),KE=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),zE=(()=>({and:"AND",or:"OR"}))();class WE{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function oa(e,t){return e.useProto3Json||Mi(t)?t:{value:t}}function ii(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Xf(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function QE(e,t){return ii(e,t.toTimestamp())}function Ie(e){return ct(!!e),j.fromTimestamp(function(n){const r=Qe(n);return new Tt(r.seconds,r.nanos)}(e))}function fl(e,t){return function(r){return new ut(["projects",r.projectId,"databases",r.database])}(e).child("documents").child(t).canonicalString()}function Yf(e){const t=ut.fromString(e);return ct(ed(t)),t}function aa(e,t){return fl(e.databaseId,t.path)}function mo(e,t){const n=Yf(t);if(n.get(1)!==e.databaseId.projectId)throw new M(E.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new M(E.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new N(Jf(n))}function la(e,t){return fl(e.databaseId,t)}function GE(e){const t=Yf(e);return t.length===4?ut.emptyPath():Jf(t)}function ca(e){return new ut(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Jf(e){return ct(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function tu(e,t,n){return{name:aa(e,t),fields:n.value.mapValue.fields}}function XE(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:F()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(ct(u===void 0||typeof u=="string"),Bt.fromBase64String(u||"")):(ct(u===void 0||u instanceof Uint8Array),Bt.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){const u=c.code===void 0?E.UNKNOWN:Wf(c.code);return new M(u,c.message||"")}(o);n=new Gf(r,s,i,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=mo(e,r.document.name),i=Ie(r.document.updateTime),o=r.document.createTime?Ie(r.document.createTime):j.min(),a=new Zt({mapValue:{fields:r.document.fields}}),l=Mt.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Ls(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=mo(e,r.document),i=r.readTime?Ie(r.readTime):j.min(),o=Mt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Ls([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=mo(e,r.document),i=r.removedTargetIds||[];n=new Ls([],i,s,null)}else{if(!("filter"in t))return F();{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new UE(s,i),a=r.targetId;n=new Qf(a,o)}}return n}function YE(e,t){let n;if(t instanceof as)n={update:tu(e,t.key,t.value)};else if(t instanceof ll)n={delete:aa(e,t.key)};else if(t instanceof In)n={update:tu(e,t.key,t.data),updateMask:oT(t.fieldMask)};else{if(!(t instanceof OE))return F();n={verify:aa(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof ri)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Qr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Gr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof si)return{fieldPath:o.field.canonicalString(),increment:a.Te};throw F()}(0,r))),t.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:QE(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:F()}(e,t.precondition)),n}function JE(e,t){return e&&e.length>0?(ct(t!==void 0),e.map(n=>function(s,i){let o=s.updateTime?Ie(s.updateTime):Ie(i);return o.isEqual(j.min())&&(o=Ie(i)),new xE(o,s.transformResults||[])}(n,t))):[]}function ZE(e,t){return{documents:[la(e,t.path)]}}function tT(e,t){const n={structuredQuery:{}},r=t.path;t.collectionGroup!==null?(n.parent=la(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=la(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(l){if(l.length!==0)return td(Re.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(c=>function(f){return{field:bn(f.field),direction:rT(f.dir)}}(c))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);const o=oa(e,t.limit);return o!==null&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),n}function eT(e){let t=GE(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ct(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:t=t.child(u.collectionId)}let i=[];n.where&&(i=function(f){const p=Zf(f);return p instanceof Re&&bf(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(b){return new Rr(Vn(b.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,Mi(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,g=f.values||[];return new ni(g,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,g=f.values||[];return new ni(g,p)}(n.endAt)),yE(t,s,o,i,a,"F",l,c)}function nT(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return F()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Zf(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Vn(n.unaryFilter.field);return Et.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Vn(n.unaryFilter.field);return Et.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Vn(n.unaryFilter.field);return Et.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Vn(n.unaryFilter.field);return Et.create(o,"!=",{nullValue:"NULL_VALUE"});default:return F()}}(e):e.fieldFilter!==void 0?function(n){return Et.create(Vn(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return F()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Re.create(n.compositeFilter.filters.map(r=>Zf(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return F()}}(n.compositeFilter.op))}(e):F()}function rT(e){return HE[e]}function sT(e){return KE[e]}function iT(e){return zE[e]}function bn(e){return{fieldPath:e.canonicalString()}}function Vn(e){return Ot.fromServerFormat(e.fieldPath)}function td(e){return e instanceof Et?function(n){if(n.op==="=="){if(Bc(n.value))return{unaryFilter:{field:bn(n.field),op:"IS_NAN"}};if(Uc(n.value))return{unaryFilter:{field:bn(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Bc(n.value))return{unaryFilter:{field:bn(n.field),op:"IS_NOT_NAN"}};if(Uc(n.value))return{unaryFilter:{field:bn(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bn(n.field),op:sT(n.op),value:n.value}}}(e):e instanceof Re?function(n){const r=n.getFilters().map(s=>td(s));return r.length===1?r[0]:{compositeFilter:{op:iT(n.op),filters:r}}}(e):F()}function oT(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function ed(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(t,n,r,s,i=j.min(),o=j.min(),a=Bt.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new Ue(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Ue(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ue(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ue(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(t){this.ct=t}}function lT(e){const t=eT({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?sa(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(){this.sn=new uT}addToCollectionParentIndex(t,n){return this.sn.add(n),v.resolve()}getCollectionParents(t,n){return v.resolve(this.sn.getEntries(n))}addFieldIndex(t,n){return v.resolve()}deleteFieldIndex(t,n){return v.resolve()}getDocumentsMatchingTarget(t,n){return v.resolve(null)}getIndexType(t,n){return v.resolve(0)}getFieldIndexes(t,n){return v.resolve([])}getNextCollectionGroupToUpdate(t){return v.resolve(null)}getMinOffset(t,n){return v.resolve(We.min())}getMinOffsetFromCollectionGroup(t,n){return v.resolve(We.min())}updateCollectionGroup(t,n,r){return v.resolve()}updateIndexEntries(t,n){return v.resolve()}}class uT{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new Ut(ut.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new Ut(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(t){this.Mn=t}next(){return this.Mn+=2,this.Mn}static xn(){return new Qn(0)}static On(){return new Qn(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(){this.changes=new ir(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Mt.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?v.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(r!==null&&Pr(r.mutation,s,ae.empty(),Tt.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Q()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Q()){const s=hn();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,r).next(i=>{let o=Er();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=hn();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Q()))}populateOverlays(t,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(t,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,s){let i=Me();const o=Cr(),a=function(){return Cr()}();return n.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof In)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Pr(u.mutation,c,u.mutation.getFieldMask(),Tt.now())):o.set(c.key,ae.empty())}),this.recalculateAndSaveOverlays(t,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var f;return a.set(c,new fT(u,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=Cr();let s=new ft((o,a)=>o-a),i=Q();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||ae.empty();u=a.applyToLocalView(c,u),r.set(l,u);const f=(s.get(a.batchId)||Q()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=Lf();u.forEach(p=>{if(!i.has(p)){const g=Kf(n.get(p),r.get(p));g!==null&&f.set(p,g),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,f))}return v.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r){return function(i){return N.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):vE(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r):this.getDocumentsMatchingCollectionQuery(t,n,r)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):v.resolve(hn());let a=-1,l=i;return o.next(c=>v.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(u)?v.resolve():this.remoteDocumentCache.getEntry(t,u).next(p=>{l=l.insert(u,p)}))).next(()=>this.populateOverlays(t,c,i)).next(()=>this.computeViews(t,l,c,Q())).next(u=>({batchId:a,changes:Ff(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new N(n)).next(r=>{let s=Er();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,r){const s=n.collectionGroup;let i=Er();return this.indexManager.getCollectionParents(t,s).next(o=>v.forEach(o,a=>{const l=function(u,f){return new Ni(f,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r).next(c=>{c.forEach((u,f)=>{i=i.insert(u,f)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s))).next(i=>{s.forEach((a,l)=>{const c=l.getKey();i.get(c)===null&&(i=i.insert(c,Mt.newInvalidDocument(c)))});let o=Er();return i.forEach((a,l)=>{const c=s.get(a);c!==void 0&&Pr(c.mutation,l,ae.empty(),Tt.now()),Fi(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(t){this.serializer=t,this.ar=new Map,this.ur=new Map}getBundleMetadata(t,n){return v.resolve(this.ar.get(n))}saveBundleMetadata(t,n){return this.ar.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ie(s.createTime)}}(n)),v.resolve()}getNamedQuery(t,n){return v.resolve(this.ur.get(n))}saveNamedQuery(t,n){return this.ur.set(n.name,function(s){return{name:s.name,query:lT(s.bundledQuery),readTime:Ie(s.readTime)}}(n)),v.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(){this.overlays=new ft(N.comparator),this.cr=new Map}getOverlay(t,n){return v.resolve(this.overlays.get(n))}getOverlays(t,n){const r=hn();return v.forEach(n,s=>this.getOverlay(t,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((s,i)=>{this.ht(t,n,i)}),v.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.cr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.cr.delete(r)),v.resolve()}getOverlaysForCollection(t,n,r){const s=hn(),i=n.length+1,o=new N(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return v.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new ft((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=hn(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=hn(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return v.resolve(a)}ht(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.cr.get(s.largestBatchId).delete(r.key);this.cr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new LE(n,r));let i=this.cr.get(n);i===void 0&&(i=Q(),this.cr.set(n,i)),this.cr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(){this.lr=new Ut(wt.hr),this.Pr=new Ut(wt.Ir)}isEmpty(){return this.lr.isEmpty()}addReference(t,n){const r=new wt(t,n);this.lr=this.lr.add(r),this.Pr=this.Pr.add(r)}Tr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Er(new wt(t,n))}dr(t,n){t.forEach(r=>this.removeReference(r,n))}Ar(t){const n=new N(new ut([])),r=new wt(n,t),s=new wt(n,t+1),i=[];return this.Pr.forEachInRange([r,s],o=>{this.Er(o),i.push(o.key)}),i}Rr(){this.lr.forEach(t=>this.Er(t))}Er(t){this.lr=this.lr.delete(t),this.Pr=this.Pr.delete(t)}Vr(t){const n=new N(new ut([])),r=new wt(n,t),s=new wt(n,t+1);let i=Q();return this.Pr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(t){const n=new wt(t,0),r=this.lr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class wt{constructor(t,n){this.key=t,this.mr=n}static hr(t,n){return N.comparator(t.key,n.key)||J(t.mr,n.mr)}static Ir(t,n){return J(t.mr,n.mr)||N.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.gr=1,this.pr=new Ut(wt.hr)}checkEmpty(t){return v.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.gr;this.gr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new FE(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.pr=this.pr.add(new wt(a.key,i)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return v.resolve(o)}lookupMutationBatch(t,n){return v.resolve(this.yr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.wr(r),i=s<0?0:s;return v.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return v.resolve(this.mutationQueue.length===0?-1:this.gr-1)}getAllMutationBatches(t){return v.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new wt(n,0),s=new wt(n,Number.POSITIVE_INFINITY),i=[];return this.pr.forEachInRange([r,s],o=>{const a=this.yr(o.mr);i.push(a)}),v.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Ut(J);return n.forEach(s=>{const i=new wt(s,0),o=new wt(s,Number.POSITIVE_INFINITY);this.pr.forEachInRange([i,o],a=>{r=r.add(a.mr)})}),v.resolve(this.Sr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;N.isDocumentKey(i)||(i=i.child(""));const o=new wt(new N(i),0);let a=new Ut(J);return this.pr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.mr)),!0)},o),v.resolve(this.Sr(a))}Sr(t){const n=[];return t.forEach(r=>{const s=this.yr(r);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){ct(this.br(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.pr;return v.forEach(n.mutations,s=>{const i=new wt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.pr=r})}Cn(t){}containsKey(t,n){const r=new wt(n,0),s=this.pr.firstAfterOrEqual(r);return v.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,v.resolve()}br(t,n){return this.wr(t)}wr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}yr(t){const n=this.wr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(t){this.Dr=t,this.docs=function(){return new ft(N.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Dr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return v.resolve(r?r.document.mutableCopy():Mt.newInvalidDocument(n))}getEntries(t,n){let r=Me();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Mt.newInvalidDocument(s))}),v.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=Me();const o=n.path,a=new N(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||eE(tE(u),r)<=0||(s.has(u.key)||Fi(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return v.resolve(i)}getAllFromCollectionGroup(t,n,r,s){F()}vr(t,n){return v.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new yT(this)}getSize(t){return v.resolve(this.size)}}class yT extends hT{constructor(t){super(),this.sr=t}applyChanges(t){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.sr.addEntry(t,s)):this.sr.removeEntry(r)}),v.waitFor(n)}getFromCache(t,n){return this.sr.getEntry(t,n)}getAllFromCache(t,n){return this.sr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(t){this.persistence=t,this.Cr=new ir(n=>ol(n),al),this.lastRemoteSnapshotVersion=j.min(),this.highestTargetId=0,this.Fr=0,this.Mr=new dl,this.targetCount=0,this.Or=Qn.xn()}forEachTarget(t,n){return this.Cr.forEach((r,s)=>n(s)),v.resolve()}getLastRemoteSnapshotVersion(t){return v.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return v.resolve(this.Fr)}allocateTargetId(t){return this.highestTargetId=this.Or.next(),v.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Fr&&(this.Fr=n),v.resolve()}Ln(t){this.Cr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Or=new Qn(n),this.highestTargetId=n),t.sequenceNumber>this.Fr&&(this.Fr=t.sequenceNumber)}addTargetData(t,n){return this.Ln(n),this.targetCount+=1,v.resolve()}updateTargetData(t,n){return this.Ln(n),v.resolve()}removeTargetData(t,n){return this.Cr.delete(n.target),this.Mr.Ar(n.targetId),this.targetCount-=1,v.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.Cr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Cr.delete(o),i.push(this.removeMatchingKeysForTargetId(t,a.targetId)),s++)}),v.waitFor(i).next(()=>s)}getTargetCount(t){return v.resolve(this.targetCount)}getTargetData(t,n){const r=this.Cr.get(n)||null;return v.resolve(r)}addMatchingKeys(t,n,r){return this.Mr.Tr(n,r),v.resolve()}removeMatchingKeys(t,n,r){this.Mr.dr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(t,o))}),v.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this.Mr.Ar(n),v.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Mr.Vr(n);return v.resolve(r)}containsKey(t,n){return v.resolve(this.Mr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(t,n){this.Nr={},this.overlays={},this.Br=new nl(0),this.Lr=!1,this.Lr=!0,this.referenceDelegate=t(this),this.kr=new ET(this),this.indexManager=new cT,this.remoteDocumentCache=function(s){return new _T(s)}(r=>this.referenceDelegate.qr(r)),this.serializer=new aT(n),this.Qr=new pT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Lr=!1,Promise.resolve()}get started(){return this.Lr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new gT,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Nr[t.toKey()];return r||(r=new mT(n,this.referenceDelegate),this.Nr[t.toKey()]=r),r}getTargetCache(){return this.kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Qr}runTransaction(t,n,r){k("MemoryPersistence","Starting transaction:",t);const s=new vT(this.Br.next());return this.referenceDelegate.Kr(),r(s).next(i=>this.referenceDelegate.$r(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ur(t,n){return v.or(Object.values(this.Nr).map(r=>()=>r.containsKey(t,n)))}}class vT extends rE{constructor(t){super(),this.currentSequenceNumber=t}}class pl{constructor(t){this.persistence=t,this.Wr=new dl,this.Gr=null}static zr(t){return new pl(t)}get jr(){if(this.Gr)return this.Gr;throw F()}addReference(t,n,r){return this.Wr.addReference(r,n),this.jr.delete(r.toString()),v.resolve()}removeReference(t,n,r){return this.Wr.removeReference(r,n),this.jr.add(r.toString()),v.resolve()}markPotentiallyOrphaned(t,n){return this.jr.add(n.toString()),v.resolve()}removeTarget(t,n){this.Wr.Ar(n.targetId).forEach(s=>this.jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(i=>this.jr.add(i.toString()))}).next(()=>r.removeTargetData(t,n))}Kr(){this.Gr=new Set}$r(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return v.forEach(this.jr,r=>{const s=N.fromPath(r);return this.Hr(t,s).next(i=>{i||n.removeEntry(s,j.min())})}).next(()=>(this.Gr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Hr(t,n).next(r=>{r?this.jr.delete(n.toString()):this.jr.add(n.toString())})}qr(t){return 0}Hr(t,n){return v.or([()=>v.resolve(this.Wr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ur(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.Li=r,this.ki=s}static qi(t,n){let r=Q(),s=Q();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new gl(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(){this.Qi=!1}initialize(t,n){this.Ki=t,this.indexManager=n,this.Qi=!0}getDocumentsMatchingQuery(t,n,r,s){return this.$i(t,n).next(i=>i||this.Ui(t,n,s,r)).next(i=>i||this.Wi(t,n))}$i(t,n){if(Hc(n))return v.resolve(null);let r=xe(n);return this.indexManager.getIndexType(t,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=sa(n,null,"F"),r=xe(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(i=>{const o=Q(...i);return this.Ki.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(l=>{const c=this.Gi(n,a);return this.zi(n,c,o,l.readTime)?this.$i(t,sa(n,null,"F")):this.ji(t,c,n,l)}))})))}Ui(t,n,r,s){return Hc(n)||s.isEqual(j.min())?this.Wi(t,n):this.Ki.getDocuments(t,r).next(i=>{const o=this.Gi(n,i);return this.zi(n,o,r,s)?this.Wi(t,n):(Nc()<=Z.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ia(n)),this.ji(t,o,n,Zy(s,-1)))})}Gi(t,n){let r=new Ut(Nf(t));return n.forEach((s,i)=>{Fi(t,i)&&(r=r.add(i))}),r}zi(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Wi(t,n){return Nc()<=Z.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",ia(n)),this.Ki.getDocumentsMatchingQuery(t,n,We.min())}ji(t,n,r,s){return this.Ki.getDocumentsMatchingQuery(t,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(t,n,r,s){this.persistence=t,this.Hi=n,this.serializer=s,this.Ji=new ft(J),this.Yi=new ir(i=>ol(i),al),this.Zi=new Map,this.Xi=t.getRemoteDocumentCache(),this.kr=t.getTargetCache(),this.Qr=t.getBundleCache(),this.es(r)}es(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new dT(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ji))}}function AT(e,t,n,r){return new wT(e,t,n,r)}async function nd(e,t){const n=H(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.es(t),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Q();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({ts:c,removedBatchIds:o,addedBatchIds:a}))})})}function RT(e,t){const n=H(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=t.batch.keys(),i=n.Xi.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const f=c.batch,p=f.keys();let g=v.resolve();return p.forEach(b=>{g=g.next(()=>u.getEntry(l,b)).next(C=>{const S=c.docVersions.get(b);ct(S!==null),C.version.compareTo(S)<0&&(f.applyToRemoteDocument(C,c),C.isValidDocument()&&(C.setReadTime(c.commitVersion),u.addEntry(C)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,t,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Q();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(t))).next(()=>n.localDocuments.getDocuments(r,s))})}function rd(e){const t=H(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.kr.getLastRemoteSnapshotVersion(n))}function CT(e,t){const n=H(e),r=t.snapshotVersion;let s=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Xi.newChangeBuffer({trackRemovals:!0});s=n.Ji;const a=[];t.targetChanges.forEach((u,f)=>{const p=s.get(f);if(!p)return;a.push(n.kr.removeMatchingKeys(i,u.removedDocuments,f).next(()=>n.kr.addMatchingKeys(i,u.addedDocuments,f)));let g=p.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(f)!==null?g=g.withResumeToken(Bt.EMPTY_BYTE_STRING,j.min()).withLastLimboFreeSnapshotVersion(j.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,r)),s=s.insert(f,g),function(C,S,q){return C.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(p,g,u)&&a.push(n.kr.updateTargetData(i,g))});let l=Me(),c=Q();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(PT(i,o,t.documentUpdates).next(u=>{l=u.ns,c=u.rs})),!r.isEqual(j.min())){const u=n.kr.getLastRemoteSnapshotVersion(i).next(f=>n.kr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return v.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ji=s,i))}function PT(e,t,n){let r=Q(),s=Q();return n.forEach(i=>r=r.add(i)),t.getEntries(e,r).next(i=>{let o=Me();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(j.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):k("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ns:o,rs:s}})}function ST(e,t){const n=H(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function bT(e,t){const n=H(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.kr.getTargetData(r,t).next(i=>i?(s=i,v.resolve(s)):n.kr.allocateTargetId(r).next(o=>(s=new Ue(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.kr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ji.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(r.targetId,r),n.Yi.set(t,r.targetId)),r})}async function ua(e,t,n){const r=H(e),s=r.Ji.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!os(o))throw o;k("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.Ji=r.Ji.remove(t),r.Yi.delete(s.target)}function eu(e,t,n){const r=H(e);let s=j.min(),i=Q();return r.persistence.runTransaction("Execute query","readonly",o=>function(l,c,u){const f=H(l),p=f.Yi.get(u);return p!==void 0?v.resolve(f.Ji.get(p)):f.kr.getTargetData(c,u)}(r,o,xe(t)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.kr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Hi.getDocumentsMatchingQuery(o,t,n?s:j.min(),n?i:Q())).next(a=>(VT(r,IE(t),a),{documents:a,ss:i})))}function VT(e,t,n){let r=e.Zi.get(t)||j.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),e.Zi.set(t,r)}class nu{constructor(){this.activeTargetIds=SE()}hs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Ps(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ls(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class kT{constructor(){this.Hs=new nu,this.Js={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.Hs.hs(t),this.Js[t]||"not-current"}updateQueryState(t,n,r){this.Js[t]=n}removeLocalQueryTarget(t){this.Hs.Ps(t)}isLocalQueryTarget(t){return this.Hs.activeTargetIds.has(t)}clearQueryState(t){delete this.Js[t]}getAllActiveQueryTargets(){return this.Hs.activeTargetIds}isActiveQueryTarget(t){return this.Hs.activeTargetIds.has(t)}start(){return this.Hs=new nu,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{Ys(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(){this.Zs=()=>this.Xs(),this.eo=()=>this.no(),this.ro=[],this.io()}Ys(t){this.ro.push(t)}shutdown(){window.removeEventListener("online",this.Zs),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Zs),window.addEventListener("offline",this.eo)}Xs(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ro)t(0)}no(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ro)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bs=null;function _o(){return bs===null?bs=function(){return 268435456+Math.round(2147483648*Math.random())}():bs++,"0x"+bs.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(t){this.so=t.so,this.oo=t.oo}_o(t){this.ao=t}uo(t){this.co=t}onMessage(t){this.lo=t}close(){this.oo()}send(t){this.so(t)}ho(){this.ao()}Po(t){this.co(t)}Io(t){this.lo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dt="WebChannelConnection";class NT extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http";this.To=r+"://"+n.host,this.Eo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get Ao(){return!1}Ro(n,r,s,i,o){const a=_o(),l=this.Vo(n,r);k("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={};return this.mo(c,i,o),this.fo(n,l,c,s).then(u=>(k("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Hn("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",s),u})}po(n,r,s,i,o,a){return this.Ro(n,r,s,i,o)}mo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+rr}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}Vo(n,r){const s=xT[n];return`${this.To}/v1/${r}:${s}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}fo(t,n,r,s){const i=_o();return new Promise((o,a)=>{const l=new $y;l.setWithCredentials(!0),l.listenOnce(Uy.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case go.NO_ERROR:const u=l.getResponseJson();k(Dt,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(u)),o(u);break;case go.TIMEOUT:k(Dt,`RPC '${t}' ${i} timed out`),a(new M(E.DEADLINE_EXCEEDED,"Request time out"));break;case go.HTTP_ERROR:const f=l.getStatus();if(k(Dt,`RPC '${t}' ${i} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const b=function(S){const q=S.toLowerCase().replace(/_/g,"-");return Object.values(E).indexOf(q)>=0?q:E.UNKNOWN}(g.status);a(new M(b,g.message))}else a(new M(E.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new M(E.UNAVAILABLE,"Connection failed."));break;default:F()}}finally{k(Dt,`RPC '${t}' ${i} completed.`)}});const c=JSON.stringify(s);k(Dt,`RPC '${t}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}yo(t,n,r){const s=_o(),i=[this.To,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Fy(),a=Ly(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new jy({})),this.mo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");k(Dt,`Creating RPC '${t}' stream ${s}: ${u}`,l);const f=o.createWebChannel(u,l);let p=!1,g=!1;const b=new MT({so:S=>{g?k(Dt,`Not sending because RPC '${t}' stream ${s} is closed:`,S):(p||(k(Dt,`Opening RPC '${t}' stream ${s} transport.`),f.open(),p=!0),k(Dt,`RPC '${t}' stream ${s} sending:`,S),f.send(S))},oo:()=>f.close()}),C=(S,q,z)=>{S.listen(q,G=>{try{z(G)}catch(O){setTimeout(()=>{throw O},0)}})};return C(f,Rs.EventType.OPEN,()=>{g||k(Dt,`RPC '${t}' stream ${s} transport opened.`)}),C(f,Rs.EventType.CLOSE,()=>{g||(g=!0,k(Dt,`RPC '${t}' stream ${s} transport closed`),b.Po())}),C(f,Rs.EventType.ERROR,S=>{g||(g=!0,Hn(Dt,`RPC '${t}' stream ${s} transport errored:`,S),b.Po(new M(E.UNAVAILABLE,"The operation could not be completed")))}),C(f,Rs.EventType.MESSAGE,S=>{var q;if(!g){const z=S.data[0];ct(!!z);const G=z,O=G.error||((q=G[0])===null||q===void 0?void 0:q.error);if(O){k(Dt,`RPC '${t}' stream ${s} received error:`,O);const It=O.status;let yt=function(lr){const he=mt[lr];if(he!==void 0)return Wf(he)}(It),Je=O.message;yt===void 0&&(yt=E.INTERNAL,Je="Unknown error status: "+It+" with message "+O.message),g=!0,b.Po(new M(yt,Je)),f.close()}else k(Dt,`RPC '${t}' stream ${s} received:`,z),b.Io(z)}}),C(a,By.STAT_EVENT,S=>{S.stat===xc.PROXY?k(Dt,`RPC '${t}' stream ${s} detected buffering proxy`):S.stat===xc.NOPROXY&&k(Dt,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.ho()},0),b}}function yo(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ji(e){return new WE(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(t,n,r=1e3,s=1.5,i=6e4){this.ii=t,this.timerId=n,this.wo=r,this.So=s,this.bo=i,this.Do=0,this.vo=null,this.Co=Date.now(),this.reset()}reset(){this.Do=0}Fo(){this.Do=this.bo}Mo(t){this.cancel();const n=Math.floor(this.Do+this.xo()),r=Math.max(0,Date.now()-this.Co),s=Math.max(0,n-r);s>0&&k("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Do} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.vo=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),t())),this.Do*=this.So,this.Do<this.wo&&(this.Do=this.wo),this.Do>this.bo&&(this.Do=this.bo)}Oo(){this.vo!==null&&(this.vo.skipDelay(),this.vo=null)}cancel(){this.vo!==null&&(this.vo.cancel(),this.vo=null)}xo(){return(Math.random()-.5)*this.Do}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(t,n,r,s,i,o,a,l){this.ii=t,this.No=r,this.Bo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Lo=0,this.ko=null,this.qo=null,this.stream=null,this.Qo=new sd(t,n)}Ko(){return this.state===1||this.state===5||this.$o()}$o(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Uo()}async stop(){this.Ko()&&await this.close(0)}Wo(){this.state=0,this.Qo.reset()}Go(){this.$o()&&this.ko===null&&(this.ko=this.ii.enqueueAfterDelay(this.No,6e4,()=>this.zo()))}jo(t){this.Ho(),this.stream.send(t)}async zo(){if(this.$o())return this.close(0)}Ho(){this.ko&&(this.ko.cancel(),this.ko=null)}Jo(){this.qo&&(this.qo.cancel(),this.qo=null)}async close(t,n){this.Ho(),this.Jo(),this.Qo.cancel(),this.Lo++,t!==4?this.Qo.reset():n&&n.code===E.RESOURCE_EXHAUSTED?(De(n.toString()),De("Using maximum backoff delay to prevent overloading the backend."),this.Qo.Fo()):n&&n.code===E.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,await this.listener.uo(n)}Yo(){}auth(){this.state=1;const t=this.Zo(this.Lo),n=this.Lo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Lo===n&&this.Xo(r,s)},r=>{t(()=>{const s=new M(E.UNKNOWN,"Fetching auth token failed: "+r.message);return this.e_(s)})})}Xo(t,n){const r=this.Zo(this.Lo);this.stream=this.t_(t,n),this.stream._o(()=>{r(()=>(this.state=2,this.qo=this.ii.enqueueAfterDelay(this.Bo,1e4,()=>(this.$o()&&(this.state=3),Promise.resolve())),this.listener._o()))}),this.stream.uo(s=>{r(()=>this.e_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Uo(){this.state=5,this.Qo.Mo(async()=>{this.state=0,this.start()})}e_(t){return k("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Zo(t){return n=>{this.ii.enqueueAndForget(()=>this.Lo===t?n():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OT extends id{constructor(t,n,r,s,i,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}t_(t,n){return this.connection.yo("Listen",t,n)}onMessage(t){this.Qo.reset();const n=XE(this.serializer,t),r=function(i){if(!("targetChange"in i))return j.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?j.min():o.readTime?Ie(o.readTime):j.min()}(t);return this.listener.n_(n,r)}r_(t){const n={};n.database=ca(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=ra(l)?{documents:ZE(i,l)}:{query:tT(i,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Xf(i,o.resumeToken);const c=oa(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(j.min())>0){a.readTime=ii(i,o.snapshotVersion.toTimestamp());const c=oa(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);const r=nT(this.serializer,t);r&&(n.labels=r),this.jo(n)}i_(t){const n={};n.database=ca(this.serializer),n.removeTarget=t,this.jo(n)}}class FT extends id{constructor(t,n,r,s,i,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.s_=!1}get o_(){return this.s_}start(){this.s_=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.s_&&this.__([])}t_(t,n){return this.connection.yo("Write",t,n)}onMessage(t){if(ct(!!t.streamToken),this.lastStreamToken=t.streamToken,this.s_){this.Qo.reset();const n=JE(t.writeResults,t.commitTime),r=Ie(t.commitTime);return this.listener.a_(r,n)}return ct(!t.writeResults||t.writeResults.length===0),this.s_=!0,this.listener.u_()}c_(){const t={};t.database=ca(this.serializer),this.jo(t)}__(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>YE(this.serializer,r))};this.jo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT extends class{}{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.l_=!1}h_(){if(this.l_)throw new M(E.FAILED_PRECONDITION,"The client has already been terminated.")}Ro(t,n,r){return this.h_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Ro(t,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new M(E.UNKNOWN,s.toString())})}po(t,n,r,s){return this.h_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.po(t,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new M(E.UNKNOWN,i.toString())})}terminate(){this.l_=!0}}class UT{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.I_=0,this.T_=null,this.E_=!0}d_(){this.I_===0&&(this.A_("Unknown"),this.T_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.T_=null,this.R_("Backend didn't respond within 10 seconds."),this.A_("Offline"),Promise.resolve())))}V_(t){this.state==="Online"?this.A_("Unknown"):(this.I_++,this.I_>=1&&(this.m_(),this.R_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.A_("Offline")))}set(t){this.m_(),this.I_=0,t==="Online"&&(this.E_=!1),this.A_(t)}A_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}R_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.E_?(De(n),this.E_=!1):k("OnlineStateTracker",n)}m_(){this.T_!==null&&(this.T_.cancel(),this.T_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.f_=[],this.g_=new Map,this.p_=new Set,this.y_=[],this.w_=i,this.w_.Ys(o=>{r.enqueueAndForget(async()=>{wn(this)&&(k("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=H(l);c.p_.add(4),await cs(c),c.S_.set("Unknown"),c.p_.delete(4),await $i(c)}(this))})}),this.S_=new UT(r,s)}}async function $i(e){if(wn(e))for(const t of e.y_)await t(!0)}async function cs(e){for(const t of e.y_)await t(!1)}function od(e,t){const n=H(e);n.g_.has(t.targetId)||(n.g_.set(t.targetId,t),yl(n)?_l(n):or(n).$o()&&ml(n,t))}function ad(e,t){const n=H(e),r=or(n);n.g_.delete(t),r.$o()&&ld(n,t),n.g_.size===0&&(r.$o()?r.Go():wn(n)&&n.S_.set("Unknown"))}function ml(e,t){if(e.b_.Be(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(j.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}or(e).r_(t)}function ld(e,t){e.b_.Be(t),or(e).i_(t)}function _l(e){e.b_=new qE({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ut:t=>e.g_.get(t)||null,rt:()=>e.datastore.serializer.databaseId}),or(e).start(),e.S_.d_()}function yl(e){return wn(e)&&!or(e).Ko()&&e.g_.size>0}function wn(e){return H(e).p_.size===0}function cd(e){e.b_=void 0}async function jT(e){e.g_.forEach((t,n)=>{ml(e,t)})}async function $T(e,t){cd(e),yl(e)?(e.S_.V_(t),_l(e)):e.S_.set("Unknown")}async function qT(e,t,n){if(e.S_.set("Online"),t instanceof Gf&&t.state===2&&t.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.g_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.g_.delete(a),s.b_.removeTarget(a))}(e,t)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await oi(e,r)}else if(t instanceof Ls?e.b_.We(t):t instanceof Qf?e.b_.Ze(t):e.b_.je(t),!n.isEqual(j.min()))try{const r=await rd(e.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.b_.st(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.g_.get(c);u&&i.g_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.g_.get(l);if(!u)return;i.g_.set(l,u.withResumeToken(Bt.EMPTY_BYTE_STRING,u.snapshotVersion)),ld(i,l);const f=new Ue(u.target,l,c,u.sequenceNumber);ml(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){k("RemoteStore","Failed to raise snapshot:",r),await oi(e,r)}}async function oi(e,t,n){if(!os(t))throw t;e.p_.add(1),await cs(e),e.S_.set("Offline"),n||(n=()=>rd(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{k("RemoteStore","Retrying IndexedDB access"),await n(),e.p_.delete(1),await $i(e)})}function ud(e,t){return t().catch(n=>oi(e,n,t))}async function qi(e){const t=H(e),n=Ge(t);let r=t.f_.length>0?t.f_[t.f_.length-1].batchId:-1;for(;HT(t);)try{const s=await ST(t.localStore,r);if(s===null){t.f_.length===0&&n.Go();break}r=s.batchId,KT(t,s)}catch(s){await oi(t,s)}hd(t)&&fd(t)}function HT(e){return wn(e)&&e.f_.length<10}function KT(e,t){e.f_.push(t);const n=Ge(e);n.$o()&&n.o_&&n.__(t.mutations)}function hd(e){return wn(e)&&!Ge(e).Ko()&&e.f_.length>0}function fd(e){Ge(e).start()}async function zT(e){Ge(e).c_()}async function WT(e){const t=Ge(e);for(const n of e.f_)t.__(n.mutations)}async function QT(e,t,n){const r=e.f_.shift(),s=cl.from(r,t,n);await ud(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await qi(e)}async function GT(e,t){t&&Ge(e).o_&&await async function(r,s){if(function(o){return BE(o)&&o!==E.ABORTED}(s.code)){const i=r.f_.shift();Ge(r).Wo(),await ud(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await qi(r)}}(e,t),hd(e)&&fd(e)}async function su(e,t){const n=H(e);n.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");const r=wn(n);n.p_.add(3),await cs(n),r&&n.S_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.p_.delete(3),await $i(n)}async function XT(e,t){const n=H(e);t?(n.p_.delete(2),await $i(n)):t||(n.p_.add(2),await cs(n),n.S_.set("Unknown"))}function or(e){return e.D_||(e.D_=function(n,r,s){const i=H(n);return i.h_(),new OT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{_o:jT.bind(null,e),uo:$T.bind(null,e),n_:qT.bind(null,e)}),e.y_.push(async t=>{t?(e.D_.Wo(),yl(e)?_l(e):e.S_.set("Unknown")):(await e.D_.stop(),cd(e))})),e.D_}function Ge(e){return e.v_||(e.v_=function(n,r,s){const i=H(n);return i.h_(),new FT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{_o:zT.bind(null,e),uo:GT.bind(null,e),u_:WT.bind(null,e),a_:QT.bind(null,e)}),e.y_.push(async t=>{t?(e.v_.Wo(),await qi(e)):(await e.v_.stop(),e.f_.length>0&&(k("RemoteStore",`Stopping write stream with ${e.f_.length} pending writes`),e.f_=[]))})),e.v_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new He,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(t,n,r,s,i){const o=Date.now()+r,a=new El(t,n,o,s,i);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new M(E.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tl(e,t){if(De("AsyncQueue",`${t}: ${e}`),os(e))return new M(E.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(t){this.comparator=t?(n,r)=>t(n,r)||N.comparator(n.key,r.key):(n,r)=>N.comparator(n.key,r.key),this.keyedMap=Er(),this.sortedSet=new ft(this.comparator)}static emptySet(t){return new Bn(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Bn)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Bn;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(){this.C_=new ft(N.comparator)}track(t){const n=t.doc.key,r=this.C_.get(n);r?t.type!==0&&r.type===3?this.C_=this.C_.insert(n,t):t.type===3&&r.type!==1?this.C_=this.C_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.C_=this.C_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.C_=this.C_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.C_=this.C_.remove(n):t.type===1&&r.type===2?this.C_=this.C_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.C_=this.C_.insert(n,{type:2,doc:t.doc}):F():this.C_=this.C_.insert(n,t)}F_(){const t=[];return this.C_.inorderTraversal((n,r)=>{t.push(r)}),t}}class Gn{constructor(t,n,r,s,i,o,a,l,c){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Gn(t,n,Bn.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Oi(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(){this.M_=void 0,this.listeners=[]}}class JT{constructor(){this.queries=new ir(t=>Mf(t),Oi),this.onlineState="Unknown",this.x_=new Set}}async function ZT(e,t){const n=H(e),r=t.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new YT),s)try{i.M_=await n.onListen(r)}catch(o){const a=Tl(o,`Initialization of query '${ia(t.query)}' failed`);return void t.onError(a)}n.queries.set(r,i),i.listeners.push(t),t.O_(n.onlineState),i.M_&&t.N_(i.M_)&&vl(n)}async function t0(e,t){const n=H(e),r=t.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(t);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function e0(e,t){const n=H(e);let r=!1;for(const s of t){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.N_(s)&&(r=!0);o.M_=s}}r&&vl(n)}function n0(e,t,n){const r=H(e),s=r.queries.get(t);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(t)}function vl(e){e.x_.forEach(t=>{t.next()})}class r0{constructor(t,n,r){this.query=t,this.B_=n,this.L_=!1,this.k_=null,this.onlineState="Unknown",this.options=r||{}}N_(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new Gn(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.L_?this.q_(t)&&(this.B_.next(t),n=!0):this.Q_(t,this.onlineState)&&(this.K_(t),n=!0),this.k_=t,n}onError(t){this.B_.error(t)}O_(t){this.onlineState=t;let n=!1;return this.k_&&!this.L_&&this.Q_(this.k_,t)&&(this.K_(this.k_),n=!0),n}Q_(t,n){if(!t.fromCache)return!0;const r=n!=="Offline";return(!this.options.U_||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}q_(t){if(t.docChanges.length>0)return!0;const n=this.k_&&this.k_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}K_(t){t=Gn.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.L_=!0,this.B_.next(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(t){this.key=t}}class pd{constructor(t){this.key=t}}class s0{constructor(t,n){this.query=t,this.Z_=n,this.X_=null,this.hasCachedResults=!1,this.current=!1,this.ea=Q(),this.mutatedKeys=Q(),this.ta=Nf(t),this.na=new Bn(this.ta)}get ra(){return this.Z_}ia(t,n){const r=n?n.sa:new iu,s=n?n.na:this.na;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((u,f)=>{const p=s.get(u),g=Fi(this.query,f)?f:null,b=!!p&&this.mutatedKeys.has(p.key),C=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let S=!1;p&&g?p.data.isEqual(g.data)?b!==C&&(r.track({type:3,doc:g}),S=!0):this.oa(p,g)||(r.track({type:2,doc:g}),S=!0,(l&&this.ta(g,l)>0||c&&this.ta(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),S=!0):p&&!g&&(r.track({type:1,doc:p}),S=!0,(l||c)&&(a=!0)),S&&(g?(o=o.add(g),i=C?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{na:o,sa:r,zi:a,mutatedKeys:i}}oa(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r){const s=this.na;this.na=t.na,this.mutatedKeys=t.mutatedKeys;const i=t.sa.F_();i.sort((c,u)=>function(p,g){const b=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return F()}};return b(p)-b(g)}(c.type,u.type)||this.ta(c.doc,u.doc)),this._a(r);const o=n?this.aa():[],a=this.ea.size===0&&this.current?1:0,l=a!==this.X_;return this.X_=a,i.length!==0||l?{snapshot:new Gn(this.query,t.na,s,i,t.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ua:o}:{ua:o}}O_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({na:this.na,sa:new iu,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{ua:[]}}ca(t){return!this.Z_.has(t)&&!!this.na.has(t)&&!this.na.get(t).hasLocalMutations}_a(t){t&&(t.addedDocuments.forEach(n=>this.Z_=this.Z_.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Z_=this.Z_.delete(n)),this.current=t.current)}aa(){if(!this.current)return[];const t=this.ea;this.ea=Q(),this.na.forEach(r=>{this.ca(r.key)&&(this.ea=this.ea.add(r.key))});const n=[];return t.forEach(r=>{this.ea.has(r)||n.push(new pd(r))}),this.ea.forEach(r=>{t.has(r)||n.push(new dd(r))}),n}la(t){this.Z_=t.ss,this.ea=Q();const n=this.ia(t.documents);return this.applyChanges(n,!0)}ha(){return Gn.fromInitialDocuments(this.query,this.na,this.mutatedKeys,this.X_===0,this.hasCachedResults)}}class i0{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class o0{constructor(t){this.key=t,this.Pa=!1}}class a0{constructor(t,n,r,s,i,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ia={},this.Ta=new ir(a=>Mf(a),Oi),this.Ea=new Map,this.da=new Set,this.Aa=new ft(N.comparator),this.Ra=new Map,this.Va=new dl,this.ma={},this.fa=new Map,this.ga=Qn.On(),this.onlineState="Unknown",this.pa=void 0}get isPrimaryClient(){return this.pa===!0}}async function l0(e,t){const n=y0(e);let r,s;const i=n.Ta.get(t);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.ha();else{const o=await bT(n.localStore,xe(t)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await c0(n,t,r,a==="current",o.resumeToken),n.isPrimaryClient&&od(n.remoteStore,o)}return s}async function c0(e,t,n,r,s){e.ya=(f,p,g)=>async function(C,S,q,z){let G=S.view.ia(q);G.zi&&(G=await eu(C.localStore,S.query,!1).then(({documents:yt})=>S.view.ia(yt,G)));const O=z&&z.targetChanges.get(S.targetId),It=S.view.applyChanges(G,C.isPrimaryClient,O);return au(C,S.targetId,It.ua),It.snapshot}(e,f,p,g);const i=await eu(e.localStore,t,!0),o=new s0(t,i.ss),a=o.ia(i.documents),l=ls.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),c=o.applyChanges(a,e.isPrimaryClient,l);au(e,n,c.ua);const u=new i0(t,n,o);return e.Ta.set(t,u),e.Ea.has(n)?e.Ea.get(n).push(t):e.Ea.set(n,[t]),c.snapshot}async function u0(e,t){const n=H(e),r=n.Ta.get(t),s=n.Ea.get(r.targetId);if(s.length>1)return n.Ea.set(r.targetId,s.filter(i=>!Oi(i,t))),void n.Ta.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await ua(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),ad(n.remoteStore,r.targetId),ha(n,r.targetId)}).catch(is)):(ha(n,r.targetId),await ua(n.localStore,r.targetId,!0))}async function h0(e,t,n){const r=E0(e);try{const s=await function(o,a){const l=H(o),c=Tt.now(),u=a.reduce((g,b)=>g.add(b.key),Q());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let b=Me(),C=Q();return l.Xi.getEntries(g,u).next(S=>{b=S,b.forEach((q,z)=>{z.isValidDocument()||(C=C.add(q))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,b)).next(S=>{f=S;const q=[];for(const z of a){const G=NE(z,f.get(z.key).overlayedDocument);G!=null&&q.push(new In(z.key,G,Cf(G.value.mapValue),ve.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,q,a)}).next(S=>{p=S;const q=S.applyToLocalDocumentSet(f,C);return l.documentOverlayCache.saveOverlays(g,S.batchId,q)})}).then(()=>({batchId:p.batchId,changes:Ff(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.ma[o.currentUser.toKey()];c||(c=new ft(J)),c=c.insert(a,l),o.ma[o.currentUser.toKey()]=c}(r,s.batchId,n),await us(r,s.changes),await qi(r.remoteStore)}catch(s){const i=Tl(s,"Failed to persist write");n.reject(i)}}async function gd(e,t){const n=H(e);try{const r=await CT(n.localStore,t);t.targetChanges.forEach((s,i)=>{const o=n.Ra.get(i);o&&(ct(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Pa=!0:s.modifiedDocuments.size>0?ct(o.Pa):s.removedDocuments.size>0&&(ct(o.Pa),o.Pa=!1))}),await us(n,r,t)}catch(r){await is(r)}}function ou(e,t,n){const r=H(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Ta.forEach((i,o)=>{const a=o.view.O_(t);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=H(o);l.onlineState=a;let c=!1;l.queries.forEach((u,f)=>{for(const p of f.listeners)p.O_(a)&&(c=!0)}),c&&vl(l)}(r.eventManager,t),s.length&&r.Ia.n_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function f0(e,t,n){const r=H(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Ra.get(t),i=s&&s.key;if(i){let o=new ft(N.comparator);o=o.insert(i,Mt.newNoDocument(i,j.min()));const a=Q().add(i),l=new Bi(j.min(),new Map,new ft(J),o,a);await gd(r,l),r.Aa=r.Aa.remove(i),r.Ra.delete(t),Il(r)}else await ua(r.localStore,t,!1).then(()=>ha(r,t,n)).catch(is)}async function d0(e,t){const n=H(e),r=t.batch.batchId;try{const s=await RT(n.localStore,t);_d(n,r,null),md(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await us(n,s)}catch(s){await is(s)}}async function p0(e,t,n){const r=H(e);try{const s=await function(o,a){const l=H(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(ct(f!==null),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,t);_d(r,t,n),md(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await us(r,s)}catch(s){await is(s)}}function md(e,t){(e.fa.get(t)||[]).forEach(n=>{n.resolve()}),e.fa.delete(t)}function _d(e,t,n){const r=H(e);let s=r.ma[r.currentUser.toKey()];if(s){const i=s.get(t);i&&(n?i.reject(n):i.resolve(),s=s.remove(t)),r.ma[r.currentUser.toKey()]=s}}function ha(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ea.get(t))e.Ta.delete(r),n&&e.Ia.wa(r,n);e.Ea.delete(t),e.isPrimaryClient&&e.Va.Ar(t).forEach(r=>{e.Va.containsKey(r)||yd(e,r)})}function yd(e,t){e.da.delete(t.path.canonicalString());const n=e.Aa.get(t);n!==null&&(ad(e.remoteStore,n),e.Aa=e.Aa.remove(t),e.Ra.delete(n),Il(e))}function au(e,t,n){for(const r of n)r instanceof dd?(e.Va.addReference(r.key,t),g0(e,r)):r instanceof pd?(k("SyncEngine","Document no longer in limbo: "+r.key),e.Va.removeReference(r.key,t),e.Va.containsKey(r.key)||yd(e,r.key)):F()}function g0(e,t){const n=t.key,r=n.path.canonicalString();e.Aa.get(n)||e.da.has(r)||(k("SyncEngine","New document in limbo: "+n),e.da.add(r),Il(e))}function Il(e){for(;e.da.size>0&&e.Aa.size<e.maxConcurrentLimboResolutions;){const t=e.da.values().next().value;e.da.delete(t);const n=new N(ut.fromString(t)),r=e.ga.next();e.Ra.set(r,new o0(n)),e.Aa=e.Aa.insert(n,r),od(e.remoteStore,new Ue(xe(xf(n.path)),r,"TargetPurposeLimboResolution",nl.ae))}}async function us(e,t,n){const r=H(e),s=[],i=[],o=[];r.Ta.isEmpty()||(r.Ta.forEach((a,l)=>{o.push(r.ya(l,t,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const u=gl.qi(l.targetId,c);i.push(u)}}))}),await Promise.all(o),r.Ia.n_(s),await async function(l,c){const u=H(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>v.forEach(c,p=>v.forEach(p.Li,g=>u.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>v.forEach(p.ki,g=>u.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!os(f))throw f;k("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const g=u.Ji.get(p),b=g.snapshotVersion,C=g.withLastLimboFreeSnapshotVersion(b);u.Ji=u.Ji.insert(p,C)}}}(r.localStore,i))}async function m0(e,t){const n=H(e);if(!n.currentUser.isEqual(t)){k("SyncEngine","User change. New user:",t.toKey());const r=await nd(n.localStore,t);n.currentUser=t,function(i,o){i.fa.forEach(a=>{a.forEach(l=>{l.reject(new M(E.CANCELLED,o))})}),i.fa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await us(n,r.ts)}}function _0(e,t){const n=H(e),r=n.Ra.get(t);if(r&&r.Pa)return Q().add(r.key);{let s=Q();const i=n.Ea.get(t);if(!i)return s;for(const o of i){const a=n.Ta.get(o);s=s.unionWith(a.view.ra)}return s}}function y0(e){const t=H(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=gd.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=_0.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=f0.bind(null,t),t.Ia.n_=e0.bind(null,t.eventManager),t.Ia.wa=n0.bind(null,t.eventManager),t}function E0(e){const t=H(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=d0.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=p0.bind(null,t),t}class lu{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=ji(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return AT(this.persistence,new IT,t.initialUser,this.serializer)}createPersistence(t){return new TT(pl.zr,this.serializer)}createSharedClientState(t){return new kT}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class T0{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ou(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=m0.bind(null,this.syncEngine),await XT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new JT}()}createDatastore(t){const n=ji(t.databaseInfo.databaseId),r=function(i){return new NT(i)}(t.databaseInfo);return function(i,o,a,l){return new LT(i,o,a,l)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,s,i,o,a){return new BT(r,s,i,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>ou(this.syncEngine,n,0),function(){return ru.v()?new ru:new DT}())}createSyncEngine(t,n){return function(s,i,o,a,l,c,u){const f=new a0(s,i,o,a,l,c);return u&&(f.pa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=H(n);k("RemoteStore","RemoteStore shutting down."),r.p_.add(5),await cs(r),r.w_.shutdown(),r.S_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Da(this.observer.next,t)}error(t){this.observer.error?this.Da(this.observer.error,t):De("Uncaught Error in snapshot listener:",t.toString())}va(){this.muted=!0}Da(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(t,n,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=xt.UNAUTHENTICATED,this.clientId=wf.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{k("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(k("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new M(E.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new He;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Tl(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Eo(e,t){e.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async s=>{r.isEqual(s)||(await nd(t.localStore,s),r=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function cu(e,t){e.asyncQueue.verifyOperationInProgress();const n=await A0(e);k("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(s=>su(t.remoteStore,s)),e.setAppCheckTokenChangeListener((s,i)=>su(t.remoteStore,i)),e._onlineComponents=t}function w0(e){return e.name==="FirebaseError"?e.code===E.FAILED_PRECONDITION||e.code===E.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function A0(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{await Eo(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!w0(n))throw n;Hn("Error using user provided cache. Falling back to memory cache: "+n),await Eo(e,new lu)}}else k("FirestoreClient","Using default OfflineComponentProvider"),await Eo(e,new lu);return e._offlineComponents}async function Ed(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),await cu(e,e._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),await cu(e,new T0))),e._onlineComponents}function R0(e){return Ed(e).then(t=>t.syncEngine)}async function C0(e){const t=await Ed(e),n=t.eventManager;return n.onListen=l0.bind(null,t.syncEngine),n.onUnlisten=u0.bind(null,t.syncEngine),n}function P0(e,t,n={}){const r=new He;return e.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new v0({next:p=>{o.enqueueAndForget(()=>t0(i,f)),p.fromCache&&l.source==="server"?c.reject(new M(E.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new r0(a,u,{includeMetadataChanges:!0,U_:!0});return ZT(i,f)}(await C0(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(e,t,n){if(!n)throw new M(E.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function S0(e,t,n,r){if(t===!0&&r===!0)throw new M(E.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function hu(e){if(!N.isDocumentKey(e))throw new M(E.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function fu(e){if(N.isDocumentKey(e))throw new M(E.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function wl(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":F()}function Xn(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new M(E.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wl(e);throw new M(E.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new M(E.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new M(E.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}S0("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Td((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new M(E.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new M(E.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new M(E.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Hi{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new du({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new M(E.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new M(E.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new du(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Hy;switch(r.type){case"firstParty":return new Qy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new M(E.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=uu.get(n);r&&(k("ComponentProvider","Removing Datastore"),uu.delete(n),r.terminate())}(this),Promise.resolve()}}function b0(e,t,n,r={}){var s;const i=(e=Xn(e,Hi))._getSettings(),o=`${t}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Hn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=xt.MOCK_USER;else{a=vm(r.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new M(E.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new xt(c)}e._authCredentials=new Ky(new If(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Ki(this.firestore,t,this._query)}}class ee{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ke(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ee(this.firestore,t,this._key)}}class Ke extends Ki{constructor(t,n,r){super(t,n,xf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ee(this.firestore,null,new N(t))}withConverter(t){return new Ke(this.firestore,t,this._path)}}function V0(e,t,...n){if(e=xr(e),vd("collection","path",t),e instanceof Hi){const r=ut.fromString(t,...n);return fu(r),new Ke(e,null,r)}{if(!(e instanceof ee||e instanceof Ke))throw new M(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ut.fromString(t,...n));return fu(r),new Ke(e.firestore,null,r)}}function Pe(e,t,...n){if(e=xr(e),arguments.length===1&&(t=wf.V()),vd("doc","path",t),e instanceof Hi){const r=ut.fromString(t,...n);return hu(r),new ee(e,null,new N(r))}{if(!(e instanceof ee||e instanceof Ke))throw new M(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ut.fromString(t,...n));return hu(r),new ee(e.firestore,e instanceof Ke?e.converter:null,new N(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(){this.Ua=Promise.resolve(),this.Wa=[],this.Ga=!1,this.za=[],this.ja=null,this.Ha=!1,this.Ja=!1,this.Ya=[],this.Qo=new sd(this,"async_queue_retry"),this.Za=()=>{const n=yo();n&&k("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Qo.Oo()};const t=yo();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Za)}get isShuttingDown(){return this.Ga}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Xa(),this.eu(t)}enterRestrictedMode(t){if(!this.Ga){this.Ga=!0,this.Ja=t||!1;const n=yo();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Za)}}enqueue(t){if(this.Xa(),this.Ga)return new Promise(()=>{});const n=new He;return this.eu(()=>this.Ga&&this.Ja?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Wa.push(t),this.tu()))}async tu(){if(this.Wa.length!==0){try{await this.Wa[0](),this.Wa.shift(),this.Qo.reset()}catch(t){if(!os(t))throw t;k("AsyncQueue","Operation failed with retryable error: "+t)}this.Wa.length>0&&this.Qo.Mo(()=>this.tu())}}eu(t){const n=this.Ua.then(()=>(this.Ha=!0,t().catch(r=>{this.ja=r,this.Ha=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw De("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Ha=!1,r))));return this.Ua=n,n}enqueueAfterDelay(t,n,r){this.Xa(),this.Ya.indexOf(t)>-1&&(n=0);const s=El.createAndSchedule(this,t,n,r,i=>this.nu(i));return this.za.push(s),s}Xa(){this.ja&&F()}verifyOperationInProgress(){}async ru(){let t;do t=this.Ua,await t;while(t!==this.Ua)}iu(t){for(const n of this.za)if(n.timerId===t)return!0;return!1}su(t){return this.ru().then(()=>{this.za.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.za)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.ru()})}ou(t){this.Ya.push(t)}nu(t){const n=this.za.indexOf(t);this.za.splice(n,1)}}class zi extends Hi{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=function(){return new k0}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||wd(this),this._firestoreClient.terminate()}}function D0(e,t){const n=typeof e=="object"?e:R_(),r=typeof e=="string"?e:t||"(default)",s=v_(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Em("firestore");i&&b0(s,...i)}return s}function Id(e){return e._firestoreClient||wd(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function wd(e){var t,n,r;const s=e._freezeSettings(),i=function(a,l,c,u){return new oE(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Td(u.experimentalLongPollingOptions),u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._firestoreClient=new I0(e._authCredentials,e._appCheckCredentials,e._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Yn(Bt.fromBase64String(t))}catch(n){throw new M(E.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Yn(Bt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new M(E.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ot(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new M(E.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new M(E.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return J(this._lat,t._lat)||J(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0=/^__.*__$/;class M0{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new In(t,this.data,this.fieldMask,n,this.fieldTransforms):new as(t,this.data,n,this.fieldTransforms)}}function Rd(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw F()}}class Cl{constructor(t,n,r,s,i,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this._u(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get au(){return this.settings.au}uu(t){return new Cl(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}cu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.uu({path:r,lu:!1});return s.hu(t),s}Pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.uu({path:r,lu:!1});return s._u(),s}Iu(t){return this.uu({path:void 0,lu:!0})}Tu(t){return ai(t,this.settings.methodName,this.settings.Eu||!1,this.path,this.settings.du)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}_u(){if(this.path)for(let t=0;t<this.path.length;t++)this.hu(this.path.get(t))}hu(t){if(t.length===0)throw this.Tu("Document fields must not be empty");if(Rd(this.au)&&x0.test(t))throw this.Tu('Document fields cannot begin and end with "__"')}}class N0{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||ji(t)}Au(t,n,r,s=!1){return new Cl({au:t,methodName:n,du:r,path:Ot.emptyPath(),lu:!1,Eu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function O0(e){const t=e._freezeSettings(),n=ji(e._databaseId);return new N0(e._databaseId,!!t.ignoreUndefinedProperties,n)}function F0(e,t,n,r,s,i={}){const o=e.Au(i.merge||i.mergeFields?2:0,t,n,s);bd("Data must be an object, but it was:",o,r);const a=Pd(r,o);let l,c;if(i.merge)l=new ae(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const f of i.mergeFields){const p=L0(t,f,n);if(!o.contains(p))throw new M(E.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);B0(u,p)||u.push(p)}l=new ae(u),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new M0(new Zt(a),l,c)}function Cd(e,t){if(Sd(e=xr(e)))return bd("Unsupported field value:",t,e),Pd(e,t);if(e instanceof Ad)return function(r,s){if(!Rd(s.au))throw s.Tu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Tu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.lu&&t.au!==4)throw t.Tu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Cd(a,s.Iu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(e,t)}return function(r,s){if((r=xr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return bE(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Tt.fromDate(r);return{timestampValue:ii(s.serializer,i)}}if(r instanceof Tt){const i=new Tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ii(s.serializer,i)}}if(r instanceof Rl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yn)return{bytesValue:Xf(s.serializer,r._byteString)};if(r instanceof ee){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Tu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:fl(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Tu(`Unsupported field value: ${wl(r)}`)}(e,t)}function Pd(e,t){const n={};return Af(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):sr(e,(r,s)=>{const i=Cd(s,t.cu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Sd(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Tt||e instanceof Rl||e instanceof Yn||e instanceof ee||e instanceof Ad)}function bd(e,t,n){if(!Sd(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=wl(n);throw r==="an object"?t.Tu(e+" a custom object"):t.Tu(e+" "+r)}}function L0(e,t,n){if((t=xr(t))instanceof Al)return t._internalPath;if(typeof t=="string")return Vd(e,t);throw ai("Field path arguments must be of type string or ",e,!1,void 0,n)}const U0=new RegExp("[~\\*/\\[\\]]");function Vd(e,t,n){if(t.search(U0)>=0)throw ai(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Al(...t.split("."))._internalPath}catch{throw ai(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function ai(e,t,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new M(E.INVALID_ARGUMENT,a+e+l)}function B0(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ee(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new j0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Dd("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class j0 extends kd{data(){return super.data()}}function Dd(e,t){return typeof t=="string"?Vd(e,t):t instanceof Al?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new M(E.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class q0{convertValue(t,n="none"){switch(En(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _t(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(yn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw F()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return sr(t,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(t){return new Rl(_t(t.latitude),_t(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=sl(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Kr(t));default:return null}}convertTimestamp(t){const n=Qe(t);return new Tt(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=ut.fromString(t);ct(ed(r));const s=new zr(r.get(1),r.get(3)),i=new N(r.popFirst(5));return s.isEqual(n)||De(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class K0 extends kd{constructor(t,n,r,s,i,o){super(t,n,r,s,o),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Us(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Dd("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Us extends K0{data(t={}){return super.data(t)}}class z0{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new Vs(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new Us(this._firestore,this._userDataWriter,r.key,r,new Vs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new M(E.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Us(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Vs(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Us(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Vs(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:W0(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function W0(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return F()}}class Q0 extends q0{constructor(t){super(),this.firestore=t}convertBytes(t){return new Yn(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ee(this.firestore,null,n)}}function G0(e){e=Xn(e,Ki);const t=Xn(e.firestore,zi),n=Id(t),r=new Q0(t);return $0(e._query),P0(n,e._query).then(s=>new z0(t,r,e,s))}function rn(e,t,n){e=Xn(e,ee);const r=Xn(e.firestore,zi),s=H0(e.converter,t,n);return xd(r,[F0(O0(r),"setDoc",e._key,s,e.converter!==null,n).toMutation(e._key,ve.none())])}function pu(e){return xd(Xn(e.firestore,zi),[new ll(e._key,ve.none())])}function xd(e,t){return function(r,s){const i=new He;return r.asyncQueue.enqueueAndForget(async()=>h0(await R0(r),s,i)),i.promise}(Id(e),t)}(function(t,n=!0){(function(s){rr=s})(A_),Ws(new Mr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new zi(new zy(r.getProvider("auth-internal")),new Xy(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new M(E.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zr(c.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),On(Mc,"4.0.0",t),On(Mc,"4.0.0","esm2017")})();const X0={apiKey:"AIzaSyASw3BWFO9_VNAJAvmIbjTg69O370aOado",authDomain:"todo-app-6d8fc.firebaseapp.com",databaseURL:"https://todo-app-6d8fc-default-rtdb.europe-west1.firebasedatabase.app",projectId:"todo-app-6d8fc",storageBucket:"todo-app-6d8fc.appspot.com",messagingSenderId:"579218758699",appId:"1:579218758699:web:04cf3d0757e849572e9e6e"};const ar=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},Y0={props:{darkMode:Boolean}},J0=$("g",{"clip-path":"url(#clip0_167_2)"},[$("path",{d:"M12 0C5.37333 0 0 5.37333 0 12C0 18.6267 5.37333 24 12 24C18.6267 24 24 18.6267 24 12C24 11.3867 23.9467 10.7733 23.8667 10.1867C22.56 12.0133 20.4267 13.2 18 13.2C14.0267 13.2 10.8 9.97333 10.8 6C10.8 3.58667 11.9867 1.44 13.8133 0.133333C13.2267 0.0533332 12.6133 0 12 0Z"})],-1),Z0=$("defs",null,[$("clipPath",{id:"clip0_167_2"},[$("rect",{width:"24",height:"24",fill:"white"})])],-1),tv=[J0,Z0];function ev(e,t,n,r,s,i){return tt(),ot("svg",{class:"modeButton",style:Xt({fill:n.darkMode?"black":"white"}),width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},tv,4)}const nv=ar(Y0,[["render",ev]]);const rv={props:{iconName:String,darkMode:Boolean}},sv={class:"iconButton"},iv=$("g",{"clip-path":"url(#clip0_8_2)"},[$("path",{d:"M10 5.71429H5.71429V10H4.28571V5.71429H0V4.28571H4.28571V0H5.71429V4.28571H10V5.71429Z"})],-1),ov=$("defs",null,[$("clipPath",{id:"clip0_8_2"},[$("rect",{width:"10",height:"10",fill:"white"})])],-1),av=[iv,ov],lv=$("path",{d:"M7.5 1.175L6.39001 0L1.66667 5L6.39001 10L7.5 8.825L3.89451 5L7.5 1.175Z"},null,-1),cv=[lv],uv=$("g",{"clip-path":"url(#clip0_1_2)"},[$("path",{d:"M0 7.91695V10H2.08304L8.22664 3.8564L6.14359 1.77336L0 7.91695ZM9.83752 2.24552C10.0542 2.02888 10.0542 1.67893 9.83752 1.46229L8.5377 0.16247C8.48632 0.110968 8.42528 0.070108 8.35808 0.0422291C8.29088 0.0143502 8.21884 0 8.14609 0C8.07334 0 8.0013 0.0143502 7.9341 0.0422291C7.8669 0.070108 7.80586 0.110968 7.75448 0.16247L6.73795 1.179L8.821 3.26204L9.83752 2.24552Z"})],-1),hv=$("defs",null,[$("clipPath",{id:"clip0_1_2"},[$("rect",{width:"10",height:"10",fill:"white"})])],-1),fv=[uv,hv],dv=$("g",{"clip-path":"url(#clip0_1_4)"},[$("path",{d:"M10 1.00714L8.99286 0L5 3.99286L1.00714 0L0 1.00714L3.99286 5L0 8.99286L1.00714 10L5 6.00714L8.99286 10L10 8.99286L6.00714 5L10 1.00714Z"})],-1),pv=$("defs",null,[$("clipPath",{id:"clip0_1_4"},[$("rect",{width:"10",height:"10"})])],-1),gv=[dv,pv],mv=$("path",{d:"M3 10L0 7V6H1L3.5 8.5L9 0H10V1L4 10H3Z"},null,-1),_v=[mv];function yv(e,t,n,r,s,i){return tt(),ot("div",sv,[n.iconName==="add"?(tt(),ot("svg",{key:0,style:Xt({fill:n.darkMode?"black":"white"}),width:"10",height:"10",viewBox:"0 0 10 10"},av,4)):Yt("",!0),n.iconName==="cancel"?(tt(),ot("svg",{key:1,style:Xt({fill:n.darkMode?"black":"white"}),width:"10",height:"10",viewBox:"0 0 10 10"},cv,4)):Yt("",!0),n.iconName==="edit"?(tt(),ot("svg",{key:2,style:Xt({fill:n.darkMode?"black":"white"}),width:"10",height:"10",viewBox:"0 0 10 10"},fv,4)):Yt("",!0),n.iconName==="delete"?(tt(),ot("svg",{key:3,style:Xt({fill:n.darkMode?"black":"white"}),width:"10",height:"10",viewBox:"0 0 10 10"},gv,4)):Yt("",!0),n.iconName==="apply"?(tt(),ot("svg",{key:4,style:Xt({fill:n.darkMode?"black":"white"}),width:"10",height:"10",viewBox:"0 0 10 10"},_v,4)):Yt("",!0)])}const Ev=ar(rv,[["render",yv]]);const Tv={components:{IconButton:Ev},props:{darkMode:Boolean,value:String,isChecked:Boolean,unique:String,index:Number,parentId:String},data(){return{isChanging:!1,isAdding:!1,changeInputValue:this.value,isDone:this.isChecked,isChild:this.parentId!==void 0}},methods:{deleteTask(){this.$emit("deleteTask",{id:this.unique,index:this.index})},checkboxEvent(){this.$emit("checkTask",{name:this.value,isDone:this.$refs.checkmark.checked,parentId:this.parentId,id:this.unique,index:this.index}),this.isDone=this.$refs.checkmark.checked,this.isAdding=!1},switchChangeTask(){this.isChanging=!this.isChanging,this.isAdding=!1},switchAddTask(){this.isAdding=!this.isAdding},changeTask(){this.$refs.changeInput.value.trim().length>0&&(this.$emit("changeTask",{name:this.$refs.changeInput.value,isDone:this.$refs.checkmark.checked,parentId:this.parentId,id:this.unique,index:this.index}),this.changeInputValue=this.$refs.changeInput.value,this.isChanging=!1)},addSubTask(){this.$refs.subtask_input.value.trim().length>0&&!this.isChild&&(this.isAdding=!1,this.$emit("addSubTask",{name:this.$refs.subtask_input.value,isDone:!1,parentId:this.parentId,id:this.unique,index:this.index})),this.$refs.subtask_input.value=""}}},vv={class:"checkbox__general"},Iv={class:"container"},wv=["checked"],Av={key:0,class:"checkbox__value"},Rv=$("span",{class:"checkmark"},null,-1),Cv={key:1,class:"checkbox__icons"},Pv={key:0,class:"checkbox__add-input-container"},Sv=$("g",{"clip-path":"url(#clip0_8_2)"},[$("path",{d:"M10 5.71429H5.71429V10H4.28571V5.71429H0V4.28571H4.28571V0H5.71429V4.28571H10V5.71429Z"})],-1),bv=$("defs",null,[$("clipPath",{id:"clip0_8_2"},[$("rect",{width:"10",height:"10",fill:"white"})])],-1),Vv=[Sv,bv];function kv(e,t,n,r,s,i){const o=gr("IconButton");return tt(),ot("div",vv,[$("div",{style:Xt({"padding-left":s.isChild?"24px":0,width:s.isChild?"calc(100% - 24px)":"100%"}),class:"checkbox__container"},[$("label",Iv,[$("input",{class:"checkbox__rawinput",onChange:t[0]||(t[0]=(...a)=>i.checkboxEvent&&i.checkboxEvent(...a)),ref:"checkmark",type:"checkbox",checked:n.isChecked},null,40,wv),s.isChanging?Hu((tt(),ot("input",{key:1,class:Qt([{"font-dark":n.darkMode,"font-light":!n.darkMode},"checkbox__input"]),onKeyup:t[1]||(t[1]=No((...a)=>i.changeTask&&i.changeTask(...a),["enter"])),ref:"changeInput",placeholder:"Enter a new name","onUpdate:modelValue":t[2]||(t[2]=a=>s.changeInputValue=a)},null,34)),[[ah,s.changeInputValue]]):(tt(),ot("span",Av,Tu(n.value),1)),Rv]),s.isChanging?(tt(),ot("div",Cv,[At(o,{iconName:"apply",darkMode:n.darkMode,onClick:i.changeTask},null,8,["darkMode","onClick"]),At(o,{iconName:"cancel",darkMode:n.darkMode,onClick:i.switchChangeTask},null,8,["darkMode","onClick"])])):(tt(),ot("div",{key:0,class:Qt([{"--not_transparent":s.isAdding},"checkbox__icons --transparent"])},[!s.isAdding&&!s.isDone&&!s.isChild?(tt(),xo(o,{key:0,iconName:"add",darkMode:n.darkMode,onClick:i.switchAddTask},null,8,["darkMode","onClick"])):Yt("",!0),s.isAdding&&!s.isDone&&!s.isChild?(tt(),xo(o,{key:1,iconName:"cancel",darkMode:n.darkMode,onClick:i.switchAddTask},null,8,["darkMode","onClick"])):Yt("",!0),At(o,{iconName:"edit",darkMode:n.darkMode,onClick:i.switchChangeTask},null,8,["darkMode","onClick"]),At(o,{iconName:"delete",darkMode:n.darkMode,onClick:i.deleteTask},null,8,["darkMode","onClick"])],2))],4),s.isAdding&&!s.isDone?(tt(),ot("div",Pv,[$("input",{class:Qt([{"font-dark":n.darkMode,"font-light":!n.darkMode},"checkbox__add-input"]),onKeyup:t[3]||(t[3]=No((...a)=>i.addSubTask&&i.addSubTask(...a),["enter"])),ref:"subtask_input",placeholder:"Enter the subtask"},null,34),(tt(),ot("svg",{class:"checkbox__add-button",onClick:t[4]||(t[4]=(...a)=>i.addSubTask&&i.addSubTask(...a)),style:Xt({fill:n.darkMode?"black":"white"}),width:"10",height:"10",viewBox:"0 0 10 10"},Vv,4))])):Yt("",!0)])}const Dv=ar(Tv,[["render",kv]]);const xv={props:{darkMode:Boolean}},Mv=$("g",{"clip-path":"url(#clip0_8_2)"},[$("path",{d:"M10 5.71429H5.71429V10H4.28571V5.71429H0V4.28571H4.28571V0H5.71429V4.28571H10V5.71429Z"})],-1),Nv=$("defs",null,[$("clipPath",{id:"clip0_8_2"},[$("rect",{width:"10",height:"10",fill:"white"})])],-1),Ov=[Mv,Nv];function Fv(e,t,n,r,s,i){return tt(),ot("svg",{style:Xt({fill:n.darkMode?"black":"white"}),class:"todo__button",width:"10",height:"10",viewBox:"0 0 10 10"},Ov,4)}const Lv=ar(xv,[["render",Fv]]);const Uv={props:{darkMode:Boolean},data(){return{value:""}},methods:{clearInputValue(){this.value=""}}},Bv={class:"todo__textbox"};function jv(e,t,n,r,s,i){return tt(),ot("div",Bv,[Hu($("input",{onChange:t[0]||(t[0]=o=>this.$emit("inputValue",s.value)),placeholder:"Enter the task",max:"100",class:Qt(["todo__inputbox",{"font-dark":n.darkMode,"font-light":!n.darkMode}]),"onUpdate:modelValue":t[1]||(t[1]=o=>s.value=o)},null,34),[[ah,s.value]])])}const $v=ar(Uv,[["render",jv]]),qv=mh(X0),ge=D0(qv),Hv={components:{Checkbox:Dv,Button:Lv,Input:$v,Switch:nv},data(){return{items:[],isLoading:!0,inputValue:"",isHidingCompleted:!1,darkMode:!1}},mounted(){this.fetchData(),this.darkMode=localStorage.getItem("darkMode")!=="false",document.body.style.backgroundColor=this.darkMode?"#333333":"#F5F5F5"},methods:{generateRandomID(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let n=0;n<20;n++){const r=Math.floor(Math.random()*e.length);t+=e.charAt(r)}return t},fetchData(){function e(t,n){return n.filter(r=>r.parentId===t)}G0(V0(ge,"tasks")).then(t=>{let n=[];t.forEach(r=>{n.push({name:r.data().name,isDone:r.data().isDone,parentId:r.data().parentId,id:r.id})}),this.items=[];for(const r of n)if(r.parentId===void 0){this.items.push(r);const s=e(r.id,n);for(const i of s)this.items.push(i)}this.isLoading=!1,n.filter(r=>!this.items.some(s=>s.id===r.id)).forEach(r=>{pu(Pe(ge,"tasks",r.id))})}).catch(t=>{console.error(t)})},addTask(){if(this.$refs.inputValue.clearInputValue(),this.inputValue.trim().length>0&&this.items.length<30){this.fetchData();const e=this.generateRandomID(),t=Pe(ge,"tasks",e);rn(t,{name:this.inputValue,isDone:!1,id:e})}},handleCheckTask(e){this.fetchData(),e.parentId?rn(Pe(ge,"tasks",e.id),{name:e.name,isDone:e.isDone,parentId:e.parentId}):(rn(Pe(ge,"tasks",e.id),{name:e.name,isDone:e.isDone}),e.isDone&&this.items.filter(t=>t.parentId===e.id).forEach(t=>{t.isDone=!0,rn(Pe(ge,"tasks",t.id),{name:t.name,isDone:!0,parentId:t.parentId})}))},handleInputValue(e){this.inputValue=e},handleDeleteTask(e){this.fetchData(),pu(Pe(ge,"tasks",e.id))},handleChangeTask(e){this.fetchData(),e.parentId?rn(Pe(ge,"tasks",e.id),{name:e.name,isDone:e.isDone,parentId:e.parentId}):rn(Pe(ge,"tasks",e.id),{name:e.name,isDone:e.isDone})},handleAddSubTask(e){if(this.items.filter(t=>t.parentId===e.id).length<30){this.fetchData();const t=this.generateRandomID(),n=Pe(ge,"tasks",t);rn(n,{parentId:e.id,id:t,name:e.name,isDone:!1})}},handleSwitch(){localStorage.setItem("darkMode",!this.darkMode),this.darkMode=!this.darkMode,document.body.style.backgroundColor=this.darkMode?"#333333":"#F5F5F5"}}},Kv={class:"todo__item"},zv={class:"todo__input todo__item"},Wv={key:0},Qv={key:0,class:"todo__item"},Gv={class:"todo__sublist"},Xv={key:1,class:"todo__notasks",style:{"margin-top":"8px"}};function Yv(e,t,n,r,s,i){const o=gr("Switch"),a=gr("Input"),l=gr("Button"),c=gr("Checkbox");return tt(),ot("div",{class:Qt([{"card-dark":!s.darkMode,"card-light":s.darkMode},"todo__container"])},[$("div",Kv,[$("h3",{class:Qt([{"font-light":!s.darkMode,"font-dark":s.darkMode},"todo__caption"])},"Things to do",2),At(o,{darkMode:s.darkMode,onClick:i.handleSwitch},null,8,["darkMode","onClick"]),$("div",{class:Qt([{"font-light":!s.darkMode,"font-dark":s.darkMode},"todo__hide"]),onClick:t[0]||(t[0]=u=>s.isHidingCompleted=!s.isHidingCompleted)},Tu(s.isHidingCompleted?"Show":"Hide")+" completed tasks",3)]),$("div",zv,[At(a,{onKeyup:No(i.addTask,["enter"]),ref:"inputValue",onInputValue:i.handleInputValue,darkMode:s.darkMode},null,8,["onKeyup","onInputValue","darkMode"]),At(l,{onClick:i.addTask,darkMode:s.darkMode},null,8,["onClick","darkMode"])]),s.items.length>0?(tt(),ot("div",Wv,[(tt(!0),ot(se,null,Hl(s.items,(u,f)=>(tt(),ot("div",{key:u.id,class:Qt({"font-light":!s.darkMode,"font-dark":s.darkMode})},[(!s.isHidingCompleted||!u.isDone)&&u.parentId===void 0?(tt(),ot("div",Qv,[At(c,{onChangeTask:i.handleChangeTask,onCheckTask:i.handleCheckTask,onDeleteTask:i.handleDeleteTask,onAddSubTask:i.handleAddSubTask,index:f,unique:u.id,value:u.name,isChecked:u.isDone,darkMode:s.darkMode},null,8,["onChangeTask","onCheckTask","onDeleteTask","onAddSubTask","index","unique","value","isChecked","darkMode"])])):Yt("",!0),!s.isHidingCompleted||!u.isDone?(tt(!0),ot(se,{key:1},Hl(s.items.filter(p=>p.parentId===u.id),(p,g)=>(tt(),ot("div",Gv,[At(c,{onChangeTask:i.handleChangeTask,onCheckTask:i.handleCheckTask,onDeleteTask:i.handleDeleteTask,index:g,unique:p.id,value:p.name,isChecked:p.isDone,parentId:p.parentId,darkMode:s.darkMode},null,8,["onChangeTask","onCheckTask","onDeleteTask","index","unique","value","isChecked","parentId","darkMode"])]))),256)):Yt("",!0)],2))),128))])):Yt("",!0),s.items.length==0||s.items.every(u=>u.isDone===!0)&&s.isHidingCompleted?(tt(),ot("div",Xv,[s.isLoading?(tt(),ot("a",{key:0,class:Qt({"font-dark":s.darkMode,"font-light":!s.darkMode})},"Loading...",2)):(tt(),ot("a",{key:1,class:Qt({"font-dark":s.darkMode,"font-light":!s.darkMode})},"You have no tasks",2))])):Yt("",!0)],2)}const Jv=ar(Hv,[["render",Yv]]);lm(Jv).mount("#app");
